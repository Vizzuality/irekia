<div id="search">
  <div class="search_box">
    <h1><%= t('.your_search_results') %></h1>
    <%= form_for :search, :url => search_path, :html => {:method => :get} do |f| %>
      <%= f.text_field :query %>
      <%= f.submit 'Search' %>
    <% end %>
  </div>
  <ul class="tabs">
    <li class="<%= current_type? %>"><%= link_to t('.tabs.summary'), search_path(:search => {:q => params[:search][:q]}) %></li>
    <li class="<%= current_type? 'contents' %>"><%= link_to t('.tabs.contents', :count => @contents.count), search_path(:search => {:query => params[:search][:query], :type => 'contents'}) %></li>
    <li class="<%= current_type? 'politicians' %>"><%= link_to t('.tabs.politicians', :count => @politicians.count), search_path(:search => {:query => params[:search][:query], :type => 'politicians'}) %></li>
    <li class="<%= current_type? 'users' %>"><%= link_to t('.tabs.users',       :count => @citizens.count), search_path(:search => {:query => params[:search][:query], :type => 'users'}) %></li>
  </ul>
  <% if show_contents? %>
    <div class="contents_results">
      <h2><%= t('.contents_results.title', :count => @contents.count) %></h2>
      <ul>
        <% @contents.first(how_many_contents_to_show?).each do |content| %>
        <li>
          <%= render "shared/lists_elements/#{content.event_type}", :data => content.item %>
        </li>
        <% end %>
      </ul>
      <% if params[:search][:type].blank? %>
        <% if @contents.count > 5 %>
          <div class="pagination">
            <%= link_to t('.contents_results.all', :count => @contents.count), '/in_development' %>
          </div>
        <% end %>
      <% else %>
          <div class="pagination">
            <%= link_to t('.contents_results.more'), '/in_development' %>
          </div>
      <% end %>
      <ul class="main_filters">
        <li>
          <%= link_to t('.contents_results.main_filters.more_recent'), '/in_development', :class => 'more_recent selected' %>
        </li>
        <li>
          <%= link_to t('.contents_results.main_filters.more_polemic'), '/in_development', :class => 'more_polemic' %>
        </li>
      </ul>
      <ul class="content_type_filters">
        <li><%= link_to t('.contents_results.content_type_filters.all'), '/in_development', :class => 'selected' %></li>
        <li><%= link_to t('.contents_results.content_type_filters.news'), '/in_development' %></li>
        <li><%= link_to t('.contents_results.content_type_filters.politicians_activity'), '/in_development' %></li>
        <li><%= link_to t('.contents_results.content_type_filters.questions'), '/in_development' %></li>
        <li><%= link_to t('.contents_results.content_type_filters.proposals'), '/in_development' %></li>
        <li><%= link_to t('.contents_results.content_type_filters.images'), '/in_development' %></li>
        <li><%= link_to t('.contents_results.content_type_filters.videos'), '/in_development' %></li>
      </ul>
    </div>
  <% end %>
  <% if show_politicians? %>
    <div class="politicians_results">
      <h2><%= t('.politicians_results.title', :count => @politicians.count) %></h2>
      <ul>
        <% @politicians.first(how_many_users_to_show?).each do |politician| %>
        <li>
          <%= link_to image_tag(politician.profile_image), path_for_user(politician) if politician.profile_image %>
          <%= link_to politician.fullname, path_for_user(politician) %>
          <span class="title"><%= t('.politicians_results.title_area', :title => get_politician_title(politician), :area => politician.areas.map(&:name).join(', ')) %></span>
          <%= link_to t('.politicians_results.follow'), '/in_development' %>
        </li>
        <% end %>
      </ul>
      <% if params[:search][:type].blank? %>[:search]
        <% if @politicians.count > how_many_users_to_show? %>
          <div class="pagination">
            <%= link_to t('.politicians_results.all', :count => @politicians.count), '/in_development' %>
          </div>
        <% end %>
      <% else %>
        <% if @politicians.count > how_many_users_to_show? %>
          <div class="pagination">
            <%= link_to t('.politicians_results.more'), '/in_development' %>
          </div>
        <% end %>
        <ul class="main_filters">
          <li>
            <%= link_to t('.politicians_results.main_filters.more_recent'), '/in_development', :class => 'more_recent selected' %>
          </li>
          <li>
            <%= link_to t('.politicians_results.main_filters.more_active'), '/in_development', :class => 'more_active' %>
          </li>
        </ul>
        <ul class="area_filters">
          <li><%= link_to t('.politicians_results.area_filters.all'), '/in_development', :class => 'selected' %></li>
          <% @politicians_areas.each do |area| %>
            <li><%= link_to area.name, search_path(:search => {:q => params[:search][:q], :type => 'politicians', :filter => area.id}) %></li>
          <% end %>
        </ul>
      <% end %>
    </div>
  <% end %>
  <% if show_users? %>
    <div class="users_results">
      <h2><%= t('.users_results.title', :count => @citizens.count) %></h2>
      <ul>
        <% @citizens.first(how_many_users_to_show?).each do |user| %>
        <li>
          <%= link_to image_tag(user.profile_image), path_for_user(user) if user.profile_image %>
          <%= link_to user.fullname, path_for_user(user) %>
          <span class="location"><%= "#{user.city}, #{user.province}" %></span>
          <%= link_to t('.users_results.follow'), '/in_development' %>
        </li>
        <% end %>
      </ul>
      <% if params[:search][:type].blank? %>
        <% if @citizens.count > how_many_users_to_show? %>
          <div class="pagination">
            <%= link_to t('.users_results.all', :count => @citizens.count), '/in_development' %>
          </div>
        <% end %>
      <% else %>
        <% if @politicians.count > how_many_users_to_show? %>
          <div class="pagination">
            <%= link_to t('.users_results.more'), '/in_development' %>
          </div>
        <% end %>
        <ul class="main_filters">
          <li>
            <%= link_to t('.users_results.main_filters.more_recent'), '/in_development', :class => 'more_recent selected' %>
          </li>
          <li>
            <%= link_to t('.users_results.main_filters.more_active'), '/in_development', :class => 'more_active' %>
          </li>
        </ul>
        <%= form_tag search_path(:search => {:q => params[:search][:q], :type => 'users'}), :class => 'location_filters'  do %>
          <%= label_tag t('.users_results.look_city') %>
          <%= text_field_tag 'city', t('.users_results.look_city') %>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>

