<% content_for :header do %>
  <header>
  <%= link_to 'volver', "/", :class => :white_button %>
  <h2>pregunta</h2>
  </header>
<% end %>

<% content_for :title do %>
  <div class="header">
  <h1><%= @content.question_text %></h1>
  <div class="footer when"><%= link_to @content.author.try(:fullname), path_for_user(@content.author) %> <%= t('.question_content.author_and_comments.time', :time => distance_of_time_in_words_to_now(@content.published_at)) %></div>
  <div class="shadow"></div>
  </div>
<% end %>

<div class="article questions">
  <div class="inner">
    <div class="left">
      <% if @answer %>
        <div class="answer">
          <%= simple_format @answer.answer_text %>
          <%= raw @content.answer.video_data.html if @content.answer.video_data && @content.answer.video_data.html.present? %>
        </div>
      <% else %>
        <% if can_i_answer_the_question? -%>
          <%= form_for @new_answer, :remote => true, :html => {:class => :publish} do |form| %>
              <%= form.hidden_field :related_content_id %>
              <%= form.fields_for :answer_data, @new_answer.answer_data do |answer_data| -%>
                <div class="paper">
                <div class="placeholder">Contestar a esta pregunta...</div>
                <%= answer_data.text_area :answer_text, :class => :grow %>
                </div>
              <% end -%>

              <%= form.submit t(".publish"), :class => 'white_button pink' %>

            <% end -%>
        <% else -%>
          <div class="answer_placeholder">
            <p><strong><%= t('.not_answered_yet') %></strong></p>
            <p class="has_requested_answer">

            <% if @user_has_requested_answer -%>
              <% if @content.answer_requests_count <= 2 -%>
                <%= t('.you_and_other', :count => @content.answer_requests_count) -%>
              <% else -%>
                <%= t('.you_and_thousands', :count => @content.answer_requests_count - 1) -%>&#44;
              <% end -%>
            <% else -%>
              <%= t('.people_demanding_answer', :count => @content.answer_requests_count) -%>&#44;
            <% end -%>

            <% if @new_request -%>
              &nbsp;
              <%= form_for @new_request, :remote => true, :html => {:'data-type' => :html} do |f| -%>
                <%= f.hidden_field :content_id -%>
                <%= f.submit_with_login t('.join_them', :count => @content.answer_requests_count) -%>
              <% end
          end -%>
          </p>
        </div>
      <% end -%>
    <% end %>
    <%#= render "participations/comments" %>
  </div>
</div>
<div class="t"></div><div class="f"></div>
</div>
