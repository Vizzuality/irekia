(function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",
requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,g){c=a.Event(c);b.trigger(c,g);return c.result!==false},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,g,i,j=d.data("cross-domain")||
null,h=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method");g=d.attr("action");i=d.serializeArray();var n=d.data("ujs:submit-button");n&&(i.push(n),d.data("ujs:submit-button",null))}else d.is(c.inputChangeSelector)?(e=d.data("method"),g=d.data("url"),i=d.serialize(),d.data("params")&&(i=i+"&"+d.data("params"))):(e=d.data("method"),g=d.attr("href"),i=d.data("params")||null);e={type:e||"GET",data:i,dataType:h,crossDomain:j,beforeSend:function(a,
e){e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script);return c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,f){d.trigger("ajax:success",[a,b,f])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,f){d.trigger("ajax:error",[a,b,f])}};if(g)e.url=g;return c.ajax(e)}else return false},handleMethod:function(c){var e=c.attr("href"),g=c.data("method"),c=c.attr("target"),i=a("meta[name=csrf-token]").attr("content"),j=a("meta[name=csrf-param]").attr("content"),
e=a('<form method="post" action="'+e+'"></form>'),g='<input name="_method" value="'+g+'" type="hidden" />';j!==b&&i!==b&&(g+='<input name="'+j+'" value="'+i+'" type="hidden" />');c&&e.attr("target",c);e.hide().append(g).appendTo("body");e.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]());b[c](b.data("disable-with"));b.prop("disabled",true)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=
a(this),c=b.is("button")?"html":"val";if(b.data("ujs:enable-with"))b[c](b.data("ujs:enable-with"));b.prop("disabled",false)})},allowAction:function(a){var b=a.data("confirm"),g=false,i;if(!b)return true;c.fire(a,"confirm")&&(g=c.confirm(b),i=c.fire(a,"confirm:complete",[g]));return g&&i},blankInputs:function(b,c,g){var i=a(),j;b.find(c||"input,textarea").each(function(){j=a(this);if(g?j.val():!j.val())i=i.add(j)});return i.length?i:false},nonBlankInputs:function(a,b){return c.blankInputs(a,b,true)},
stopEverything:function(b){a(b.target).trigger("ujs:everythingStopped");b.stopImmediatePropagation();return false},callFormSubmitBindings:function(c,e){var g=c.data("events"),i=true;g!==b&&g.submit!==b&&a.each(g.submit,function(a,b){if(typeof b.handler==="function")return i=b.handler(e)});return i},disableElement:function(a){a.data("ujs:enable-with",a.html());a.html(a.data("disable-with"));a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==
b&&(a.html(a.data("ujs:enable-with")),a.data("ujs:enable-with",false));a.unbind("click.railsDisable")}};a.ajaxPrefilter(function(a,b,g){a.crossDomain||c.CSRFProtection(g)});a(document).delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(a(this))});a(document).delegate(c.linkClickSelector,"click.rails",function(d){var e=a(this),g=e.data("method"),i=e.data("params");if(!c.allowAction(e))return c.stopEverything(d);e.is(c.linkDisableSelector)&&c.disableElement(e);if(e.data("remote")!==
b){if((d.metaKey||d.ctrlKey)&&(!g||g==="GET")&&!i)return true;c.handleRemote(e)===false&&c.enableElement(e);return false}else if(e.data("method"))return c.handleMethod(e),false});a(document).delegate(c.inputChangeSelector,"change.rails",function(b){var e=a(this);if(!c.allowAction(e))return c.stopEverything(b);c.handleRemote(e);return false});a(document).delegate(c.formSubmitSelector,"submit.rails",function(d){var e=a(this),g=e.data("remote")!==b,i=c.blankInputs(e,c.requiredInputSelector),j=c.nonBlankInputs(e,
c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(i&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[i]))return c.stopEverything(d);if(g){if(j)return c.fire(e,"ajax:aborted:file",[j]);if(!a.support.submitBubbles&&a().jquery<"1.7"&&c.callFormSubmitBindings(e,d)===false)return c.stopEverything(d);c.handleRemote(e);return false}else setTimeout(function(){c.disableFormElements(e)},13)});a(document).delegate(c.formInputClickSelector,"click.rails",function(b){var e=a(this);
if(!c.allowAction(e))return c.stopEverything(b);b=(b=e.attr("name"))?{name:b,value:e.val()}:null;e.closest("form").data("ujs:submit-button",b)});a(document).delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))});a(document).delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})})(jQuery);(function(a,b,c){function d(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function e(a,b){for(var f in b)a.style[g(a,f)||f]=b[f];return a}function g(a,b){var f=a.style,k,d;if(f[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(d=0;d<n.length;d++)if(k=n[d]+b,f[k]!==c)return k}function i(a,b,c,k){var d=["opacity",b,~~(a*100),c,k].join("-"),c=0.01+c/k*100,k=Math.max(1-(1-a)/b*(100-c),a),e=p.substring(0,p.indexOf("Animation")).toLowerCase();
o[d]||(f.insertRule("@"+(e&&"-"+e+"-"||"")+"keyframes "+d+"{0%{opacity:"+k+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+a+"}100%{opacity:"+k+"}}",0),o[d]=1);return d}function j(a,b,f){f&&!f.parentNode&&j(a,f);a.insertBefore(b,f||null);return a}function h(a,f){var c=b.createElement(a||"div"),k;for(k in f)c[k]=f[k];return c}var n=["webkit","Moz","ms","O"],o={},p;j(b.getElementsByTagName("head")[0],h("style"));var f=b.styleSheets[b.styleSheets.length-1],k=function z(a){if(!this.spin)return new z(a);
var a=a||{},b={lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:0.25,fps:20},f;for(f in b)a[f]===c&&(a[f]=b[f]);this.opts=a},q=k.prototype={spin:function(a){this.stop();var b=this,f=b.el=e(h(),{position:"relative"}),c,k;a&&(k=d(j(a,f,a.firstChild)),c=d(f),e(f,{left:(a.offsetWidth>>1)-c.x+k.x+"px",top:(a.offsetHeight>>1)-c.y+k.y+"px"}));f.setAttribute("aria-role","progressbar");b.lines(f,b.opts);if(!p){var g=b.opts,q=0,n=g.fps,i=n/g.speed,o=(1-g.opacity)/(i*g.trail/100),y=
i/g.lines;(function I(){q++;for(var a=g.lines;a;a--){var c=Math.max(1-(q+a*y)%i*o,g.opacity);b.opacity(f,g.lines-a,c,g)}b.timeout=b.el&&setTimeout(I,~~(1E3/n))})()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c);return this}};q.lines=function(a,b){function f(a,k){return e(h(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:k,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*
c)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.width>>1)+"px"})}for(var c=0,k;c<b.lines;c++)k=e(h(),{position:"absolute",top:1+~(b.width/2)+"px",transform:"translate3d(0,0,0)",opacity:b.opacity,animation:p&&i(b.opacity,b.trail,c,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&j(k,e(f("#000","0 0 4px #000"),{top:"2px"})),j(a,j(k,f(b.color,"0 0 1px rgba(0,0,0,.1)")));return a};q.opacity=function(a,b,f){b<a.childNodes.length&&(a.childNodes[b].style.opacity=f)};(function(){var a=e(h("group"),
{behavior:"url(#default#VML)"});if(!g(a,"transform")&&a.adj){for(a=4;a--;)f.addRule(["group","roundrect","fill","stroke"][a],"behavior:url(#default#VML)");q.lines=function(a,b){function f(a,d,q){j(g,j(e(c(),{rotation:360/b.lines*a+"deg",left:~~d}),j(e(h("roundrect",{arcsize:1}),{width:k,height:b.width,left:b.radius,top:-b.width>>1,filter:q}),h("fill",{color:b.color,opacity:b.opacity}),h("stroke",{opacity:0}))))}function c(){return e(h("group",{coordsize:d+" "+d,coordorigin:-k+" "+-k}),{width:d,height:d})}
var k=b.length+b.width,d=2*k,g=c(),q=~(b.length+b.radius+b.width)+"px",p;if(b.shadow)for(p=1;p<=b.lines;p++)f(p,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(p=1;p<=b.lines;p++)f(p);return j(e(a,{margin:q+" 0 0 "+q,zoom:1}),g)};q.opacity=function(a,b,f,c){a=a.firstChild;c=c.shadow&&c.lines||0;a&&b+c<a.childNodes.length&&(a=a.childNodes[b+c],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=f))}}else p=g(a,"animation")})();a.Spinner=k})(window,document);var SPINNER_OPTIONS={lines:12,length:0,width:3,radius:6,color:"#333",speed:1,trail:100,shadow:false},IrekiaSpinner=new Spinner(SPINNER_OPTIONS),filterArea=0,filterUrl=[],filterSort=[];String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};
String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")};jQuery.preloadImages=function(){for(var a=0;a<arguments.length;a++)jQuery("<img>").attr("src",arguments[a])};function enableElement(a){a&&(a.removeClass("disabled"),a.removeAttr("disabled"))}function disableElement(a){a&&(a.addClass("disabled"),a.attr("disabled","disabled"))}function isEmpty(a){return a?!a.match(/\S/):true}
function goTo(a,b,c){if(a){var d=b&&b.speed||200,e=b&&b.delay||500,b=b&&b.margin||30;$("html, body").delay(e).animate({scrollTop:a.offset().top-b},d);c&&c()}}function setupUploader(a){return new qq.FileUploader(a)}
function watchHash(a){var a=a&&a.delay||500,b=0,c;if(hash=window.location.hash){if(hash=="#comments")c=$("div.comments"),b=10;else if(hash=="#team"||hash=="#questions"||hash=="#proposals"||hash=="#actions"||hash=="#agenda")c=$("ul.menu"),b=40;goTo(c,{margin:b,delay:a},function(){window.location.hash="";$.browser.msie||window.history.pushState("",document.title,window.location.pathname)})}}
jQuery.fn.enableWelcomeSlideshow=function(a){this.each(function(){var b=a&&a.speed||500,c=a&&a.fadeSpeed||250,d=a&&a.height||110,e=a&&a.width||994;$(this).find(".close-welcome").submit(function(){var a=$(this).closest(".inner").find("ul > li:last");$(this).closest(".inner").find("ul > li:first").after(a);$(this).closest(".inner").find("ul").animate({marginLeft:-1*e},b,function(){$(".welcome a.config.first-time").fadeIn(c)});$(".welcome .close-welcome,.welcome .next-welcome").fadeOut(c,function(){$(this).remove()});
$(".welcome > .inner").animate({height:d},b)});$(this).find(".next-welcome").click(function(a){a.preventDefault();$(this).closest(".inner").find("ul").animate({marginLeft:-1*e},b,function(){var a=$(this).find("li:first");$(this).find("li:last").before(a);$(this).removeAttr("style")})})})};
jQuery.fn.enableSeeAllAreas=function(a){this.each(function(){var b=a&&a.speed||500,c=a&&a.height||635;$(this).click(function(a){a.preventDefault();$(this).closest(".article.areas").find("div.areas_list").animate({height:c},b);$(this).closest(".article.areas").find("div.all_areas").show();$(this).closest(".article.areas").find(".bfooter").animate({opacity:0,height:0},b,function(){$(this).closest(".article.areas").removeClass("with_footer");$(this).remove()})})})};
jQuery.fn.smartPlaceholder=function(a){this.each(function(){var b=a&&a.speed||150,c=a&&a.timeOut||100,d=$(this).find("span.holder"),e=$(this).find(":input").not("input[type='hidden'], input[type='submit']");e.val()&&d.hide();e.keydown(function(a){a.metaKey&&a.keyCode==88?setTimeout(function(){isEmpty(e.val())&&d.fadeIn(b)},c):a.metaKey&&a.keyCode==86?setTimeout(function(){!isEmpty(e.val())&&d.fadeOut(b)},c):setTimeout(function(){e.val()?d.fadeOut(b):d.fadeIn(b)},0)});d.click(function(){e.focus()});
e.blur(function(){!e.val()&&d.fadeIn(b)})})};
function loginInLinks(){$(".floating-login").each(function(a,b){$(b).unbind();$(b).die();$(b).hasClass("after_share")&&($(b).addClass("share"),$(b).removeClass("after_share"),$(b).sharePopover());$(b).hasClass("after_ask_question")&&($(b).addClass("ask_question"),$(b).removeClass("after_ask_question"),$(b).questionPopover());$(b).hasClass("after_create_proposal")&&($(b).addClass("create_proposal"),$(b).removeClass("after_create_proposal"),$(b).proposalPopover());$(b).removeClass("floating-login")})}
jQuery.fn.enableRegistration=function(a){function b(a,b){$(".cycle").animate({scrollLeft:a.position().left+850},350,"easeInOutQuad",function(){h.parent().animate({height:b.outerHeight(true)+i},350,"easeInOutQuad")})}function c(){window.location.href="/"}function d(a,f){var k=$($(f).find(".inner-cycle").html());o.after(k);n=o;o=k;b(n,o);j=o.find("form");$('form .field.born_at select[name="user[birthday(1i)]"]').dropkick({width:-10});$('form .field.born_at select[name="user[birthday(2i)]"]').dropkick({width:77});
$('form .field.born_at select[name="user[birthday(3i)]"]').dropkick({width:-20});j.submit(function(){$(this).find(".error").removeClass("error")});j.bind("ajax:success",c);j.bind("ajax:error",g)}function e(a){o=$(a);n.after(o);j=o.find("form");j.find("a.checkbox").enableCheckbox();j.submit(function(){$(this).find(".error").removeClass("error")});j.bind("ajax:success",d);j.bind("ajax:error",g);b(n,o)}function g(a,b){var c=$.parseJSON(b.responseText);_.each(c,function(a,b){o.find("form ."+b).addClass("error")});
o.effect("shake",{times:4},100)}var i=a&&a.margin||20,j=$(".cycle form"),h=$(".cycle .inner-cycle"),n,o;this.each(function(){n=h.find(".article");n.hasClass("step2")?(i=50,o=n,j=o.find("form"),j.submit(function(){$(this).find(".error").removeClass("error")}),j.bind("ajax:success",c),j.bind("ajax:error",g)):$(".advance").click(function(a){a.preventDefault();n=$(this).parents(".article");$("html, body").animate({scrollTop:"100px"},950,"easeInOutQuad");$.ajax({url:"/users/new",data:{},type:"GET",success:e})})})};
jQuery.fn.enableSlideshow=function(a){function b(a,b){var c=f.find(".section:eq("+a+")").height();f.find(".inner_slideshow").animate({height:c},o,function(){b&&b()})}function c(){z||f.find(".section:eq("+q+") .options").length>0&&f.find(".options").fadeIn(p)}function d(){f.find(".options").fadeOut(p)}function e(){z||(c(),f.find(".slideshow_controls").fadeIn(p))}function g(){d(true);f.find(".slideshow_controls").fadeOut(p)}function i(a){a+1>=l?(j("next"),h("prev")):(a<=0?j("prev"):h("prev"),h("next"))}
function j(a){f.find(".slideshow_controls ."+a).addClass("disabled")}function h(a){z||f.find(".slideshow_controls ."+a).removeClass("disabled")}function n(a){b(a,function(){f.find(".section:eq("+a+") .caption").fadeOut(o,function(){f.find(".inner_slideshow").animate({scrollLeft:a*k},o,function(){z||(f.find(".section:eq("+q+") .options").length>0?c():d());i(a);f.find(".navigation li").removeClass("selected");f.find(".navigation li:eq("+q+")").addClass("selected");f.find(".section:eq("+a+") .caption").fadeIn(o,
function(){f.find(".navigation").show()})})})})}var o=a&&a.speed||100,p=a&&a.speed||250,f=$(this),k=610,q=0,l,z=false;l=f.find(".section").length;f.find(".next").click(function(a){a.preventDefault();$(this).hasClass("disabled")||(q+1<l&&q++,n(q))});f.find(".prev").click(function(a){a.preventDefault();$(this).hasClass("disabled")||(q-1>=0&&q--,n(q))});f.find(".navigation li a").live("click",function(a){a.preventDefault();q=f.find(".navigation li").index($(this).parent());n(q)});f.find(".embed_window a.close").click(function(a){a.preventDefault();
f.find(".embed_window").fadeOut(o);z=false;e();c()});f.find(".options li.embed a").click(function(a){a.preventDefault();z=true;d();g();f.outerHeight(true);var a=f.outerWidth(true)/2-f.find(".embed_window").width()/2,b=f.find(".section:eq("+q+") textarea").html();f.find(".embed_window textarea").html(b);f.find(".embed_window").css({top:"20px",left:a});f.find(".embed_window").fadeIn(o)});f.find(".options .handle").click(function(a){a.preventDefault()});f.find(".options").bind("mouseenter",function(){z||
($(this).find("> a").fadeOut(o),$(this).find(".inner_options").fadeIn(o))});f.find(".options").bind("mouseleave",function(){$(this).find("> a").fadeIn(o);$(this).find(".inner_options").fadeOut(o)});f.bind("mouseenter",function(){e()});f.bind("mouseleave",function(){g()});(function(){var a=f.outerHeight(true),b=f.find(".slideshow_controls a").height();f.find(".slideshow_controls a").css("top",a/2-b+"px")})();(function(){for(var a=f.find(".section:eq(0)").height()-f.find(".section:eq(0) .caption").height(),
b=0;b<=l-1;b++)f.find(".navigation").append('<li><a href="#"></a></li>');f.find(".navigation li:first-child").addClass("selected");f.find(".navigation").css({top:a+7+"px"});f.find(".navigation").fadeIn(o)})();b(0)};
jQuery.fn.enablePoliticianTags=function(a){function b(a){GOD.subscribe("_close.politician_suggest");GOD.broadcast("_close.politician_suggest");c();e(a)}function c(){o.stop();$(".autosuggest.mini").length>0&&$(".autosuggest.mini").fadeOut(j,function(){$(this).remove()})}function d(a){var b=k.position().left-a.outerWidth(true)/2+k.outerWidth(true)/2,f=k.position().top+k.outerHeight(true)+8;a.css({left:b+"px",top:f+"px"})}function e(a){a=$(a);a.find("ul li").length>0?(a.addClass("mini"),f.after(a),d(a),
a.hide(),a.fadeIn(j,function(){o.stop()})):o.stop()}function g(){clearTimeout(h);h=setTimeout(function(){z.val().length>0&&o.spin(n);var a={name:z.val(),only_politicians:true};$.ajax({url:i,data:{search:a},type:"GET",success:b})},500)}var i="/search/politicians_and_areas",j=a&&a.speed||100,h,n=document.getElementById("politician_spinner"),o=new Spinner(SPINNER_OPTIONS),p=a&&a.speed||10,f=$(this),k=f.find(".add"),a=f.find("input.remove"),q=k.find("a"),l=k.find(".input_field"),z=k.find('input[type="text"]');
$(window).bind("_close.politician_suggest",function(){c()});a.live("click",function(){$(this).parents("li").fadeOut(j)});q.click(function(a){a.preventDefault();$(this).fadeOut(j,function(){l.fadeIn(p,function(){z.focus()})})});(function(a){function b(f){a.val().length<=0?c():(!_.any([13,16,17,18,20,27,32,37,38,39,40,91],function(a){return f.keyCode==a})||!(f.keyCode==65&&(f.metaKey||f.ctrlKey)))&&z.val().length>3&&g(f)}a.keyup(b);a.keydown(b)})(z);k.find(".add_politician").bind("ajax:success",function(a,
b){var f=$(b);f.hide();l.parents("li").before(f);f.fadeIn(j)});$(".autosuggest.mini li").live("click",function(){var a=$(this).attr("data-id");z.val("");c();k.find(".add_politician #editable_politician_id").attr("value",a);k.find(".add_politician").submit()})};
jQuery.fn.enableTextEditing=function(a){this.each(function(){var b=$(this),c=a&&a.speed||120,d=a&&a.speed||80,e=new Spinner(SPINNER_OPTIONS),g;b.find(".content").click(function(){var a=$(this).parent();b.find(".content").slideUp(c);a.find(".input_field").slideDown(c,function(){a.find(".submit").fadeIn(d);a.find(".input_field :text, .input_field textarea").focus()})});b.bind("ajax:success",function(){e.stop();b.find(".content").html(g);b.find(".content").slideDown(d);b.find(".input_field").slideUp(c);
b.find(".submit").fadeOut(c);enableElement(b.find(".submit"))});b.bind("ajax:error",function(){e.stop();b.find(".input_field").addClass("error");enableElement(b.find(".submit"))});b.submit(function(){e.spin();$(e.el).addClass("spinner");b.find(".submit").after(e.el);b.find(".input_field").removeClass("error");g=b.find(".input_field :text, .input_field textarea").val();isEmpty(g)&&(g=b.attr("data-t-empty"));disableElement(b.find(".submit"))})})};
jQuery.fn.enableImageEditing=function(a){function b(){e.find("form.remove").die();e.find("form.remove").live("submit",function(){e.find(".image_container form.remove").fadeOut(g,function(){$(this).remove()});e.find(".editable.caption").fadeOut(g,function(){$(this).remove()});e.find(".image_container img").fadeOut(g,function(){$(this).remove();e.find(".add_image").fadeIn(g)})})}function c(){e.find(".add_image a").die();e.find(".add_image a").live("click",function(a){a.preventDefault();d("upload_new_image");
$(this).parents("form");$(this).parent().slideUp(g);e.find(".input_field").fadeIn(g)})}function d(a){$span=$("#"+a);if($span.length>0){var d=$(".uploader");new qq.FileUploader({element:document.getElementById(a),action:$span.attr("data-url"),params:{utf8:$span.closest("form").find("input[name=utf8]").val(),authenticity_token:$span.closest("form").find("input[name=authenticity_token]").val()},debug:false,text:$span.html(),onSubmit:function(){$(".progress").show();d.find(".percentage").css("color",
"#FF0066");d.find("input").blur();d.find(".holder").fadeOut(100);d.find(".loading, .percentage").fadeIn(100)},onProgress:function(a,b,c,e){a=parseFloat(c)/parseFloat(e)*100;b=parseInt(585*parseInt(a,10)/100,10);parseInt(a)>=75&&d.find(".loading").fadeOut(100);parseInt(a)>=46&&d.find(".percentage").css("color","#fff");d.find(".percentage").html(parseInt(a,10)+"%");$(".progress").css("width",b)},onComplete:function(a,g,i){$(".image_cache_name").val(i.image_cache_name);d.find("form").unbind();d.find("form").submit();
d.find("form").bind("ajax:success",function(a,f){d.find(".loading, .holder, .percentage").fadeOut(100,function(){d.fadeOut(100);d.find(".progress").fadeOut(100,function(){$(this).width(0)})});e.find(".image_container").fadeIn(100);e.find(".image_container img").fadeIn(100);e.find(".image_container form.remove").fadeIn(100);var k=$(f);e.html(k);b();c();e.find(".editable.caption").enableTextEditing()})},onCancel:function(){}})}}var e=$(this),g=a&&a.speed||120;new Spinner(SPINNER_OPTIONS);b();c()};
jQuery.fn.enableDateEditing=function(a){this.each(function(){var b=$(this),c=a&&a.speed||120,d=a&&a.speed||80,e=new Spinner(SPINNER_OPTIONS);b.click(function(){$(this).find(".dk_container").length>0?$(this).find(".dk_container").slideDown(c):($(this).find("select:eq(0)").dropkick({width:-20}),$(this).find("select:eq(1)").dropkick({width:77}),$(this).find("select:eq(2)").dropkick({width:-10}));$(this).find(".content").slideUp(c);$(this).find(".submit").fadeIn(d)});b.bind("ajax:success",function(){e.stop();
$(this).find(".dk_container").slideUp(c);$(this).find(".content").slideDown(d);$(this).find(".submit").fadeOut(c);enableElement($(this).find(".submit"))});b.submit(function(){e.spin();$(e.el).addClass("spinner");$(this).find(".submit").after(e.el);disableElement($(this).find(".submit"))})})};
jQuery.fn.enableEditTags=function(a){var b=a&&a.speed||100,c=a&&a.speed||10,d=$(this),e=d.find(".new"),g=$(this).find(".add");e.bind("ajax:success",function(a,b){var c=$(b);c.hide();g.before(c);c.fadeIn(250)});e.find("form").submit(function(){e.fadeOut(b,function(){d.find(".new").fadeIn(c,function(){$(this).find('input[type="text"]').val("");$(this).find('input[type="text"]').focus()})})});g.find("a").live("click",function(a){a.preventDefault();e.find('input[type="text"]').val("");$(this).parent().fadeOut(b,
function(){d.find(".new").fadeIn(c,function(){$(this).find('input[type="text"]').focus()})})});$(this).find("form.remove").live("submit",function(){$(this).parent().fadeOut(b,function(){$(this).remove()})})};
jQuery.fn.enableRadio=function(){this.each(function(){var a=$(this);a.find("a.radio").click(function(b){b.preventDefault();a.find("a.radio").removeClass("selected");$(this).addClass("selected");a.find('input[type="radio"]').val(0).attr("checked",false);$(this).find('input[type="radio"]').val(1).attr("checked",true)})})};
jQuery.fn.enableCheckbox=function(){this.each(function(){$(this).click(function(a){a.preventDefault();$(this).hasClass("selected")?($(this).removeClass("selected"),$(this).closest("p, div").find('input[type="checkbox"]').val(0).attr("checked",false)):($(this).addClass("selected"),$(this).closest("p, div").find('input[type="checkbox"]').val(1).attr("checked",true))})})};
jQuery.fn.enableOpinion=function(){this.each(function(){$(this).find("input[type='submit'], .my_opinion button").click(function(){$(".my_opinion .selected").removeClass("selected");$(this).addClass("selected")});$(this).find("form").bind("ajax:success",function(a,b){$(this).parents(".my_opinion").find(".result").fadeOut(250,function(){$(this).html(b);$(this).parent().removeClass("in_favor");$(this).parent().removeClass("against");$(this).parent().addClass($(b).attr("class"));$(this).fadeIn(250)})})})};
jQuery.fn.enableArguments=function(a){function b(a){c.find("ul").animate({height:a},d)}var c=$(this),d=a&&a.speed||200,e=a&&a.speed||3E3,g=0;this.each(function(){c.find("ul").height()>g&&(g=c.find("ul").height())});this.each(function(){function a(b){$(c).append($("#notice_"+b));$("#notice_"+b).css("bottom","75px");$("#notice_"+b).css("right","-42px");$("#notice_"+b).fadeIn(250);setTimeout(function(){$("#notice_"+b).fadeOut(d);k.fadeOut(d,function(){enableElement(p);f.fadeIn(d);$(this).remove();p.val("")})},
e)}$(this).find("ul").animate({height:g});var c=this,h=$(this),n=$(c).hasClass("in_favor")?document.getElementById("spinner_in_favor"):document.getElementById("spinner_against"),o=new Spinner(SPINNER_OPTIONS),p=$(this).find('.input_text input[type="text"]'),f=$(this).find('.new_argument input[type="submit"]'),k;f.click(function(a){if(isEmpty(p.val()))return a.preventDefault(),false;o.spin(n);f.hide();setTimeout(function(){disableElement(p)},150)});$(this).find(".placeholder").smartPlaceholder();$(this).find(".new_argument").bind("ajax:error",
function(){o.stop();k=$("<span class='icon error' />");$(c).find(".footer .input_text").append(k);a("against")});$(this).find(".new_argument").bind("ajax:success",function(e,g){o.stop();if($(g).hasClass("empty"))k=$("<span class='icon success' />"),$(c).find(".footer .input_text").append(k),a("in_favor");else{var n=$(g);n.hide();h.find("ul").append(n);n.fadeIn(d);var s=0;h.find("ul li").each(function(a,b){s+=$(b).outerHeight(true)});s>h.find("ul").outerHeight(true)&&b(s);enableElement(p);f.fadeIn(d);
p.val("")}})})};
jQuery.fn.autocompleteSearch=function(a){function b(){GOD.broadcast("minimize."+e);$(".autocomplete").fadeOut()}var c=a&&a.speed||200,d,e="autocomplete",g=document.getElementById("autocomplete_spinner"),i=new Spinner(SPINNER_OPTIONS);this.each(function(){$(window).bind("minimize.autocomplete",b);$(".autocomplete").click(function(a){a.stopPropagation()});$(this).bind("ajax:error",function(){i.stop();$("#search_submit").show()});$(this).bind("ajax:success",function(a,b){var c=$(this).find(".autocomplete");c.addClass("visible");
c.find("div.inner").html(b);$(b).length==0?(c.addClass("no_result"),c.css("margin-left",0),c.css("margin-top","13px")):(c.removeClass("no_result"),c.css("margin-left","-128px"),c.css("margin-top","23px"));i.stop();$("#search_submit").show();c.fadeIn("fast");GOD.subscribe("minimize."+e)});$(this).click(function(){$(this).find('input[type="text"]').keyup(function(a){clearTimeout(d);$(this).val().length>2?a.keyCode==13?window.location="/search?"+$(this).closest("form").serialize():(i.stop(),d=setTimeout(function(){i.spin(g);
$("#search_submit").hide();$("nav form").submit()},c)):$(this).closest("form").find(".autocomplete").fadeOut("fast")})})})};jQuery.fn.enableGotoComments=function(a){var b=a&&a.speed||200;this.each(function(){$(this).click(function(a){a.preventDefault();$("html, body").animate({scrollTop:$("div.comments").offset().top},b)})})};
jQuery.fn.enablePagination=function(a){function b(){$.ajax({url:h,method:"GET",data:{next_month:j++},success:function(a){IrekiaSpinner.stop();var b=p.find(".agenda_map ul.agenda"),f=b.parent().height(),c=$($(a).html());c.hide();b.append(c);a=Math.floor($(a).find("li").length/7)*i+f;b.parent().animate({height:a+8},500);filterArea!=0&&(c.find("li").hide(),c.find("li.area_"+filterArea).show());c.slideDown(e);b.find(".show_event").infoEventPopover()}})}function c(){var a=document.getElementById(d.attr("id")).className.replace(/ /g,
"_");filterUrl[a]!=""&&(h=filterUrl[a]);filterSort[a]!=""&&(n=filterSort[a]);a={page:++j};a=$.extend({},a,n);$.ajax({url:h,method:"GET",data:a,success:function(a){IrekiaSpinner.stop();try{var b=$($(a).html());b.hide();var f=p.find(".listing_"+g+"_"+o+" > ul");!f.find("span.empty").length>0&&!d.find("span.empty").length>0&&!b.hasClass("empty")&&(f.append(b),b.slideDown(250))}catch(c){}}})}var d,e=a&&a.speed||200,g=a&&a.name||"proposals",i=a&&a.cellHeight||132,j=1,h,n,o,p,f;this.each(function(){$(this).click(function(a){a.preventDefault();
d=$(this).parents(".article");h=$(this).attr("href");g!="months"&&(o=$(this).attr("id").replace(g+"_",""));p=$(this).parents(".article");f=document.getElementById(g+"_spinner");IrekiaSpinner.spin(f);g=="months"?b():c()})})};
jQuery.fn.enableTargetEditing=function(a){this.each(function(){function b(a){c();i(a)}function c(){spinner.stop();$(".autosuggest.small").length>0&&$(".autosuggest.small").fadeOut(speed,function(){$(this).remove()})}function d(){c();h.find(".add_target").fadeOut(speed,function(){h.find(".content").fadeIn(fadeInSpeed);h.find(".holder").fadeIn(fadeInSpeed);h.find(".add_target").find("input").val("");h.find(".add_target").removeClass("open")})}function e(a){var b=$addInputField.position().left+72,f=
$addInputField.position().top+$addInputField.outerHeight(true)+15;a.css({left:b+"px",top:f+"px"})}function g(a){var b=a.find("ul").height();b<160?a.find(".popover").height(b):(a.find(".scroll-pane").jScrollPane(),a.find(".jspDrag").bind("click",function(a){a.stopPropagation()}))}function i(a){var b=$(a);b.find("ul li").length>0?(b.addClass("small"),b.hide(),h.after(b),e(b),h.find(".add_target").hasClass("open")&&b.fadeIn(speed,function(){spinner.stop();g(b);b.find("li").click(function(a){a.preventDefault();
a.stopPropagation();c();a=$(this).attr("data-content");$(this).attr("data-type")=="area"?(h.find("#editable_target_area_id").val($(this).attr("data-id")),h.find("#editable_target_user_id").val()):$(this).attr("data-type")=="politician"&&(h.find("#editable_target_area_id").val(),h.find("#editable_target_user_id").val($(this).attr("data-id")));h.find("span.target").html(h.attr("data-addressed-to")+" "+a);h.submit();d()})})):spinner.stop()}function j(){clearTimeout(n);n=setTimeout(function(){$addInput.val().length>
0&&spinner.spin(spin_element);var a={name:$addInput.val()};h.attr("data-search")=="areas"&&(a=$.extend(a,{only_areas:true}));$.ajax({url:serviceURL,data:{search:a},type:"GET",success:b})},500)}var h=$(this),n;h.find(".add_target");$addInput=h.find('.input_field input[type="text"]');$addInputField=h.find(".input_field");serviceURL="/search/politicians_and_areas";speed=a&&a.speed||100;spin_element=document.getElementById("target_spinner");spinner=new Spinner(SPINNER_OPTIONS);fadeInSpeed=a&&a.speed||
10;(function(a){function b(f){f.keyCode!=27&&(a.val().length<=0?c():(!_.any([13,16,17,18,20,27,32,37,38,39,40,91],function(a){return f.keyCode==a})||!(f.keyCode==65&&(f.metaKey||f.ctrlKey)))&&$addInput.val().length>3&&j(f))}a.keyup(b);a.keydown(b)})($addInput);(function(){$addInputField.click(function(a){a.preventDefault();a.stopPropagation()});$addInput.click(function(a){a.preventDefault();a.stopPropagation()});h.find(".content").click(function(a){a.preventDefault();a.stopPropagation();GOD.subscribe("_close.target_popover");
GOD.broadcast("_close.target_popover");$(this).fadeOut(speed,function(){h.find(".add_target").fadeIn(speed,function(){h.find(".add_target").addClass("open");h.find('.add_target input[type="text"]').focus()})})});$(window).bind("_close.target_popover",function(){d()})})()})};
jQuery.fn.enableNotificationSelector=function(){this.each(function(){var a=$(this);$(this).find("li").click(function(b){b.preventDefault();$(this).siblings("li.selected").removeClass("selected");a.find("li input").attr("disabled","disabled");$(this).addClass("selected");$(this).find("input").removeAttr("disabled");a.submit()})})};
jQuery.fn.enableComments=function(a){function b(a,b){a.val().length<=0?disableElement(b):enableElement(b)}var c=a&&a.speed||200;this.each(function(){var a=document.getElementById("comment_spinner"),e=new Spinner(SPINNER_OPTIONS),g=$(this).find("textarea"),i=$(this).find("button");b(g,i);g.keyup(function(){b(g,i)});g.keydown(function(){b(g,i)});$(this).submit(function(b){if(isEmpty(g.val()))return b.preventDefault(),false;e.spin(a)});$(this).bind("ajax:success",function(a,b){var d=$(this).parents("ul").find("li.comment"),
g=$(b);g.hide();d.before(g);e.stop();$(this).find("textarea").val("");$(this).find(".holder").fadeIn(c);g.slideDown(c);disableElement(i)})})};
jQuery.fn.viewCalendar=function(a){this.each(function(){var b=a&&a.speed||150;$(this).click(function(a){a.preventDefault();$(this).parent().hasClass("selected")||($(this).parent().toggleClass("selected"),$(".view_map").parent().toggleClass("selected"),$(".agenda_map .map").animate({opacity:0,height:"200px"},b),$(".agenda_map").animate({height:$(".agenda_map .agenda").height()},b),$(".agenda_map .agenda").fadeIn("fast"))})})};
jQuery.fn.viewMap=function(a){this.each(function(){var b=a&&a.speed||150,c=a&&a.mapHeight||454,d=false;$(this).click(function(a){a.preventDefault();$(this).parent().hasClass("selected")||($(this).parent().toggleClass("selected"),$(".view_calendar").parent().toggleClass("selected"),$(".agenda_map .map, .agenda_map").animate({height:c},b),$(".agenda_map .map").animate({opacity:1},b),$(".agenda_map .agenda").fadeOut("fast"),d||setTimeout(function(){d=true;startMap()},100))})})};
jQuery.fn.enableCommentBox=function(a){var b=a&&a.speed||200;this.each(function(){function a(){i.val("");i.removeAttr("disabled");i.blur();i.find(".holder").fadeIn(b)}function d(a){a.val().length<=0?(j.fadeOut(b),j.attr("disabled","disabled")):(j.removeAttr("disabled"),j.fadeIn(b))}$(this);var e=document.getElementById("spinner_"+$(this).attr("id")),g=new Spinner(SPINNER_OPTIONS),i=$(this).find(":text, textarea"),j=$(this).find('input[type="submit"]');$(this).submit(function(){if(i.val().length<=
0)return false;else g.spin(e),setTimeout(function(){i.attr("disabled","disabled")},10),i.blur(),j.fadeOut(b)});$(this).bind("ajax:error",function(){g.stop();a()});$(this).bind("ajax:success",function(d,e){var i=$(this).siblings("ul"),p=$(e);p.hide();i.append(p);p.slideDown(b);g.stop();a()});j=$(this).find('input[type="submit"]');i.keyup(function(){d(i)});i.keydown(function(){d(i)})})};
jQuery.fn.inputCounter=function(a){var b=a&&a.limit||$(this).attr("data-limit")||140;b==-1&&(b=999999);this.each(function(){function a(c,d,e,g){d=g-d.val().length;d<0||d==b?(d<0&&e.addClass("error"),d==b&&e.removeClass("error"),disableElement($("#submit-"+c))):(e.removeClass("error"),enableElement($("#submit-"+c)));e.html(d)}var d=$(this).attr("id")||$(this).attr("name"),e=$(this).find(".counter"),g=$(this).find(":text, textarea");g.keyup(function(){a(d,g,e,b)});g.keydown(function(){a(d,g,e,b)})})};
jQuery.fn.autogrow=function(){var a=false;this.filter("textarea").each(function(){var b=$(this),c=b.height();b.css("lineHeight");var d=$("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,width:$(this).width()-parseInt(b.css("paddingLeft"))-parseInt(b.css("paddingRight")),fontSize:b.css("fontSize"),fontFamily:b.css("fontFamily"),lineHeight:b.css("lineHeight"),resize:"none"}).appendTo(document.body),b=function(){var b=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,
"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){for(var b="",c=0;c<a.length-1;c++)b+="&nbsp;";return b+" "});d.html(b);a||(a=true,b=Math.max(d.height()+15,c),$(this).animate({height:b},50,function(){a=false}))};$(this).change(b).keyup(b).keydown(b);b.apply(this)});return this};
jQuery.fn.verticalHomeLoop=function(){function a(){if($(b).find("div.left ul li").size()>0&&!c){var a=$(b).find("div.left ul li.loop").last(),d=$(b).find("div.left ul").first(),i=a.height();a.css({opacity:0,height:0}).removeClass("loop");d.prepend(a);a.animate({height:i+"px"},500,function(){$(this).animate({opacity:1},300)});$(b).find("div.left > div.listing > ul > li").not(".loop").last().addClass().animate({height:0,opacity:0},500,function(){$(this).addClass("loop").removeAttr("style")})}}if(!(this.length<
1)){var b=this,c=false,d=null;$(b).find("div.left").hover(function(){c=true},function(){c=false});$(window).blur(function(){clearInterval(d);d=null});$(window).focus(function(){d||(d=setInterval(function(){a()},5E3))});d=setInterval(function(){a()},5E3)}};
jQuery.fn.enableQuestion=function(a){this.each(function(){function b(a){a.css("left","447px");a.css("bottom","80px");a.fadeIn(220)}function c(a){$icon=$("<span class='icon "+a+"' />");j.find(".input-counter").append($icon)}function d(a){j.find('input[type="text"]').val("");j.find(".holder").fadeIn(e);j.find(".counter").html(140);setTimeout(function(){a.fadeOut(e);enableElement(j.find("button"));enableElement(j.find('input[type="text"]'));j.find(".icon").fadeOut(e,function(){$(this).remove()})},2E3)}
var e=a&&a.speed||150,g=document.getElementById("politician_question_spinner"),i=new Spinner(SPINNER_OPTIONS),j=$(this);j.submit(function(){i.spin(g);$(".notice").fadeOut(e);disableElement(j.find("button"))});j.bind("ajax:success",function(a,e,g){i.stop();g="success";a=$("#notice_"+g);c(g);b(a);d(a)});j.bind("ajax:error",function(a,e,g){i.stop();g="error";a=$("#notice_"+g);c(g);b(a);d(a)})})};
jQuery.fn.enableAvatarUpload=function(){this.each(function(){function a(){var a=b.attr("data-t-default");b.find(".explanation .small").html(a);a=b.attr("data-t-button");$("#"+c+" span.title").html(a);b.find(".percentage").fadeOut(250);b.find(".progress").fadeOut(250,function(){$(this).width("0")})}var b=$(this),c=$.browser.msie&&$.browser.version.substr(0,1)<9?"ie_avatar_uploader_button":"avatar_uploader_button",d=document.getElementById(c),e={utf8:$("#"+c).closest("form").find("input[name=utf8]").val(),
authenticity_token:$("#"+c).closest("form").find("input[name=authenticity_token]").val()},g=['<span class="qq-uploader"> <span class="qq-upload-drop-area"></span> <span class="qq-upload-button"><span class="progress"></span>','<span class="title">'+$("#"+c+" span").html()+"</span>",'<span class="percentage"></span></span> <span class="qq-upload-list"></span> </span>'].join(" "),i=$("#"+c).attr("data-url");setupUploader({element:d,action:i,params:e,debug:false,template:g,onSubmit:function(){var a=
$("#"+c+" .qq-upload-button").outerWidth(true);$("#"+c+" .qq-upload-button").css("width",a);b.find(".percentage").fadeIn(250);b.find(".progress").fadeIn(250);a=b.attr("data-t-uploading");b.find(".explanation .small").html(a);$("#"+c+" span.title").html("")},onProgress:function(a,c,d,e){a=parseFloat(d)/parseFloat(e)*100;b.find(".percentage").html(parseInt(a,10)+"%");b.find(".percentage").css("left",parseInt(a,10));b.find(".progress").css("width",parseInt(a,10)+"%")},onComplete:function(b,c,d){var e=
document.createElement("img");e.src="/uploads/tmp/"+d.image_cache_name;$(".image_cache_name").val(d.image_cache_name);$(e).bind("load",function(){$(".avatar_uploader_form").submit();a();var b=$(e).attr("src");$(".avatar_box img").attr("src",b)})},onCancel:function(){a()}})})};var LockScreen=function(){function a(a){$("#lock_screen").length!=0&&$("#lock_screen").fadeOut(150,function(){$(this).remove();a&&a()})}function b(a){$("#lock_screen").length==0&&($("body").append("<div id='lock_screen'></div>"),$("#lock_screen").height($(document).height()),c||($("#lock_screen").unbind(),$("#lock_screen").click(function(a){a.preventDefault();a.stopPropagation()})),$("#lock_screen").fadeIn(150,function(){a&&a()}))}var c=true;return{toggle:function(c){$("#lock_screen").length?a(c):
b(c)},show:b,showIfHidden:function(a){$("#lock_screen").length?a&&a():b(a)},hide:a}}(),GOD=function(){function a(a){g&&console.log("Unsubscribe ->",a);delete e[a]}function b(b){g&&console.log("Signal to ",b);$(window).trigger(b);a(b)}function c(){_.isEmpty(e)||_.each(e,b)}function d(){$(document).keyup(function(a){a.stopPropagation();a.keyCode==27&&c()})}var e={},g=false;$(function(){d();$("html").click(c)});return{subscribe:function(a){g&&console.log("Subscribe ->",a);e[a]=a},unsubscribe:a,broadcast:function(a){_.each(e,
function(c){a!=c&&b(c)})},bindEsc:d,unbindEsc:function(){$(document).unbind("keyup")}}}();
(function(a,b,c){function d(b){b.preventDefault();b.stopPropagation();var b=a(this),c=b.data(i),d=c.$ps,f=b.data(i),k=a("#info-"+f.id),g=f.$this,f=g.position().left-k.width()/2+g.width()/2-10,g=g.position().top-k.height()-38;k.css("left",f);k.css("top",g);k="_close."+c.id;GOD.subscribe(k);GOD.broadcast(k);d.hasClass("open")?e(b):(d.addClass("open"),d.fadeIn(c.settings.transitionSpeed),a(".scroll-pane").jScrollPane())}function e(a){a=a.data(i);a.$ps.removeClass("open");a.$ps.fadeOut(a.settings.transitionSpeed)}
var g=false;a.browser.msie&&a.browser.version.substr(0,1)<7?g=true:c.documentElement.className+=" ps_fouc";var i="event-popover",j={},h={transitionSpeed:250};j.init=function(c){c=a.extend({},h,c);return this.each(function(){var g=a(this),h=g.data(i)||{},f=g.attr("id")||g.attr("name");c.width||g.outerWidth();if(h.id)return g;else h.id=f,h.$this=g,h.settings=c;g.before(false);f=a("#info-"+h.id);f.find("a").bind("click",function(){b.location=a(this).attr("href")});f.bind("click",function(a){a.stopPropagation()});
a(this).click(d);f.find("span.close").click(function(){e(g)});a(b).bind("_close."+h.id,function(){e(g)});h.$ps=f;g.data(i,h);f.data(i,h)})};a.fn.infoEventPopover=function(a){if(!g)if(j[a])return j[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return j.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);
(function(a,b,c){function d(b,f,c,d){var e;(function(b){b.animate({opacity:0,top:"20px"},c,d,function(){a(this).remove()})})(b.parents("li").find(".share.email .ok"),c,d);e=b.parents("li").find("form");e.unbind();e.find(".input_field").removeClass("error");e.bind("ajax:success",function(){o.stop();e.parent().fadeOut("fast",function(){$ps.removeClass("open");e.find(".submit").fadeIn(c);e.find('input[type="text"]').val("");e.find(".holder").fadeIn(c)});$ok=a('<div class="ok" />');b.parents("li").find(".share.email").append($ok);
$ok.animate({opacity:1,top:"-2px"},c,d);return true});e.bind("ajax:error",function(){o.stop();e.find(".input_field").addClass("error");e.find(".submit").fadeIn(c)})}function e(b){b.$ps.find(".ok").animate({opacity:0,top:"20px"},b.settings.transitionSpeed,b.settings.easingMethod,function(){a(this).remove()})}function g(b){b.preventDefault();b.stopPropagation();var b=a(this),f=b.data(h),c=f.$ps,d=c.next(".sharebox");if(!d.hasClass("email")){var g=d.find("li").length;d.width(g*35)}d="_close."+f.id;GOD.subscribe(d);
GOD.broadcast(d);c.hasClass("open")?i(b):(c.addClass("open"),c.next(".sharebox").fadeIn(f.settings.transitionSpeed),e(f))}function i(a){a=a.data(h);a.$ps.removeClass("open");a.$ps.next(".sharebox").fadeOut(a.settings.transitionSpeed)}var j=false;a.browser.msie&&a.browser.version.substr(0,1)<7?j=true:c.documentElement.className+=" ps_fouc";var h="share-popover",n={},o,p,f={transitionSpeed:120,easing:"easeInExpo"};n.init=function(c){c=a.extend({},f,c);return this.each(function(){var f=a(this),l=f.data(h)||
{},n=f.attr("class").fulltrim().replace(/ /g,"_");width=c.width||f.outerWidth();$ps=false;if(l.id)return f;else l.id=n,l.$handler=f,l.settings=c,l.$submit=a(this).next(".sharebox.email").find("a.share.submit"),l.$form=a(this).next(".sharebox.email").find("form"),l.$input=a(this).next(".sharebox.email").find('input[type="text"]');$ps=a(this);l.$submit.unbind("click");l.$submit.click(function(b){b.stopPropagation();b.preventDefault();l.$form.submit();isEmpty(l.$input.val())?l.$input.parent().addClass("error"):
(o.spin(p),e(l),a(this).fadeOut(l.settings.transitionSpeed),d(a(this),"email",l.settings.transitionSpeed,l.settings.easing))});$ps.next(".sharebox .share.twitter").bind("click",function(a){a.stopPropagation();a.preventDefault();b.open(this.href,"twitter","status=1,width=611,height=400,top=44,left=21");return false});$ps.next(".sharebox").bind("click",function(a){a.stopPropagation()});a(this).click(g);a(b).bind("_close."+l.id,function(){i(f)});l.$ps=$ps;f.data(h,l);$ps.data(h,l)})};a(function(){a(this).parents("li").find(".share.email");
p=c.getElementById("share_via_email");o=new Spinner({lines:12,length:0,width:3,radius:6,color:"#333",speed:1,trail:100,shadow:false})});a.fn.sharePopover=function(a){if(!j)if(n[a])return n[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return n.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);
(function(a,b,c){var d=a.browser.msie&&a.browser.version.substr(0,1)<9,e={},g={transitionSpeed:250};e.init=function(b){b=a.extend({},g,b);return this.each(function(){var e=a(this),g=e.attr("id"),n=e.data("filter-widget_"+g)||{};if(n.id)return e;else n.id=g,n.$this=e,n.settings=b,n.filter="",n.url="",n.sort={};var o=a(this);if(a(this).find("div.right ul.selector").length>0)var p=new Spinner({lines:12,length:0,width:3,radius:6,color:"white",speed:1,trail:100,shadow:false}),f=new Spinner(SPINNER_OPTIONS);
a(this).find(".filter").unbind("click");a(this).find(".filter").bind("click",function(b){b.preventDefault();p.stop();f.stop();if(a(this).closest("ul.switch").length==0){p.spin();var b=a(this).position().top,g=3;d&&(g=10);a(p.el).css({top:b+8+"px",position:"absolute",right:g+"px",height:"15px",width:"15px","z-index":"1000"});a(this).closest("div.right").append(p.el)}else f.spin(),a(this).position(),a(f.el).css({top:"16px",position:"absolute",left:"5px",height:"15px",width:"15px","z-index":"1000"}),
a(this).closest("div.right").append(f.el);b=a(this).attr("class");if(a(this).hasClass("more_polemic")||a(this).hasClass("more_recent"))n.filter=b.replace("filter ","");if(n.filter=="more_recent")n.sort={more_recent:true};else if(n.filter=="more_polemic")n.sort={more_polemic:true};a(this).parents("ul").find("li").removeClass("selected");a(this).parent().addClass("selected");n.url=o.find("ul.selector li.selected a").attr("href");var l=n.settings,b=c.getElementById(e.attr("id")).className.replace(/ /g,
"_");filterUrl[b]=n.url;filterSort[b]=n.sort;a.ajax({url:n.url,data:n.sort,type:"GET",success:function(a){o.find(".listing").fadeOut(l.transitionSpeed,function(){o.find(".listing").html(a);if(o.find(".listing h2").length>0){var b=o.find("header div.left");b.find("h2").remove();b.append(o.find(".listing h2"))}o.find(".listing").slideDown(l.transitionSpeed,function(){p.stop();f.stop()});o.find(".placeholder").smartPlaceholder();o.find(".comment-box form").enableCommentBox()})}})});e.data("filter-widget",
n)})};a.fn.enableFiltering=function(a){if(e[a])return e[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return e.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);
(function(a,b,c){function d(b){b&&(b.preventDefault(),b.stopPropagation());var b=a(this).data(h),f=b.$ps;f.hasClass("open")?i(b):(f.addClass("open"),e(b),GOD.subscribe(b.event),GOD.broadcast(b.event))}function e(a){var b=a.$ps;g(b,a);b.find(".scroll-pane").jScrollPane();b.find(".jspDrag").bind("click",function(a){a.stopPropagation()})}function g(a,b){var c=a.height()+27,d=a.outerWidth()/2-a.find(".popover").outerWidth()/2-1;a.find(".popover").css({top:c+"px",left:d+"px"});a.find(".popover").fadeIn(b.settings.transitionSpeed,
b.settings.easingMethod)}function i(a){var b=a.$ps;b.removeClass("open");b.find(".popover").fadeOut(a.settings.transitionSpeed,a.settings.easingMethod)}var j=false;a.browser.msie&&a.browser.version.substr(0,1)<7?j=true:c.documentElement.className+=" ps_fouc";var h="areas_selector",n={},o={easingMethod:"easeInOutQuad",transitionSpeed:200,maxLimit:140};n.init=function(c){c=a.extend({},o,c);return this.each(function(){var f=a(this),k=f.data(h)||{},e=f.attr("id")||f.attr("name");c.width||f.outerWidth();
var g=false;if(k.id)return f;else k.id=e,k.$this=f,k.settings=c,k.name=h,k.event="_close."+h;g=a("."+h);a(this).click(d);a(this).find("ul li a").bind("click",function(){b.location=a(this).attr("href")});k.$ps=g;f.data(h,k);g.data(h,k);a(b).bind(k.event,function(){i(k)})})};a.fn.areasPopover=function(a){if(!j)if(n[a])return n[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return n.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);
(function(a,b,c){function d(b){b&&(b.preventDefault(),b.stopPropagation());b=a(this).data(n);b.$ps.hasClass("open")?i(b):(a(".notification_selector").addClass("open"),b.$handle.html(0),b.$handle.addClass("empty_count"),b.$handle.removeClass("count"),j(b),e(b),GOD.subscribe(b.event),GOD.broadcast(b.event))}function e(b){var c=b.$ps,d=a(".notification_selector ul").height();d<230&&a(".notification_selector .popover").height(d);g(c,b);c.find(".scroll-pane").jScrollPane();c.find("li.submit form").submit();
c.find(".jspDrag").bind("click",function(a){a.stopPropagation()})}function g(b,c){var d=c.$this.offset().top+32,e=c.$this.offset().left-c.$ps.width()/2-14;a(".notification_selector").css({top:d+"px",left:e+"px"});a(".notification_selector").find(".popover").fadeIn(c.settings.transitionSpeed,c.settings.easingMethod)}function i(b){a(".notification_selector").removeClass("open");a(".notification_selector").find(".popover").fadeOut(b.settings.transitionSpeed,b.settings.easingMethod)}function j(a){a.$ps.unbind("click");
a.$ps.bind("click",function(a){a.stopPropagation()})}var h=false;a.browser.msie&&a.browser.version.substr(0,1)<7?h=true:c.documentElement.className+=" ps_fouc";var n="notification_selector",o={},p={easingMethod:"easeInOutQuad",transitionSpeed:200,maxLimit:140};o.init=function(c){c=a.extend({},p,c);return this.each(function(){var k=a(this),e=k.data(n)||{},g=k.attr("id")||k.attr("name");c.width||k.outerWidth();var h=false;if(e.id)return k;else e.id=g,e.$handle=k,e.settings=c,e.name=n,e.event="_close."+
n;h=a(".notification_selector");a(this).click(d);a(this).find("ul li a").bind("click",function(){b.location=a(this).attr("href")});e.$ps=h;e.$this=k;k.data(n,e);h.data(n,e);a(b).bind(e.event,function(){i(e)})})};a.fn.notificationPopover=function(a){if(!h)if(o[a])return o[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return o.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);
(function(a,b,c){function d(a){a&&(a.preventDefault(),a.stopPropagation());var a=n.data(h),b=a.$ps;b.hasClass("open")?i(a):(b.addClass("open"),e(a),GOD.subscribe(a.event),GOD.broadcast(a.event))}function e(a){var b=a.$ps,c=b.find("ul").height();c<230&&b.find(".popover").height(c);g(b,a);b.find(".scroll-pane").jScrollPane();b.find(".jspDrag").bind("click",function(a){a.stopPropagation()})}function g(a,b){var c=b.$this.find(".add_area").position().top+25,d=b.$this.find(".add_area").position().left-
45;a.css({top:c+"px",left:d+"px"});a.fadeIn(b.settings.transitionSpeed,b.settings.easingMethod)}function i(a){var b=a.$ps;b.removeClass("open");b.find(".popover").fadeOut(a.settings.transitionSpeed,a.settings.easingMethod)}var j=false;a.browser.msie&&a.browser.version.substr(0,1)<7?j=true:c.documentElement.className+=" ps_fouc";var h="areas_editable_selector",n,o={},p={easingMethod:"easeInOutQuad",transitionSpeed:200,maxLimit:140};o.init=function(c){c=a.extend({},p,c);return this.each(function(){var k=
a(this),e=k.data(h)||{},g=k.attr("id")||k.attr("name");c.width||k.outerWidth();var p=false;if(e.id)return k;else e.id=g,e.$this=k,e.settings=c,e.name=h,e.event="_close."+h;n=a(this);p=a("."+h);a(this).find(".add_area a").click(d);n.find("li form.remove").live("submit",function(){a(this).parent().fadeOut(250)});n.find("li input.remove").live("click",function(){var b=a(this).parents("li").attr("data-id");p.find("li[data-id='"+b+"']").removeClass("selected")});p.find("li form").bind("submit",function(){a(this).parent().addClass("selected")});
p.find("li form").bind("ajax:success",function(b,c){var f=a(c);f.hide();n.find(".add_area").before(f);f.fadeIn(250)});e.$ps=p;k.data(h,e);p.data(h,e);a(b).bind(e.event,function(){i(e)})})};a.fn.enableAreaEditing=function(a){if(!j)if(o[a])return o[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return o.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);
(function(a,b,c){function d(c){c&&(c.preventDefault(),c.stopPropagation());var f=p.data(k);i("editable_map",{lat:miniLat,lng:miniLng});LockScreen.show(function(){if(f.$ps.length){var c=p.data(k);g("Continuar",true,"continue");GOD.subscribe(c.event);var c=p.data(k),d=(a(b).height()-c.$ps.height())/2+a(b).scrollTop(),e=(a(b).width()-c.$ps.width())/2;c.$ps.css({top:d+100+"px",left:e+"px"});c.$ps.animate({opacity:1,top:d},{duration:c.settings.transitionSpeed,specialEasing:{top:c.settings.easingMethod}})}})}
function e(a,b){a.find("span").text(b)}function g(b,c,f){var d=p.data(k);e(d.$submit,b);c&&d.$submit.addClass("disabled");d.$submit.unbind("click");d.$submit.click(function(b){b.preventDefault();!a(this).hasClass("disabled")&&f&&(p.data(k),b=new google.maps.LatLng(a("#event_location_latitude").val(),a("#event_location_longitude").val()),editMiniMap(b),a("ul.location div.footer span.where").text(a("#event_location_text").val()),a("#event_location").submit(),j(true))})}function i(b,c){var f=p.data(k),
d=c&&c.maxZoom||16,e=c&&c.zoom||12,g=new google.maps.LatLng(c.lat,c.lng),d={maxZoom:d,zoom:e,center:g,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:false,navigationControl:false,disableDefaultUI:false,streetViewControl:false,mapTypeControl:false,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}},e=f.$ps.find(".input_field input"),h=e.addresspicker({elements:{map:"#"+b},mapOptions:d,defaultAddress:a("#event_location_text").val()||""});e.bind("autocompleteselect reversegeocode",
function(b,c){b.stopPropagation();b.preventDefault();var d=h.addresspicker("marker").getPosition(),k="",k=c?c.item.formatted_address:f.$ps.find(".input_field input").val();a("#event_location_text").val(k);a("#event_location_latitude").val(d.lat());a("#event_location_longitude").val(d.lng());f.$submit.removeClass("disabled")})}function j(b,c){var f=p.data(k);f.$ps.animate({opacity:0,top:f.$ps.position().top-100},{duration:f.settings.closeTransitionSpeed,specialEasing:{top:f.settings.easingMethod},
complete:function(){a(this).css("top","-900px");b&&LockScreen.hide();c&&c()}})}function h(){var a=p.data(k);a.$ps.find(".close").unbind("click");a.$ps.find(".close").bind("click",function(a){a.stopPropagation();a.preventDefault();j(true)})}function n(){var a=p.data(k);a.$ps.unbind("click");a.$ps.bind("click",function(a){a.stopPropagation()})}var o=false;a.browser.msie&&a.browser.version.substr(0,1)<7?o=true:c.documentElement.className+=" ps_fouc";var p;c.getElementById("publish_spinner");var f=new Spinner(SPINNER_OPTIONS),
k="event-popover",q={},l={easingMethod:"easeInOutQuad",sectionWidth:687,transitionSpeed:200,closeTransitionSpeed:100,maxLimit:140};q.init=function(c){c=a.extend({},l,c);return this.each(function(){var e=a(this),l=e.data(k)||{};e.attr("id")||e.attr("name");c.width||e.outerWidth();var q=false;if(l.id)return e;else l.id=k,l.$this=e,l.settings=c,l.name=k,l.event="_close."+k,l.spinner=f;p=a(this);q=a("#"+l.id);l.$ps=q;e.data(k,l);q.data(k,l);l.$submit=q.find(".bfooter .publish");a(this).click(d);a(b).unbind();
a(b).bind(l.event,function(){j(true)});h();n();g("Continuar",true,"continue")})};a.fn.enableLocationEditing=function(a){if(!o)if(q[a])return q[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return q.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);
(function(a,b,c){function d(b,c,f,d,e){var g;(function(b){b.animate({opacity:0,top:"20px"},f,d,function(){a(this).remove()})})(b.parents("li").find(".share.email .ok"),f,d);g=b.find("form");g.unbind();g.find(".input_field").removeClass("error");g.bind("ajax:success",function(){o.stop();g.parent().fadeOut("fast",function(){g.find('input[type="submit"]').fadeIn(f);g.find('input[type="text"]').val("");g.find(".holder").fadeIn(f);e&&e()});$ok=a('<div class="ok" />');b.parents("li").find(".share.email").append($ok);
$ok.animate({opacity:1,top:"-2px"},f,d);return true});g.bind("ajax:error",function(){o.stop();g.find(".input_field").addClass("error");g.find('input[type="submit"]').fadeIn(f);return true})}function e(b){b.$ps.find(".ok").animate({opacity:0,top:"20px"},b.settings.transitionSpeed,b.settings.easingMethod,function(){a(this).remove()})}function g(b){b&&(b.preventDefault(),b.stopPropagation());var b=a(this),c=b.data(h),f=c.$ps,d=f.next(".sharebox");if(!d.hasClass("email")){var g=d.find("li").length;d.width(g*
35)}f.hasClass("open")?j(b):(f.addClass("open"),c.$sharebox.css({left:c.$this.position().left-3,top:c.$this.position().top-c.$sharebox.outerHeight(true)-15}),c.$sharebox.fadeIn(c.settings.transitionSpeed),e(c),b="_close."+c.id,GOD.subscribe(b),GOD.broadcast(b))}function e(b){b.$ps.parent().find(".ok").animate({opacity:0,top:"20px"},b.settings.transitionSpeed,b.settings.easing,function(){a(this).remove()})}function i(a){var a=a.data(h),b=a.$ps.parent().find(".sharebox.email"),c="_close."+a.id;GOD.subscribe(c+
"_email");GOD.broadcast(c+"_email");b.click(function(a){a.stopPropagation()});e(a);b.css({left:a.$this.offset().left-82-b.width()/2+a.$this.width()/2,top:a.$this.position().top-b.outerHeight(true)-15});b.fadeIn(a.settings.transitionSpeed)}function j(a){a=a.data(h);a.$ps.removeClass("open");a.$sharebox.fadeOut(a.settings.transitionSpeed)}var h="share-popover",n={},o,p,f={transitionSpeed:120,easing:"easeInExpo"};n.init=function(c){c=a.extend({},f,c);return this.each(function(){var f=a(this),l=f.data(h)||
{},n=f.attr("id");c.width||f.outerWidth();var s=false;if(l.id)return f;else l.id=n,l.$this=f,l.settings=c,l.$sharebox=a(this).next(".sharebox"),l.$submit=a(this).parent().find(".sharebox.email").find('input[type="submit"]'),l.$input=a(this).parent().find(".sharebox.email").find('input[type="text"]');s=a(this);l.$submit.unbind("click");l.$submit.click(function(b){b.stopPropagation();isEmpty(l.$input.val())?l.$input.parent().addClass("error"):(o.spin(p),a(this).fadeOut(l.settings.transitionSpeed),d(f.parent().find(".sharebox.email"),
"email",l.settings.transitionSpeed,l.settings.easing,function(){l.$ps.addClass("open");l.$sharebox.css({left:l.$this.position().left-3,top:l.$this.position().top-l.$sharebox.outerHeight(true)-15});l.$sharebox.fadeIn(l.settings.transitionSpeed);var a="_close."+l.id;GOD.subscribe(a);GOD.broadcast(a)}))});l.$sharebox.find(".share.email").bind("click",function(a){a.stopPropagation();a.preventDefault();j(f);i(f);e(l)});l.$sharebox.find(".share.facebook").bind("click",function(a){a.stopPropagation();j(f)});
l.$sharebox.find(".share.twitter").bind("click",function(a){a.stopPropagation();b.open(this.href,"twitter","status=1,width=611,height=400,top=44,left=21");j(f);return false});l.$sharebox.bind("click",function(a){a.stopPropagation()});f.click(g);a(b).bind("_close."+l.id+"_email",function(){var a=f.data(h);a.$ps.parent().find(".sharebox.email").fadeOut(a.settings.transitionSpeed)});a(b).bind("_close."+l.id,function(){j(f)});l.$ps=s;f.data(h,l);s.data(h,l)})};a(function(){a(this).parents("li").find(".share.email");
p=c.getElementById("share_via_email");o=new Spinner({lines:12,length:0,width:3,radius:6,color:"#333",speed:1,trail:100,shadow:false})});a.fn.inlineSharePopover=function(a){if(n[a])return n[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return n.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);(function(a,b,c){function d(b){b&&(b.preventDefault(),b.stopPropagation());var c=a(this).data(h),d=c.$ps;LockScreen.show(function(){if(d.length){var a=c.$ps;i(c);j(c);GOD.subscribe(c.event);e(a,c)}})}function e(c,f){var d=(a(b).height()-c.height())/2+a(b).scrollTop(),e=(a(b).width()-c.width())/2;c.css({top:d+100+"px",left:e+"px"});c.animate({opacity:1,top:d},{duration:f.settings.transitionSpeed,specialEasing:{top:f.settings.easingMethod},complete:function(){}})}function g(b,c,d){b.$ps.animate({opacity:0,
top:b.$ps.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},complete:function(){a(this).css("top","-900px");c&&LockScreen.hide();d&&d()}})}function i(a){a.$ps.find(".close").unbind("click");a.$ps.find(".close").bind("click",function(b){b.stopPropagation();b.preventDefault();g(a,true)})}function j(a){a.$ps.unbind("click");a.$ps.bind("click",function(a){a.stopPropagation()})}c.getElementById("remove_account_spinner");new Spinner(SPINNER_OPTIONS);var h=
"remove-account-popover",n={},o={easingMethod:"easeInOutQuad",transitionSpeed:200,maxLimit:140};n.init=function(c){c=a.extend({},o,c);return this.each(function(){var f=a(this),e=f.data(h)||{},q=f.attr("id")||f.attr("name");c.width||f.outerWidth();var l=false;if(e.id)return f;else e.id=q,e.$this=f,e.settings=c,e.name=h,e.event="_close."+h+"_"+q;l=a("#"+q+"_popover");a(this).click(d);a(b).bind(e.event,function(){g(e,true)});e.$ps=l;f.data(h,e);l.data(h,e)})};a.fn.removeAccountPopover=function(a){if(n[a])return n[a].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return n.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);(function(a,b,c){function d(b){b&&(b.preventDefault(),b.stopPropagation());var c=a(this).data(T),d=a("#"+c.id);LockScreen.show(function(){if(!d.length){var a=c.$ps;N(c);H(c);O(c);J(c,c.translations.publish,true,"publish");f(c);p(c);J(c,c.translations.publish,true,"publish");c.$ps.find("input,:text,textarea").attr("tabindex","-1");w=a.find(".container .section:nth(0)");P=a.find(".menu").find("li:eq("+c.sectionID+")");w=a.find(".container .section:eq("+c.sectionID+")");K(c);m(c);n(c,P);GOD.subscribe(c.event);
ia(c);a.find(".input-counter").inputCounter({limit:c.settings.maxLimit})}})}function e(b,c,f){b.keyup(function(){a(this).val().length<=0?f&&f():c&&c()});b.keydown(function(){a(this).val().length<=0?f&&f():c&&c()})}function g(a,b){b.find(":text, textarea").val("");b.find(".holder").fadeIn(a.settings.transitionSpeed)}function i(a){return w.hasClass("video")?a.find("input").val():w.hasClass("photo")?true:!isEmpty(a.find(":text, textarea").val())}function j(a){a.removeClass("disabled");a.removeAttr("disabled")}
function h(a){a.addClass("disabled");a.attr("disabled","disabled")}function n(a,b){a.$ps.find(".menu").find("li.selected").removeClass("selected");b.addClass("selected")}function o(b,c){b.preventDefault();var f=c.$ps.find(".image_container");f.fadeOut(c.settings.transitionSpeed,function(){c.$ps.find(".uploader").fadeIn(c.transitionSpeed,function(){f.find(".holder").fadeIn(c.transitionSpeed)});f.find("img").fadeOut(c.transitionSpeed,function(){a(this).remove()});c.$ps.find(".loading").hide();c.$ps.find(".percentage").hide();
c.$ps.find(".progress").css("width","0");l(c,w,function(){Y(c)})})}function p(a){e(a.$ps.find("#status_message_status_message_data_attributes_message"),function(){j(a.$submit)},function(){h(a.$submit)});e(a.$ps.find("#proposal_proposal_data_attributes_title"),function(){j(a.$submit)},function(){h(a.$submit)});e(a.$ps.find(".autosuggest_field input"),null,function(){v(a)});e(a.$ps.find(".section.video .input_field.vimeo input"),function(){j(a.$submit)},function(){h(a.$submit)});e(a.$ps.find(".section.video .input_field.youtube input"),
function(){j(a.$submit)},function(){h(a.$submit)});e(a.$ps.find(".section.photo .input_field input"),function(){j(a.$submit)},function(){h(a.$submit)})}function f(b){var c=b.$ps;F(b,"proposal","upload_proposal_image");F(b,"photo","upload_photo",function(){j(b.$submit)});c.find(".image_container a.remove").unbind();c.find(".image_container a.remove").bind("click",function(a){o(a,b)});c.find(".section .open_upload").click(function(b){b&&b.preventDefault();a(this).closest("input[type='file']").click()});
c.find(".section.video li").click(k);c.find("a.radio").click(q)}function k(b){b&&b.preventDefault();b=G.data(T);b.$ps.find("li.selected input").val("");a(this).siblings("li").removeClass("selected");a(this).addClass("selected");b.$ps.find(".radio.selected").removeClass("selected");a(this).find(".radio").addClass("selected")}function q(a){a&&a.preventDefault();G.data(T).$ps.find(".section.video li").toggleClass("selected")}function l(a,b,c){var f=a.$ps;height=b.find(".form").outerHeight(true);f.find(".container").animate({scrollTop:0,
height:height},a.settings.transitionSpeed,function(){c&&c()})}function z(a){w.find(".extra").fadeOut(a)}function s(a){w.find(".extra").fadeIn(a)}function v(b){b.$ps.find(".autosuggest").fadeOut(100,function(){a(this).remove()})}function t(a,b){var b=b.replace("item_",""),c=a=="user"?"area":"user",f=B();w.find("#"+f+"_"+f+"_data_attributes_"+a+"_id").val(b);w.find("#"+f+"_"+f+"_data_attributes_"+c+"_id").val("")}function m(b){var c=b.$ps;w.find(".autosuggest_field input").keyup(function(f){_.any([13,
16,17,18,20,27,32,37,38,39,40,91],function(a){return f.keyCode==a})||(clearTimeout(U),a(this).val().length>3&&(U=setTimeout(function(){var f=w.find('.extra .autosuggest_field input[type="text"]').val();b.spinner.spin(M);f={name:f};B()=="proposal"&&(f=a.extend(f,{only_areas:true}));a.ajax({url:"/search/politicians_and_areas",data:{search:f},type:"GET",success:function(f){f=a(f);b.spinner.stop();f.find("li").unbind();f.find("li").bind("click",function(){var c=a(this).attr("id"),f=a(this).find(".name").html();
w.find('.autosuggest_field input[type="text"]').val(f);a(this).hasClass("user")?t("user",c):t("area",c);J(b,b.translations.publish,true,"publish");v(b);j(b.$submit)});w.find(".autosuggest").fadeOut(150,function(){a(this).remove()});f.find("li").length>0&&(f.hide(),f.css("top",w.find(".autosuggest_field").position().top+220),v(b),c.find(".content").append(f),f.fadeIn(150))}})},500)))})}function u(b){if(b.proposalStep==0)b.proposalStep++,s(b.settings.transitionSpeed),l(b,w,function(){Y(b)}),h(b.$submit),
I(b.$submit,b.translations.publish);else{var c=w.find("form");c.submit();b.spinner.spin(M);c.unbind();c.bind("ajax:success",function(c,f){var d=a(f);b.spinner.stop();d.hide();w.append(d);b.$ps.find(".extra").hide();b.$ps.find(".holder").show();b.$ps.find(":text, textarea").val("");ca(b,"success")})}}function D(a){var b=w.find("form");b.submit();a.spinner.spin(M);b.unbind();b.bind("ajax:success",function(c,f){y(a,b,f)})}function x(b){var c=w.find("form");c.submit();b.spinner.spin(M);c.unbind();c.bind("ajax:success",
function(a,f){y(b,c,f)});c.bind("ajax:error",function(c,f){a(f);b.spinner.stop();b.$ps.find(".section.video li .error").html("");b.$ps.find(".section.video li.selected .error").html(f.responseText);b.$ps.find(".section.video li.selected .error").fadeIn(b.settings.transitionSpeed)})}function A(a){var b=w.find("form");b.submit();a.spinner.spin(M);b.unbind();b.bind("ajax:success",function(c,f){y(a,b,f)})}function C(a){var b=w.find("form");b.submit();a.spinner.spin(M);b.unbind();b.bind("ajax:success",
function(c,f){y(a,b,f)})}function y(b,c,f){f=a(f);b.$ps.find(".section.video li .error").fadeOut(b.settings.transitionSpeed);b.spinner.stop();f.hide();c.after(f);b.$ps.find(".extra").hide();b.$ps.find(".holder").show();b.$ps.find(":text, textarea").val("");ca(b,"success")}function B(){if(w.hasClass("dashboard"))return"dashboard";if(w.hasClass("question"))return"question";if(w.hasClass("proposal"))return"proposal";if(w.hasClass("video"))return"video";if(w.hasClass("photo"))return"photo"}function I(a,
b){a.find("span").text(b)}function E(a){return a.attr("class").replace(/section/g,"").fulltrim()}function J(a,b,c,f){I(a.$submit,b);c&&h(a.$submit);a.$submit.unbind("click");a.$submit.click(function(b){b.preventDefault();if(f)if(f=="continue"){if(i(w))switch(h(a.$submit),B()){case "proposal":u(a)}}else if(f=="publish"&&i(w))switch(h(a.$submit),B()){case "dashboard":A(a);break;case "proposal":C(a);break;case "photo":D(a);break;case "video":x(a)}})}function F(b,f,d,e){var g=b.$ps.find("#"+d);if(g.length>
0){var k=b.settings.transitionSpeed,h=b.$ps.find(".section."+f),q=h.find(".uploader");new qq.FileUploader({element:c.getElementById(d),action:g.attr("data-url"),params:{utf8:g.closest("form").find("input[name=utf8]").val(),authenticity_token:g.closest("form").find("input[name=authenticity_token]").val()},debug:false,text:g.html(),onSubmit:function(){b.spinner.spin(M);h.find(".progress").show();q.find(".percentage").css("color","#FF0066");q.find("input").blur();q.find(".holder").fadeOut(k);q.find(".loading, .percentage").fadeIn(k)},
onProgress:function(a,b,c,f){a=parseFloat(c)/parseFloat(f)*100;b=parseInt(665*parseInt(a,10)/100,10);parseInt(a)>=75&&h.find(".uploader").find(".loading").fadeOut(k);parseInt(a)>=46&&h.find(".uploader").find(".percentage").css("color","#fff");q.find(".percentage").html(parseInt(a,10)+"%");h.find(".progress").css("width",b)},onComplete:function(f,d,g){b.spinner.stop();q.find(".loading").fadeOut(k);q.find(".holder").fadeIn(k);q.find(".percentage").fadeOut(k);var n=c.createElement("img");n.src="/uploads/tmp/"+
g.image_cache_name;h.find(".image_cache_name").val(g.image_cache_name);a(n).bind("load",function(){h.find(".image_container").prepend(n);h.find(".image_container").fadeIn(k);h.find(".image_container img").css("height","72px");h.find(".image_container img").css("width","auto");h.find(".image_container img").fadeIn(k);q.fadeOut(k,function(){l(b,h);Y(b);e&&e()})});q.find(".progress").fadeOut(k,function(){a(this).width(0)})},onCancel:function(){}})}}function K(a){var b=a.$ps;v(a);a.$ps.find(":text, textarea").val("");
a.$ps.find(".uploader").show();a.$ps.find(".holder").show();a.$ps.find(".loading").hide();a.$ps.find(".percentage").hide();a.$ps.find(".progress").css("width","0");a.$ps.find(".image_container").hide();a.$ps.find(".image_container img").remove();var c=b.find(".container .section:eq("+a.sectionID+")").find(".form").outerHeight(true);b.find(".container").animate({scrollLeft:a.sectionID*a.settings.sectionWidth,height:c},a.settings.transitionSpeed,"easeInOutQuad")}function O(b){var c=b.$ps;c.find("ul.menu li a").unbind();
c.find("ul.menu li a").click(function(f){f&&f.preventDefault();z(b.settings.transitionSpeed);b.sectionID=a(this).parent().index();$section=a(this).parents(".content").find(".container .section:eq("+b.sectionID+")");E($section)!=E(w)&&g(b,$section);n(b,a(this).parent());w?l(b,w,function(){w.find(".message.success").hide();w.find(".message.error").hide();w=$section;K(b);J(b,b.translations.publish,true,"publish");Y(b)}):(w=$section,f=$section.find(".form").outerHeight(true)+20,c.find(".container").animate({scrollTop:0,
scrollLeft:b.sectionID*b.settings.sectionWidth,height:f},b.settings.transitionSpeed,"easeInOutQuad"))})}function ca(a,b,c){var f=a.$ps;IrekiaSpinner.spin(M);w.find(".form").outerHeight(true);var d=w.find(".message.success"),e=w.find(".message.error");b=="success"?(e.hide(),d.show(0,function(){I(a.$submit,a.translations.close);j(a.$submit);a.$submit.unbind("click");a.$submit.bind("click",function(){r(a,true)})})):(e.show(),d.hide());b=d.outerHeight(true);f.find(".container").animate({scrollTop:d.position().top+
20,height:b},a.settings.transitionSpeed*2,"easeInOutQuad",function(){IrekiaSpinner.stop();c&&c()})}function Y(c){setTimeout(function(){var f=(a(b).height()-c.$ps.height())/2+a(b).scrollTop();c.$ps.animate({top:f},{duration:c.settings.transitionSpeed,specialEasing:{top:c.settings.easingMethod}})},200)}function ia(c){var f=(a(b).height()-c.$ps.height())/2+a(b).scrollTop(),d=(a(b).width()-c.$ps.width())/2;L?(c.$ps.removeClass("initialy_hidden"),c.$ps.css({top:f+"px",left:d+"px"}),c.$ps.fadeIn(c.settings.transitionSpeed,
function(){a(this).find("textarea.title").focus()})):(c.$ps.css({top:f+100+"px",left:d+"px"}),c.$ps.animate({opacity:1,top:f},{duration:c.settings.transitionSpeed,specialEasing:{top:c.settings.easingMethod}}))}function fa(a,b,c){a.$ps.find("textarea").val("");h(a.$submit);a.$ps.find(".extra").hide();a.$ps.find(".holder").show();l(a,w);a.$ps.find(".message").fadeOut(150);b&&LockScreen.hide();c&&c()}function r(b,c,f){v(b);L?b.$ps.fadeOut(b.settings.transitionSpeed,function(){fa(b,c,f)}):b.$ps.animate({opacity:0,
top:b.$ps.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},complete:function(){a(this).css("top","-900px");fa(b,c,f)}})}function N(a){a.$ps.find(".close").unbind("click");a.$ps.find(".close").bind("click",function(b){b.stopPropagation();b.preventDefault();r(a,true)})}function H(a){a.$ps.unbind("click");a.$ps.bind("click",function(a){a.stopPropagation()})}var L=a.browser.msie&&a.browser.version.substr(0,1)<9,G,w,P,M=c.getElementById("publish_spinner"),
ma=new Spinner(SPINNER_OPTIONS),T="publish-popover",S={},U,V={easingMethod:"easeInOutQuad",sectionWidth:687,transitionSpeed:200};S.init=function(c){c=a.extend({},V,c);return this.each(function(){var f=a(this),e=f.data(T)||{},g=f.attr("id")||f.attr("name"),k=false;if(e.id)return f;else e.id=g,e.$this=f,e.settings=c,e.name=T,e.event="_close."+T,e.sectionID=0,e.spinner=ma,e.translations={};G=a(this);k=a("#"+T);a(this).click(d);a(b).unbind();a(b).bind(e.event,function(){r(e,true)});e.$ps=k;f.data(T,e);
k.data(T,e);e.$submit=k.find(".bfooter .publish");if(a(this).hasClass("publish_proposal"))e.sectionID=1;e.translations.publish=k.attr("data-t-publish");e.translations.close=k.attr("data-t-close")})};a.fn.politicianPublishPopover=function(a){if(S[a])return S[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return S.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);(function(a,b,c){function d(b){b&&(b.preventDefault(),b.stopPropagation());var c=a(this).data(G),f=a("#"+c.id);LockScreen.show(function(){f.length||e(c)})}function e(a){var b=a.$ps;x(a,"Continuar",true,"continue");a.$ps.find("input,:text,textarea").attr("tabindex","-1");a.$ps.find(".autosuggest_field span.all a").unbind();a.$ps.find(".autosuggest_field span.all a").click(function(b){b.preventDefault();b.stopPropagation();B(a);a.spinner.spin(H)});a.questionStep=0;a.proposalStep=0;r=b.find(".container .section:eq(0)");
N=b.find(".menu").find("li:eq("+a.sectionID+")");r=b.find(".container .section:eq("+a.sectionID+")");y(a);n(a,N);GOD.subscribe(a.event);F(a);b.find(".input-counter").inputCounter({limit:a.settings.maxLimit})}function g(b,c,f,d){c.keyup(function(){a(this).val().length<=0?d&&d():f&&f()});c.keydown(function(){a(this).val().length<=0?d&&d():f&&f()})}function i(a,b){b.find(":text, textarea").val("");b.find(".holder").fadeIn(a.settings.transitionSpeed);b.find(".message").remove()}function j(a){a.removeClass("disabled");
a.removeAttr("disabled")}function h(a){a.addClass("disabled");a.attr("disabled","disabled")}function n(a,b){a.$ps.find(".menu").find("li.selected").removeClass("selected");b.addClass("selected")}function o(a,b){a.preventDefault();var c=b.$ps,f=c.find(".section.proposal").find(".image_container");f.fadeOut(b.settings.transitionSpeed,function(){f.find("img").remove();c.find(".uploader").show();f.find(".holder").show();c.find(".loading").hide();c.find(".percentage").hide();c.find(".progress").css("width",
"0")})}function p(a){var b=a.$ps;A(a,"upload_proposal_image");b.find(".image_container a.remove").unbind();b.find(".image_container a.remove").bind("click",function(b){o(b,a)})}function f(a,b,c){var f=a.$ps;height=b.find(".form").outerHeight(true);f.find(".container").animate({scrollTop:0,height:height},a.settings.transitionSpeed,function(){c&&c()})}function k(a){r.find(".extra").fadeOut(a)}function q(a){r.find(".extra").fadeIn(a)}function l(b){b.$ps.find(".autosuggest").fadeOut(100,function(){a(this).remove()})}
function z(a,b){var b=b.replace("item_",""),c=a=="user"?"area":"user",f=m();r.find("#"+f+"_"+f+"_data_attributes_"+a+"_id").val(b);r.find("#"+f+"_"+f+"_data_attributes_"+c+"_id").val("")}function s(b){var c=b.$ps;g(b,a(".autosuggest_field input"),null,function(){l(b);C()});r.find(".autosuggest_field input").keyup(function(f){var d;d=m()=="proposal"?!isEmpty(a("#proposal_proposal_data_attributes_area_id").val()):!isEmpty(a("#question_question_data_attributes_area_id").val())||!isEmpty(a("#question_question_data_attributes_user_id").val());
if(f.keyCode==8&&d)a(this).val(""),r.find(".autosuggest_field .holder").fadeIn(100),h(b.$submit),C(c);else if(_.any([13,16,17,18,20,27,32,37,38,39,40,91],function(a){return f.keyCode==a}))return;clearTimeout(P);a(this).val().length>3&&(P=setTimeout(function(){var f=r.find('.extra .autosuggest_field input[type="text"]').val();b.spinner.spin(H);f={name:f};m()=="proposal"&&(f=a.extend(f,{only_areas:true}));a.ajax({url:"/search/politicians_and_areas",data:{search:f},type:"GET",success:function(f){f=a(f);
b.spinner.stop();f.find("li").unbind();f.find("li").bind("click",function(){var c=a(this).attr("id"),f=a(this).find(".name").html();r.find('.autosuggest_field input[type="text"]').val(f);a(this).hasClass("user")?z("user",c):z("area",c);x(b,"Publicar",true,"publish");l(b);j(b.$submit)});if(f.find("li").length>0){f.hide();f.addClass("small");f.css({position:"relative"});f.css("top",0);l(b);c.find(".content").append(f);f.fadeIn(150);var d=f.find("ul").height();d<160?f.find(".popover").height(d):(c.find(".scroll-pane").jScrollPane(),
c.find(".jspDrag").bind("click",function(a){a.stopPropagation()}))}else h(b.$submit)}})},500))})}function v(a){q(a.settings.transitionSpeed);f(a,r,function(){J(a)});h(a.$submit);u(a.$submit,"Publicar");a.$submit.unbind()}function t(b){var c=r.find("form");c.submit();b.spinner.spin(H);c.unbind();c.bind("ajax:success",function(c,f){var d=a(f);b.spinner.stop();d.hide();r.append(d);b.$ps.find(".extra").hide();b.$ps.find(".holder").show();b.$ps.find(":text, textarea").val("");E(b,"success")})}function m(){return r.hasClass("question")?
"question":"proposal"}function u(a,b){a.find("span").text(b)}function D(a){if(a.hasClass("dashboard"))return"dashboard";if(a.hasClass("proposal"))return"proposal";if(a.hasClass("video"))return"video";if(a.hasClass("question"))return"question";if(a.hasClass("photo"))return"photo"}function x(a,b,c,f){u(a.$submit,b);c&&h(a.$submit);a.$submit.unbind("click");a.$submit.click(function(b){b.preventDefault();f&&(f=="continue"?isEmpty(r.find(":text, textarea").val())||(h(a.$submit),v(a)):f=="publish"&&!isEmpty(r.find(":text, textarea").val())&&
(h(a.$submit),t(a)))})}function A(b,d){var e=b.$ps,g=e.find("#"+d);if(g.length>0){var k=b.settings.transitionSpeed,h=e.find(".uploader");new qq.FileUploader({element:c.getElementById(d),action:g.attr("data-url"),params:{utf8:g.closest("form").find("input[name=utf8]").val(),authenticity_token:g.closest("form").find("input[name=authenticity_token]").val()},debug:false,text:g.html(),onSubmit:function(){b.spinner.spin(H);e.find(".progress").show();h.find(".percentage").css("color","#FF0066");h.find(".holder").fadeOut(k);
h.find(".loading, .percentage").fadeIn(k)},onProgress:function(a,b,c,f){var d=parseFloat(arguments[2])/parseFloat(arguments[3])*100,g=parseInt(665*parseInt(d,10)/100,10);console.debug(d,g,arguments,arguments[2],arguments[3]);parseInt(d)>=75&&e.find(".uploader").find(".loading").fadeOut(k);parseInt(d)>=46&&e.find(".uploader").find(".percentage").css("color","#fff");h.find(".percentage").html(parseInt(d,10)+"%");e.find(".progress").css("width",g)},onComplete:function(d,g,l){b.spinner.stop();console.debug(g,
l,l.image_cache_name);h.find(".loading").fadeOut(k);h.find(".holder").fadeIn(k);h.find(".percentage").fadeOut(k);var q=c.createElement("img");q.src="/uploads/tmp/"+l.image_cache_name;e.find(".image_cache_name").val(l.image_cache_name);a(q).bind("load",function(){e.find(".image_container").prepend(q);e.find(".image_container").fadeIn(k);e.find(".image_container img").css("height","72px");e.find(".image_container img").css("width","auto");e.find(".image_container img").fadeIn(k);h.fadeOut(k,function(){f(b,
r,function(){J(b)})})});h.find(".progress").fadeOut(k,function(){a(this).width(0)})},onCancel:function(){}})}}function C(){a("#question_question_data_attributes_politician_id").val("");a("#question_question_data_attributes_area_id").val("");a("#proposal_proposal_data_attributes_politician_id").val("");a("#proposal_proposal_data_attributes_area_id").val("")}function y(a){var b=a.$ps;l(a);var c=a.$ps;c.find(":text, textarea").val("");c.find(".uploader").show();c.find(".holder").show();c.find(".loading").hide();
c.find(".percentage").hide();c.find(".progress").css("width","0");c.find(".counter").html("140");c.find(".image_container").hide();c.find(".image_container img").remove();C();s(a);c=b.find(".container .section:eq("+a.sectionID+")").find(".form").outerHeight(true);b.find(".container").animate({scrollLeft:a.sectionID*a.settings.sectionWidth,height:c},a.settings.transitionSpeed,"easeInOutQuad")}function B(b){var c=b.$ps;a.ajax({url:"/areas",data:{},success:function(f){f=a(f);b.spinner.stop();f.find("li").unbind();
f.find("li").bind("click",function(){var c=a(this).attr("id"),f=a(this).find(".name").html();r.find(".autosuggest_field .holder").fadeOut(250);r.find('.autosuggest_field input[type="text"]').val(f);a(this).hasClass("user")?z("user",c):z("area",c);x(b,"Publicar",true,"publish");l(b);j(b.$submit)});r.find(".autosuggest").fadeOut(150,function(){a(this).remove()});if(f.find("li").length>0){f.hide();f.addClass("small");f.css({position:"relative"});f.css("top",0);c.find(".content").append(f);f.fadeIn(150);
var d=f.find("ul").height();d<160?f.find(".popover").height(d):(c.find(".scroll-pane").jScrollPane(),c.find(".jspDrag").bind("click",function(a){a.stopPropagation()}))}}})}function I(b){var c=b.$ps;c.find("ul.menu li a").unbind();c.find("ul.menu li a").click(function(d){d&&d.preventDefault();b.questionStep=0;b.proposalStep=0;k(b.settings.transitionSpeed);b.sectionID=a(this).parent().index();$section=a(this).parents(".content").find(".container .section:eq("+b.sectionID+")");D($section)!=D(r)?i(b,
$section):$section.find(".message").fadeOut(b.settings.transitionSpeed,function(){a(this).remove()});n(b,a(this).parent());r?f(b,r,function(){r.find(".message.success").hide();r.find(".message.error").hide();r=$section;y(b);x(b,"Continuar",true,"continue");J(b)}):(r=$section,d=$section.find(".form").outerHeight(true)+20,c.find(".container").animate({scrollTop:0,scrollLeft:b.sectionID*b.settings.sectionWidth,height:d},b.settings.transitionSpeed,"easeInOutQuad"))})}function E(a,b,c){var f=a.$ps;IrekiaSpinner.spin(H);
r.find(".form").outerHeight(true);var d=r.find(".message.success"),e=r.find(".message.error");b=="success"?(e.hide(),d.show(0,function(){u(a.$submit,"Cerrar");j(a.$submit);a.$submit.unbind("click");a.$submit.bind("click",function(){O(a,true)})})):(e.show(),d.hide());b=d.outerHeight(true);f.find(".container").animate({scrollTop:d.position().top+20,height:b},a.settings.transitionSpeed*2,"easeInOutQuad",function(){IrekiaSpinner.stop();c&&c()})}function J(c){setTimeout(function(){var f=(a(b).height()-
c.$ps.height())/2+a(b).scrollTop();c.$ps.animate({top:f},{duration:c.settings.transitionSpeed,specialEasing:{top:c.settings.easingMethod}})},200)}function F(c){var f=(a(b).height()-c.$ps.height())/2+a(b).scrollTop(),d=(a(b).width()-c.$ps.width())/2;fa?(c.$ps.removeClass("initialy_hidden"),c.$ps.css({top:f+"px",left:d+"px"}),c.$ps.fadeIn(c.settings.transitionSpeed,function(){a(this).find("textarea.title").focus()})):(c.$ps.css({top:f+100+"px",left:d+"px"}),c.$ps.animate({opacity:1,top:f},{duration:c.settings.transitionSpeed,
specialEasing:{top:c.settings.easingMethod}}))}function K(a,b,c){a.$ps.find("textarea").val("");a.$ps.find(".counter").html(140);h(a.$submit);a.questionStep=0;a.proposalStep=0;a.$ps.find(".extra").hide();a.$ps.find(".holder").show();f(a,r);a.$ps.find(".message").remove();b&&LockScreen.hide();c&&c()}function O(b,c,f){l(b);fa?b.$ps.fadeOut(b.settings.transitionSpeed,function(){K(b,c,f)}):b.$ps.animate({opacity:0,top:b.$ps.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},
complete:function(){a(this).css("top","-900px");K(b,c,f)}})}function ca(a){a.$ps.find(".close").unbind("click");a.$ps.find(".close").bind("click",function(b){b.stopPropagation();b.preventDefault();O(a,true)})}function Y(b){b.$ps.find(".all a").bind("click",function(b){b.stopPropagation();b.preventDefault();a.ajax({url:"/areas",data:{},success:function(a){console.log(a)}})})}function ia(a){a.$ps.unbind("click");a.$ps.bind("click",function(a){a.stopPropagation()})}var fa=a.browser.msie&&a.browser.version.substr(0,
1)<9;a(this);var r,N,H=c.getElementById("publish_spinner"),L=new Spinner(SPINNER_OPTIONS),G="publish-popover",w={},P,M={easingMethod:"easeInOutQuad",sectionWidth:687,transitionSpeed:200,maxLimit:140};w.init=function(c){c=a.extend({},M,c);return this.each(function(){var f=a(this),e=f.data(G)||{},k=f.attr("id")||f.attr("name"),l=false;if(e.id)return f;else e.id=k,e.$this=f,e.settings=c,e.name=G,e.event="_close."+G,e.proposalStep=0,e.questionStep=0,e.sectionID=0,e.spinner=L;l=a("#"+G);a(this).click(d);
a(b).unbind();a(b).bind(e.event,function(){O(e,true)});e.$ps=l;f.data(G,e);l.data(G,e);e.$submit=l.find(".bfooter .publish");ca(e);ia(e);Y(e);I(e);x(e,"Continuar",true,"continue");p(e);g(e,l.find("#question_question_data_attributes_question_text"),function(){j(e.$submit)},function(){h(e.$submit)});g(e,l.find("#proposal_proposal_data_attributes_title"),function(){j(e.$submit)},function(){h(e.$submit)});if(a(this).hasClass("publish_proposal"))e.sectionID=1})};a.fn.userPublishPopover=function(a){if(w[a])return w[a].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return w.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);(function(a,b,c){function d(b){b&&(b.preventDefault(),b.stopPropagation());var c=a(this).data(J),f=a("#"+c.name+"_"+c.id);LockScreen.show(function(){f.length||g(c)})}function e(a){v(a);z(a);!y&&t(a);k(a.event);C(a);a.$ps.find(".autosuggest_field span.all a").unbind();a.$ps.find(".autosuggest_field span.all a").click(function(b){b.preventDefault();a.spinner.spin(B);A(a)});a.$ps.find("textarea.grow").autogrow();a.$ps.find(".input-counter").inputCounter({limit:a.settings.maxLimit})}function g(b){b.$ps=
a(c).find(".article#"+b.id);e(b);i(b.$ps,b)}function i(c,f){var d=j(c),e=(a(b).width()-c.width())/2;y?(c.removeClass("initialy_hidden"),c.css({top:d+"px",left:e+"px"}),c.fadeIn(f.settings.transitionSpeed,function(){a(this).find("textarea.title").focus()})):(c.css({top:d+100+"px",left:e+"px"}),c.animate({opacity:1,top:d},{duration:f.settings.transitionSpeed,specialEasing:{top:f.settings.easingMethod},complete:function(){a(this).find("textarea.title").focus()}}))}function j(c){return(a(b).height()-
c.outerHeight(true))/2+a(b).scrollTop()}function h(a){a.find("textarea").val("");a.find(".counter").html(140);a.find("input.search").length>0&&isEmpty(a.find("input.search").val())&&a.find(".holder").fadeIn(100);o(a);u(a);a.find(".extra").fadeOut(100);a.find(".bfooter .action").unbind()}function n(a){a&&(a.find(".bfooter button").removeAttr("disabled"),a.find(".bfooter button").removeClass("disabled"))}function o(a){a&&(a.find(".bfooter button").attr("disabled","true"),a.find(".bfooter button").addClass("disabled"))}
function p(b,c,f){GOD.unsubscribe(b.event);y?b.$ps.fadeOut(b.settings.transitionSpeed,function(){a(this).remove();h(b.$ps);c&&LockScreen.hide();f&&f()}):b.$ps.animate({opacity:0.5,top:b.$ps.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},complete:function(){a(this).remove();h(b.$ps);c&&LockScreen.hide();f&&f()}})}function f(b,c,f){GOD.unsubscribe(b.event);y?b.$ps.fadeOut(b.settings.transitionSpeed,function(){h(b.$ps);c&&LockScreen.hide();f&&f()}):
b.$ps.animate({opacity:0,top:b.$ps.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},complete:function(){a(this).css("top","-900px");h(b.$ps);c&&LockScreen.hide();f&&f()}})}function k(a){GOD.subscribe(a);GOD.broadcast(a)}function q(a){setTimeout(function(){var b=j(a.$ps);a.$ps.animate({top:b},{duration:a.settings.transitionSpeed,specialEasing:{top:a.settings.easingMethod}})},200)}function l(b){b.$ps.find("form").die();b.$ps.find(".bfooter .action").click(function(){I.spin(B);
b.$ps.find("form").submit();o(b.$ps)});b.$ps.find("form").live("ajax:success",function(c,d){I.stop();n(b.$ps);f(b,false,function(){var c;c=_.extend({id:b.id+"_success",name:b.name,content:d},void 0);c=a(_.template(b.templates.success,c));b.$ps=c;c=b.$ps;s(b);t(b);LockScreen.showIfHidden();a("#container").prepend(c);k(b.event);i(c,b);c.find(".input-counter").inputCounter()})});b.$ps.find("form").live("ajax:error",function(){I.stop();n(b.$ps)})}function z(a){a.$ps.find(".bfooter .action").click(function(b){b.stopPropagation();
b.preventDefault();a.$ps.find(".extra").slideDown(a.settings.transitionSpeed,function(){q(a);l(a)})})}function s(a){a.$ps.find(".close").unbind("click");a.$ps.find(".close").bind("click",function(b){b.stopPropagation();b.preventDefault();p(a,true)})}function v(a){a.$ps.find(".close").unbind("click");a.$ps.find(".close").bind("click",function(b){b.stopPropagation();b.preventDefault();f(a,true)})}function t(a){a.$ps.bind("click",function(a){a.stopPropagation()})}function m(b,c,f,d){c.keyup(function(){a(this).val().length<=
0?d&&d():f&&f()});c.keydown(function(){a(this).val().length<=0?d&&d():f&&f()})}function u(b){b.find(".autosuggest").fadeOut(100,function(){a(this).remove()})}function D(b){a("#question_question_data_attributes_area_id").val("");a("#question_question_data_attributes_user_id").val("");o(b)}function x(a,b,c){var c=c.replace("item_",""),f=b=="user"?"area":"user";a.$ps.find("#question_question_data_attributes_"+b+"_id").val(c);a.$ps.find("#question_question_data_attributes_"+f+"_id").val("")}function A(b){var c=
b.$ps;a.ajax({url:"/areas",data:{},success:function(f){f=a(f);b.spinner.stop();f.find("li").unbind();f.find("li").bind("click",function(){var f=a(this).attr("id"),d=a(this).find(".name").html();c.find(".autosuggest_field .holder").fadeOut(250);c.find('.autosuggest_field input[type="text"]').val(d);a(this).hasClass("user")?x(b,"user",f):x(b,"area",f);isEmpty(c.find("textarea.title").val())||n(b.$ps);u(c)});c.find(".autosuggest").fadeOut(150,function(){a(this).remove()});if(f.find("li").length>0){f.hide();
f.addClass("small");f.css({position:"relative"});f.css("top",0);c.find(".content").append(f);f.fadeIn(150);var d=f.find("ul").height();d<160?f.find(".popover").height(d):(c.find(".scroll-pane").jScrollPane(),c.find(".jspDrag").bind("click",function(a){a.stopPropagation()}))}}})}function C(b){var c=b.$ps;m(b,a(".autosuggest_field input"),null,function(){u(c);D(c)});c.find(".autosuggest_field input").keyup(function(f){var d=!isEmpty(a("#question_question_data_attributes_area_id").val())||!isEmpty(a("#question_question_data_attributes_user_id").val());
if(f.keyCode==8&&d)a(this).val(""),c.find(".autosuggest_field .holder").fadeIn(100),D(c);else if(_.any([16,17,18,20,27,32,37,38,39,40,91],function(a){return f.keyCode==a}))return;clearTimeout(K);a(this).val().length>3&&(K=setTimeout(function(){var f=c.find('.extra .autosuggest_field input[type="text"]').val();b.spinner.spin(B);a.ajax({url:"/search/politicians_and_areas",data:{search:{name:f}},type:"GET",success:function(f){f=a(f);b.spinner.stop();f.find("li").unbind();f.find("li").bind("click",function(){var f=
a(this).attr("id"),d=a(this).find(".name").html();c.find('.autosuggest_field input[type="text"]').val(d);a(this).hasClass("user")?x(b,"user",f):x(b,"area",f);isEmpty(c.find("textarea.title").val())||n(b.$ps);u(c)});c.find(".autosuggest").fadeOut(150,function(){a(this).remove()});if(f.find("li").length>0){f.hide();f.addClass("small");f.css({position:"relative"});f.css("top",0);c.find(".content").append(f);f.fadeIn(150);var d=f.find("ul").height();d<160?f.find(".popover").height(d):(c.find(".scroll-pane").jScrollPane(),
c.find(".jspDrag").bind("click",function(a){a.stopPropagation()}))}}})},500))})}var y=a.browser.msie&&a.browser.version.substr(0,1)<9,B=c.getElementById("question_spinner"),I=new Spinner(SPINNER_OPTIONS),E={success:'<div id="<%= name %>_<%= id %>" class="article mini with_icon popover with_footer">   <div class="inner">     <%= content %>      <span class="close"></span>   </div>   <div class="bfooter">   <div class="separator"></div>   <div class="inner">     <a href="#" class="white_button pink close right"><span>Aceptar</span></a>   </div>   </div>   <div class="t"></div><div class="f"></div> </div>'},
J="question-popover",F={},K,O={easingMethod:"easeInOutQuad",transitionSpeed:200,maxLimit:140};F.init=function(c){c=a.extend({},O,c);return this.each(function(){var e=a(this),k=e.data(J)||{},h=e.attr("id")||e.attr("name");c.width||e.outerWidth();var l=false;if(k.id)return e;else k.id=h,k.$this=e,k.settings=c,k.templates=E,k.name=J,k.event="_close."+J+"_"+h,k.spinner=I;l=a("#"+J+"_"+h);a(this).click(d);!y&&a(b).bind(k.event,function(){f(k,true)});k.$ps=l;e.data(J,k);l.data(J,k);if(c.open==true)k.id=
k.name,g(k)})};a.fn.questionPopover=function(a){if(F[a])return F[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return F.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);(function(a,b,c){function d(b){b&&(b.preventDefault(),b.stopPropagation());var c=a(this).data(F),f=a("#"+c.name+"_"+c.id);LockScreen.show(function(){f.length||g(c)})}function e(a){t(a);s(a);!B&&m(a);y(a,"upload_image");q(a.event);C(a);a.$ps.find(".autosuggest_field span.all a").unbind();a.$ps.find(".autosuggest_field span.all a").click(function(b){b.preventDefault();a.spinner.spin(I);A(a)});a.$ps.find(".image_container a.remove").unbind();a.$ps.find(".image_container a.remove").bind("click",function(b){i(b,
a)});a.$ps.find("textarea.grow").autogrow();a.$ps.find(".input-counter").inputCounter({limit:a.settings.maxLimit})}function g(b){b.$ps=a(c).find(".article#"+b.id);e(b);j(b.$ps,b)}function i(a,b){a.preventDefault();var c=b.$ps,f=c.find(".image_container");f.fadeOut(b.settings.transitionSpeed,function(){f.find("img").remove();c.find(".uploader").show();f.find(".holder").show();c.find(".loading").hide();c.find(".percentage").hide();c.find(".progress").css("width","0");l(b)})}function j(c,f){var d=h(c),
e=(a(b).width()-c.width())/2;B?(c.removeClass("initialy_hidden"),c.css({top:d+"px",left:e+"px"}),c.fadeIn(f.settings.transitionSpeed,function(){a(this).find("textarea.title").focus()})):(c.css({top:d+100+"px",left:e+"px"}),c.animate({opacity:1,top:d},{duration:f.settings.transitionSpeed,specialEasing:{top:f.settings.easingMethod},complete:function(){a(this).find("textarea.title").focus()}}))}function h(c){return(a(b).height()-c.outerHeight(true))/2+a(b).scrollTop()}function n(a){a.find("textarea").val("");
a.find(".counter").html(140);a.find("input.search").length>0&&isEmpty(a.find("input.search").val())&&a.find(".holder").fadeIn(100);p(a);D(a);a.find(".extra").fadeOut(100);a.find(".bfooter .action").unbind()}function o(a){a&&(a.find(".bfooter button").removeAttr("disabled"),a.find(".bfooter button").removeClass("disabled"))}function p(a){a&&(a.find(".bfooter button").attr("disabled","true"),a.find(".bfooter button").addClass("disabled"))}function f(b,c,f){GOD.unsubscribe(b.event);B?b.$ps.fadeOut(b.settings.transitionSpeed,
function(){a(this).remove();n(b.$ps);c&&LockScreen.hide();f&&f()}):b.$ps.animate({opacity:0.5,top:b.$ps.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},complete:function(){a(this).remove();n(b.$ps);c&&LockScreen.hide();f&&f()}})}function k(b,c,f){GOD.unsubscribe(b.event);B?b.$ps.fadeOut(b.settings.transitionSpeed,function(){n(b.$ps);c&&LockScreen.hide();f&&f()}):b.$ps.animate({opacity:0,top:b.$ps.position().top-100},{duration:b.settings.transitionSpeed,
specialEasing:{top:b.settings.easingMethod},complete:function(){a(this).css("top","-900px");n(b.$ps);c&&LockScreen.hide();f&&f()}})}function q(a){GOD.subscribe(a);GOD.broadcast(a)}function l(a){setTimeout(function(){var b=h(a.$ps);a.$ps.animate({top:b},{duration:a.settings.transitionSpeed,specialEasing:{top:a.settings.easingMethod}})},200)}function z(b){b.$ps.find("form").die();b.$ps.find(".bfooter .action").click(function(){E.spin(I);b.$ps.find("form").submit();p(b.$ps)});b.$ps.find("form").live("ajax:success",
function(c,f){E.stop();o(b.$ps);k(b,false,function(){var c;c=_.extend({id:b.id+"_success",name:b.name,content:f},void 0);c=a(_.template(b.templates.success,c));b.$ps=c;c=b.$ps;v(b);m(b);LockScreen.showIfHidden();a("#container").prepend(c);q(b.event);j(c,b);c.find(".input-counter").inputCounter()})});b.$ps.find("form").live("ajax:error",function(){E.stop();o(b.$ps)})}function s(a){a.$ps.find(".bfooter .action").click(function(b){b.stopPropagation();b.preventDefault();a.$ps.find(".extra").slideDown(a.settings.transitionSpeed,
function(){l(a);z(a)})})}function v(a){a.$ps.find(".close").unbind("click");a.$ps.find(".close").bind("click",function(b){b.stopPropagation();b.preventDefault();f(a,true)})}function t(a){a.$ps.find(".close").unbind("click");a.$ps.find(".close").bind("click",function(b){b.stopPropagation();b.preventDefault();k(a,true)})}function m(a){a.$ps.unbind("click");a.$ps.bind("click",function(a){a.stopPropagation()})}function u(b,c,f,d){c.keyup(function(){a(this).val().length<=0?d&&d():f&&f()});c.keydown(function(){a(this).val().length<=
0?d&&d():f&&f()})}function D(b){b.find(".autosuggest").fadeOut(100,function(){a(this).remove()})}function x(b){a("#proposal_proposal_data_attributes_area_id").val("");p(b)}function A(b){var c=b.$ps;a.ajax({url:"/areas",data:{},success:function(f){f=a(f);b.spinner.stop();f.find("li").unbind();f.find("li").bind("click",function(){var f=a(this).attr("id"),d=a(this).find(".name").html();c.find(".autosuggest_field .holder").fadeOut(150);c.find('.autosuggest_field input[type="text"]').val(d);c.find("#proposal_proposal_data_attributes_area_id").val(f.replace("item_",
""));isEmpty(c.find("textarea.title").val())||o(b.$ps);D(c)});c.find(".autosuggest").fadeOut(150,function(){a(this).remove()});if(f.find("li").length>0){f.hide();f.addClass("small");f.css({position:"relative"});f.css("top",0);c.find(".content").append(f);f.fadeIn(150);var d=f.find("ul").height();d<160?f.find(".popover").height(d):(f.find(".scroll-pane").jScrollPane(),f.find(".jspDrag").bind("click",function(a){a.stopPropagation()}))}}})}function C(b){var c=b.$ps;u(b,a(".autosuggest_field input"),
null,function(){D(c);x(c)});c.find(".autosuggest_field input").keyup(function(f){var d=!isEmpty(a("#proposal_proposal_data_attributes_area_id").val());if(f.keyCode==8&&d)a(this).val(""),c.find(".autosuggest_field .holder").fadeIn(100),x(c);else if(_.any([8,13,16,17,18,20,27,32,37,38,39,40,91],function(a){return f.keyCode==a}))return;clearTimeout(O);a(this).val().length>3&&(O=setTimeout(function(){var f=c.find('.extra .autosuggest_field input[type="text"]').val();b.spinner.spin(I);f={name:f};f=a.extend(f,
{only_areas:true});a.ajax({url:"/search/politicians_and_areas",data:{search:f},type:"GET",success:function(f){f=a(f);b.spinner.stop();f.find("li").unbind();f.find("li").bind("click",function(){var f=a(this).attr("id"),d=a(this).find(".name").html();c.find('.autosuggest_field input[type="text"]').val(d);c.find("#proposal_proposal_data_attributes_area_id").val(f.replace("item_",""));isEmpty(c.find("textarea.title").val())||o(b.$ps);D(c)});c.find(".autosuggest").fadeOut(150,function(){a(this).remove()});
if(f.find("li").length>0){f.hide();f.addClass("small");f.css({position:"relative"});f.css("top",0);c.find(".content").append(f);f.fadeIn(150);var d=f.find("ul").height();d<160?f.find(".popover").height(d):(f.find(".scroll-pane").jScrollPane(),f.find(".jspDrag").bind("click",function(a){a.stopPropagation()}))}}})},500))})}function y(b,f){var d=b.$ps,e=d.find("#"+f);if(e.length>0){var k=b.settings.transitionSpeed,g=d.find(".uploader");new qq.FileUploader({element:c.getElementById(f),action:e.attr("data-url"),
params:{utf8:e.closest("form").find("input[name=utf8]").val(),authenticity_token:e.closest("form").find("input[name=authenticity_token]").val()},debug:false,text:e.html(),onSubmit:function(){b.spinner.spin(I);d.find(".progress").show();g.find(".percentage").css("color","#FF0066");g.find(".holder").fadeOut(k);g.find(".loading, .percentage").fadeIn(k)},onProgress:function(a,b,c,f){var e=parseFloat(arguments[2])/parseFloat(arguments[3])*100,h=parseInt(534*parseInt(e,10)/100,10);console.debug(e,h,arguments,
arguments[2],arguments[3]);parseInt(e)>=75&&d.find(".uploader").find(".loading").fadeOut(k);parseInt(e)>=46&&d.find(".uploader").find(".percentage").css("color","#fff");g.find(".percentage").html(parseInt(e,10)+"%");d.find(".progress").css("width",h)},onComplete:function(f,e,h){b.spinner.stop();console.debug(e,h,h.image_cache_name);g.find(".loading").fadeOut(k);g.find(".percentage").fadeOut(k);var q=c.createElement("img");q.src="/uploads/tmp/"+h.image_cache_name;d.find(".image_cache_name").val(h.image_cache_name);
a(q).bind("load",function(){d.find(".image_container").prepend(q);d.find(".image_container").fadeIn(k);d.find(".image_container img").css("height","72px");d.find(".image_container img").css("width","auto");d.find(".image_container img").fadeIn(k);l(b);g.fadeOut(k,function(){g.find(".holder").fadeIn(k)})});g.find(".progress").fadeOut(k,function(){a(this).width(0)})},onCancel:function(){}})}}var B=a.browser.msie&&a.browser.version.substr(0,1)<9,I=c.getElementById("proposal_spinner"),E=new Spinner(SPINNER_OPTIONS),
J={success:'<div id="<%= name %>_<%= id %>" class="article mini with_icon popover with_footer">   <div class="inner">     <span class="close"></span>     <%= content %>    </div>   <div class="bfooter">   <div class="separator"></div>   <div class="inner">     <a href="#" class="white_button pink close right"><span>Aceptar</span></a>   </div>   </div>   <div class="t"></div><div class="f"></div> </div>'},F="proposal-popover",K={},O,ca={easingMethod:"easeInOutQuad",transitionSpeed:200,maxLimit:140};
K.init=function(c){c=a.extend({},ca,c);return this.each(function(){var f=a(this),e=f.data(F)||{},h=f.attr("id")||f.attr("name");c.width||f.outerWidth();var l=false;if(e.id)return f;else e.id=h,e.$this=f,e.settings=c,e.templates=J,e.name=F,e.event="_close."+F+"_"+h,e.spinner=E;l=a("#"+F+"_"+h);a(this).click(d);!B&&a(b).bind(e.event,function(){k(e,true)});e.$ps=l;f.data(F,e);l.data(F,e);if(c.open==true)e.id=e.name,g(e)})};a.fn.proposalPopover=function(a){if(K[a])return K[a].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof a==="object"||!a)return K.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);(function(a,b){function c(b){b.preventDefault();b.stopPropagation();var c=a(this).data(f),e=a("#"+c.store);LockScreen.show(function(){e.length||d(c)})}function d(c){var f=c.$ps;a(b).unbind(c.event);a(b).bind(c.event,function(){g(f,c,true)});j(c);i(c);o(c);h(c);GOD.subscribe(c.event);e(f,c,function(){f.find("#user_email").focus()})}function e(c,f,d){var e=(a(b).height()-c.height())/2+a(b).scrollTop(),k=(a(b).width()-c.width())/2;p?(c.css({top:e+"px",left:k+"px"}),c.fadeIn(f.settings.transitionSpeed,
function(){d&&d()})):(c.css({top:e+100+"px",left:k+"px"}),c.show(),c.animate({opacity:1,top:e},{duration:f.settings.transitionSpeed,specialEasing:{top:f.settings.easingMethod},complete:function(){d&&d()}}))}function g(a,b,c,f){p?a.fadeOut(b.settings.transitionSpeed,function(){c&&LockScreen.hide();f&&f()}):a.animate({opacity:0,top:a.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},complete:function(){a.hide();c&&LockScreen.hide();f&&f()}})}function i(c){c.$ps.find("form button").unbind();
c.$ps.find("form button").bind("click",function(a){a.stopPropagation();c.$ps.find("p").removeClass("error")});c.$ps.find("form").unbind();c.$ps.find("form").bind("ajax:success",function(f,d){GOD.unsubscribe(c.event);var e=a(this);a(d);a("nav .content ul.auth").fadeOut(250,function(){a("nav .content ul.auth").replaceWith(a(d));a("nav .content ul.auth").fadeIn(250);a(".auth a.login").unbind()});c.callback?g(c.$ps,c,false,function(){c.callback=="question"?e.questionPopover({open:true}):c.callback=="proposal"&&
e.proposalPopover({open:true})}):(g(c.$ps,c,true),a("body").hasClass("home")&&b.location.reload());loginInLinks()});c.$ps.find("form").bind("ajax:error",function(){a(this).effect("shake",{times:4},100);c.$ps.find("p").addClass("error")})}function j(a){a.$ps.find(".close").unbind();a.$ps.find(".close").bind("click",function(b){b.stopPropagation();b.preventDefault();g(a.$ps,a,true)})}function h(c){c.$ps.find("a.password_reminder").unbind();c.$ps.find("a.password_reminder").bind("click",function(f){f.stopPropagation();
f.preventDefault();g(c.$ps,c);e(c.$password,c,function(){c.$password.find("input[type='email']").focus()});c.$password.find(".close").bind("click",function(a){a.stopPropagation();a.preventDefault();g(c.$password,c,true)});c.$password.find("a.white_button").unbind("click");c.$password.find("a.white_button").bind("click",function(a){a.stopPropagation();a.preventDefault();g(c.$password,c,false);c.$password.find("form").submit();e(c.$response,c);n(c)});a(b).unbind(c.event);a(b).bind(c.event,function(){g(c.$password,
c,true)})})}function n(c){a(b).unbind(c.event);a(b).bind(c.event,function(){g(c.$response,c,true)})}function o(a){a.$password.bind("click",function(a){a.stopPropagation()});a.$ps.bind("click",function(a){a.stopPropagation()})}var p=a.browser.msie&&a.browser.version.substr(0,1)<9,f="login",k={},q={easingMethod:"easeInOutQuad",transitionSpeed:200,maxLimit:140};k.init=function(b){b=a.extend({},q,b);return this.each(function(){var d=a(this),e=d.data(f)||{},k=d.hasClass("after_create_proposal")||d.hasClass("after_ask_question")?
true:false,g=d.attr("id")||d.attr("name");b.width||d.outerWidth();var h=false;if(e.id)return d;else e.id=g,e.$this=d,e.settings=b,e.name=f,e.callback=k,e.event="_close."+f+"_"+g;h=a("#"+f);e.$password=a("#password_reminder");e.$response=a("#password_response");k=d.attr("class");if(k.indexOf("question")!=-1)e.callback="question";else if(k.indexOf("proposal")!=-1)e.callback="proposal";a(this).unbind("click");a(this).click(c);e.$ps=h;d.data(f,e);h.data(f,e)})};a.fn.floatingLoginPopover=function(a){if(k[a])return k[a].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return k.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);
(function(a,b){function c(a){var b=a.data(k),c=b.$ps;p(a);e(b);i(b);GOD.subscribe("_close."+b.id);c.hasClass("open")?o(a):(c.addClass("open"),c.fadeIn(b.settings.transitionSpeed,function(){c.find("#user_email").focus()}))}function d(b){b&&(b.preventDefault(),b.stopPropagation());c(a(this))}function e(a){a.$password.bind("click",function(a){a.stopPropagation()})}function g(c,d,e){var k=(a(b).height()-c.height())/2+a(b).scrollTop(),g=(a(b).width()-c.width())/2;f?(c.css({top:k+"px",left:g+"px"}),c.fadeIn(d.settings.transitionSpeed,
function(){e&&e()})):(c.css({top:k+100+"px",left:g+"px"}),c.show(),c.animate({opacity:1,top:k},{duration:d.settings.transitionSpeed,specialEasing:{top:d.settings.easingMethod},complete:function(){e&&e()}}))}function i(c){c.$ps.find("a.password_reminder").unbind();c.$ps.find("a.password_reminder").bind("click",function(f){f.stopPropagation();f.preventDefault();o(c.$this);LockScreen.show(function(){GOD.subscribe("_close.password_reminder");g(c.$password,c,function(){c.$password.find("input[type='email']").focus()})});
c.$password.find(".close").bind("click",function(a){a.stopPropagation();a.preventDefault();n(c.$password,c,true)});c.$password.find("a.white_button").unbind();c.$password.find("a.white_button").bind("click",function(a){a.stopPropagation();a.preventDefault();n(c.$password,c,false);c.$password.find("form").submit();g(c.$response,c);j(c)});a(b).unbind(c.event);a(b).bind("_close.password_reminder",function(){n(c.$password,c,true)})})}function j(c){c.$response.find(".close").bind("click",function(a){a.stopPropagation();
a.preventDefault();h(c.$response,c,true)});a(b).unbind(c.event);a(b).bind(c.event,function(){o(c.$response,c,true)})}function h(a,b,c,d){f?a.fadeOut(b.settings.transitionSpeed,function(){c&&LockScreen.hide();d&&d()}):a.animate({opacity:0,top:a.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},complete:function(){a.hide();c&&LockScreen.hide();d&&d()}})}function n(a,b,c,d){GOD.unsubscribe("_close.password_reminder");f?a.fadeOut(b.settings.transitionSpeed,
function(){c&&LockScreen.hide();d&&d()}):a.animate({opacity:0,top:a.position().top-100},{duration:b.settings.transitionSpeed,specialEasing:{top:b.settings.easingMethod},complete:function(){a.hide();c&&LockScreen.hide();d&&d()}})}function o(a){a=a.data(k);a.$ps.removeClass("open");a.$ps.fadeOut(a.settings.transitionSpeed)}function p(b){var c=b.data(k),b=a("#sign_in"),f=c.$this,c=f.offset().left-b.width()+30,f=f.offset().top+20;b.css("left",c);b.css("top",f)}var f=a.browser.msie&&a.browser.version.substr(0,
1)<9,k="login-popover",q={},l={transitionSpeed:250};q.init=function(f){f=a.extend({},l,f);return this.each(function(){var e=a(this),g=e.data(k)||{};f.width||e.outerWidth();var h;if(g.id)return e;else g.id="sign_in",g.$this=e,g.settings=f;e.before(false);h=a("#"+g.id);h.bind("click",function(a){a.stopPropagation()});a(this).click(d);a(b).bind("resize."+g.id,function(){p(e)});a(b).bind("_close."+g.id,function(){o(e)});g.$ps=h;e.data(k,g);h.data(k,g);g.$password=a("#password_reminder");g.$response=a("#password_response");
h.attr("class")=="error"&&c(e)})};a.fn.loginPopover=function(a){if(q[a])return q[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return q.init.apply(this,arguments)};a(function(){})})(jQuery,window,document);var map,dblclick=false,mini_marker;$(function(){$("#map_canvas").length&&startMap()});function ZoomInControl(a,b){a.setAttribute("class","zoom_in");google.maps.event.addDomListener(a,"mousedown",function(){b.setZoom(b.getZoom()+1)})}function ZoomOutControl(a,b){a.setAttribute("class","zoom_out");google.maps.event.addDomListener(a,"mousedown",function(){b.setZoom(b.getZoom()-1)})}
function toggleBounce(){marker.getAnimation()!=null?marker.setAnimation(null):marker.setAnimation(google.maps.Animation.BOUNCE)}
function startMap(){var a={zoom:15,center:new google.maps.LatLng(42.8464027,-2.6716728),mapTypeId:google.maps.MapTypeId.ROADMAP,navigationControl:false,disableDefaultUI:false,scrollwheel:false,streetViewControl:false,mapTypeControl:false,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},maxZoom:18};map=new google.maps.Map(document.getElementById("map_canvas"),a);google.maps.event.addListener(map,"dblclick",function(){dblclick=true});a=document.createElement("DIV");new ZoomInControl(a,
map);a.index=1;map.controls[google.maps.ControlPosition.TOP_LEFT].push(a);a=document.createElement("DIV");new ZoomOutControl(a,map);a.index=2;map.controls[google.maps.ControlPosition.LEFT].push(a);if(events.length>0){var b=new google.maps.LatLngBounds;(function(){for(var a=0;a<events.length;a++){var d=events[a][0],e=events[a],d=new google.maps.LatLng(d.lat,d.lon);if(e.title&&e.title.length>50)e.title=e.title.substr(0,47)+"...";new IrekiaMarker(d,e,map);b.extend(d)}})();map.fitBounds(b)}}
function startMiniMap(a,b,c,d){var e=new google.maps.LatLng(b,c),g,e={zoom:g||15,zoomControl:false,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,navigationControl:false,disableDefaultUI:false,streetViewControl:false,mapTypeControl:false,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},maxZoom:16};map=new google.maps.Map(document.getElementById(a),e);if(d==true)e=document.createElement("DIV"),new ZoomInControl(e,map),e.index=1,map.controls[google.maps.ControlPosition.TOP_LEFT].push(e),
e=document.createElement("DIV"),new ZoomOutControl(e,map),e.index=2,map.controls[google.maps.ControlPosition.LEFT].push(e);e=new google.maps.LatLng(b,c);b=new google.maps.MarkerImage("/images/maps_sprite.png",new google.maps.Size(24,34),new google.maps.Point(0,67),new google.maps.Point(12,30));mini_marker=new google.maps.Marker({position:e,map:map,icon:b});b=new google.maps.LatLngBounds;b.extend(e);map.fitBounds(b)}function editMiniMap(a){mini_marker.setPosition(a);map.setCenter(a)}
function IrekiaMarker(a,b,c){this.latlng=a;this.info=b;this.map=c;this.offsetVertical_=-12;this.offsetHorizontal_=-13;this.width=25;this.height=34;this.setMap(this.map)}IrekiaMarker.prototype=new google.maps.OverlayView;
IrekiaMarker.prototype.draw=function(){var a=this,b=this.div_;if(!b){b=this.div_=document.createElement("DIV");$(b).addClass("marker");b.style.position="absolute";b.style.width="25px";b.style.height="25px";for(var c=this.info.length,d="",e,g="",i=0;i<=this.info.length-1;i++)e=this.info[i],d+=_.template('    <li class="area_<%= area_id %>">       <strong class="date"><%= date %></strong>       <a href="/events/<%= event_id %>" class="event"><%= title %></a>       <ul class="details">         <li class="where"><%= where %></li>         <li class="when"><%= when %></li>       </ul>       <% if (separator) { %>         <div class="separator"></div>       <% } %>     </li>',
{area_id:e.area_id,event_id:e.event_id,title:e.title,date:e.date,where:e.where,when:e.when,separator:c>1&&i<c-1?true:false}),e.area_id&&e.area_id!=void 0&&(g+="area_"+e.area_id);e=_.template('  <a class="icon<%= (count > 1) ? " with_counter" : "" %>">   <% if (count > 1) {%>   <div class="counter"><%= count %></div>  <% } %></a>',{count:c});e=$(b).append(e);$(e).addClass(g);c=_.template('<div class="info infowindow<%= (count > 1) ? " large" : "" %>"> <% if (count > 1) {%> <div class="scroll-pane"> <% } %>   <ul class="events">   <%= events %>   </ul> <% if (count > 1) {%>   </div> <% } %>   <span class="close"></span> </div>',
{count:c,events:d});$(b).append(c);$(b).find("span.close").click(function(a){a.preventDefault();$("div.infowindow").hide()});var j;$(b).find("a.icon").click(function(){clearTimeout(j);j=setTimeout(function(){dblclick?dblclick=false:(a.moveMaptoOpen(),$("div.infowindow").hide(),$(a.div_).find("div.infowindow").show(),$(a.div_).find(".scroll-pane").jScrollPane())},300)});this.getPanes().floatPane.appendChild(b)}if(c=a.getProjection().fromLatLngToDivPixel(a.latlng))b.style.left=c.x+a.offsetHorizontal_+
"px",b.style.top=c.y+a.offsetVertical_+"px";$infowindow=$(b).find(".infowindow");b=$infowindow.height();c=$infowindow.width();$infowindow.css("top",-1*b-45+"px");$infowindow.css("left",-1*c/2-10+"px")};IrekiaMarker.prototype.remove=function(){if(this.div_)this.div_.parentNode.removeChild(this.div_),this.div_=null};IrekiaMarker.prototype.hide=function(){this.div_&&$(this.div_).find("div").fadeOut()};IrekiaMarker.prototype.getPosition=function(){return this.latlng_};
IrekiaMarker.prototype.moveMaptoOpen=function(){var a=0,b=0,c=this.getProjection().fromLatLngToContainerPixel(this.latlng);c.x+this.offsetHorizontal_<158&&(a=c.x+this.offsetHorizontal_-158);$("div#map_canvas").width()-c.x+this.offsetHorizontal_<158&&(a=158-$("div#map_canvas").width()+c.x-this.offsetHorizontal_);c.y+this.offsetVertical_<268&&(b=c.y+this.offsetVertical_-268);this.map.panBy(a,b)};(function(a,b){function c(b,c){var i=b.nodeName.toLowerCase();if("area"===i){c=b.parentNode;i=c.name;if(!b.href||!i||c.nodeName.toLowerCase()!=="map")return false;b=a("img[usemap=#"+i+"]")[0];return!!b&&d(b)}return(/input|select|textarea|button|object/.test(i)?!b.disabled:"a"==i?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var d=
this;setTimeout(function(){a(d).focus();c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var c=a(this[0]),d;c.length&&c[0]!==document;){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed")if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&d!==0)return d;c=c.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function i(b,c,f,d){a.each(j,function(){c-=parseFloat(a.curCSS(b,"padding"+this,true))||0;f&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",true))||0);d&&(c-=parseFloat(a.curCSS(b,"margin"+this,true))||0)});return c}var j=d==="Width"?["Left","Right"]:["Top","Bottom"],h=d.toLowerCase(),n={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,
outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?n["inner"+d].call(this):this.each(function(){a(this).css(h,i(this,c)+"px")})};a.fn["outer"+d]=function(b,c){return typeof b!=="number"?n["outer"+d].call(this,b):this.each(function(){a(this).css(h,i(this,b,true,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),
i=isNaN(d);return(i||d>=0)&&c(b,!i)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=c.offsetHeight===100;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var b=a.ui[b].prototype,j;for(j in d)b.plugins[j]=b.plugins[j]||[],b.plugins[j].push([c,d[j]])},call:function(a,b,c){if((b=a.plugins[b])&&
a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return false;var c=c&&c==="left"?"scrollLeft":"scrollTop",d=false;if(b[c]>0)return true;b[c]=1;d=b[c]>0;b[c]=0;return d},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,j,h,n){return a.ui.isOverAxis(b,d,h)&&
a.ui.isOverAxis(c,j,n)}}))})(jQuery);
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,i;(i=b[d])!=null;d++)try{a(i).triggerHandler("remove")}catch(j){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var j=b.split(".")[0],h,b=b.split(".")[1];h=j+"-"+b;if(!d)d=c,c=a.Widget;a.expr[":"][h]=
function(c){return!!a.data(c,b)};a[j]=a[j]||{};a[j][b]=function(a,b){arguments.length&&this._createWidget(a,b)};c=new c;c.options=a.extend(true,{},c.options);a[j][b].prototype=a.extend(true,c,{namespace:j,widgetName:b,widgetEventPrefix:a[j][b].prototype.widgetEventPrefix||b,widgetBaseClass:h},d);a.widget.bridge(b,a[j][b])};a.widget.bridge=function(c,d){a.fn[c]=function(i){var j=typeof i==="string",h=Array.prototype.slice.call(arguments,1),n=this,i=!j&&h.length?a.extend.apply(null,[true,i].concat(h)):
i;if(j&&i.charAt(0)==="_")return n;j?this.each(function(){var d=a.data(this,c),g=d&&a.isFunction(d[i])?d[i].apply(d,h):d;if(g!==d&&g!==b)return n=g,false}):this.each(function(){var b=a.data(this,c);b?b.option(i||{})._init():a.data(this,c,new d(i,this))});return n}};a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=
a.extend(true,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var i=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c==="string"){if(d===b)return this.options[c];i={};i[c]=d}this._setOptions(i);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,c,d){var j=this.options[b],c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d=d||{};if(c.originalEvent)for(var b=a.event.props.length,h;b;)h=a.event.props[--b],c[h]=c.originalEvent[h];this.element.trigger(c,d);return!(a.isFunction(j)&&j.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
(function(a){var b=false;a(document).mouseup(function(){b=false});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(d){if(true===a.data(d.target,b.widgetName+".preventClickEvent"))return a.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),false});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var d=this,e=c.which==1,g=typeof this.options.cancel=="string"&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:false;if(!e||g||!this._mouseCapture(c))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=
this._mouseStart(c)!==false,!this._mouseStarted))return c.preventDefault(),true;true===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return b=true}},_mouseMove:function(b){if(a.browser.msie&&
!(document.documentMode>=9)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b);return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=
false,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",true),this._mouseStop(b);return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d=a.fn.position,e=a.fn.offset;a.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);var e=a.extend({},e),i=a(e.of),j=i[0],h=(e.collision||"flip").split(" "),n=e.offset?e.offset.split(" "):[0,0],o,p,f;j.nodeType===9?(o=i.width(),p=i.height(),f={top:0,left:0}):j.setTimeout?(o=i.width(),p=i.height(),f={top:i.scrollTop(),left:i.scrollLeft()}):j.preventDefault?(e.at="left top",o=p=0,f={top:e.of.pageY,left:e.of.pageX}):
(o=i.outerWidth(),p=i.outerHeight(),f=i.offset());a.each(["my","at"],function(){var a=(e[this]||"").split(" ");a.length===1&&(a=b.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"]);a[0]=b.test(a[0])?a[0]:"center";a[1]=c.test(a[1])?a[1]:"center";e[this]=a});h.length===1&&(h[1]=h[0]);n[0]=parseInt(n[0],10)||0;n.length===1&&(n[1]=n[0]);n[1]=parseInt(n[1],10)||0;e.at[0]==="right"?f.left+=o:e.at[0]==="center"&&(f.left+=o/2);e.at[1]==="bottom"?f.top+=p:e.at[1]==="center"&&
(f.top+=p/2);f.left+=n[0];f.top+=n[1];return this.each(function(){var b=a(this),c=b.outerWidth(),d=b.outerHeight(),i=parseInt(a.curCSS(this,"marginLeft",true))||0,j=parseInt(a.curCSS(this,"marginTop",true))||0,v=c+i+(parseInt(a.curCSS(this,"marginRight",true))||0),t=d+j+(parseInt(a.curCSS(this,"marginBottom",true))||0),m=a.extend({},f),u;e.my[0]==="right"?m.left-=c:e.my[0]==="center"&&(m.left-=c/2);e.my[1]==="bottom"?m.top-=d:e.my[1]==="center"&&(m.top-=d/2);m.left=Math.round(m.left);m.top=Math.round(m.top);
u={left:m.left-i,top:m.top-j};a.each(["left","top"],function(b,f){a.ui.position[h[b]]&&a.ui.position[h[b]][f](m,{targetWidth:o,targetHeight:p,elemWidth:c,elemHeight:d,collisionPosition:u,collisionWidth:v,collisionHeight:t,offset:n,my:e.my,at:e.at})});a.fn.bgiframe&&b.bgiframe();b.offset(a.extend(m,{using:e.using}))})};a.ui.position={fit:{left:function(b,c){var d=a(window),d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=d>0?b.left-d:Math.max(b.left-c.collisionPosition.left,
b.left)},top:function(b,c){var d=a(window),d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!=="center"){var d=a(window),d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),e=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,n=c.at[0]==="left"?c.targetWidth:-c.targetWidth,o=-2*c.offset[0];b.left+=c.collisionPosition.left<0?e+n+o:d>0?e+n+o:0}},top:function(b,
c){if(c.at[1]!=="center"){var d=a(window),d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),e=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,n=c.at[1]==="top"?c.targetHeight:-c.targetHeight,o=-2*c.offset[1];b.top+=c.collisionPosition.top<0?e+n+o:d>0?e+n+o:0}}}};if(!a.offset.setOffset)a.offset.setOffset=function(b,c){if(/static/.test(a.curCSS(b,"position")))b.style.position="relative";var d=a(b),e=d.offset(),n=parseInt(a.curCSS(b,"top",true),10)||0,o=parseInt(a.curCSS(b,
"left",true),10)||0,e={top:c.top-e.top+n,left:c.left-e.left+o};"using"in c?c.using.call(b,e):d.css(e)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):e.call(this)}})(jQuery);
(function(a){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,d=this.element[0].ownerDocument,e;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(!b.options.disabled&&!b.element.propAttr("readOnly")){e=
false;var i=a.ui.keyCode;switch(d.keyCode){case i.PAGE_UP:b._move("previousPage",d);break;case i.PAGE_DOWN:b._move("nextPage",d);break;case i.UP:b._move("previous",d);d.preventDefault();break;case i.DOWN:b._move("next",d);d.preventDefault();break;case i.ENTER:case i.NUMPAD_ENTER:b.menu.active&&(e=true,d.preventDefault());case i.TAB:if(!b.menu.active)break;b.menu.select(d);break;case i.ESCAPE:b.element.val(b.term);b.close(d);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){if(b.term!=
b.element.val())b.selectedItem=null,b.search(null,d)},b.options.delay)}}}).bind("keypress.autocomplete",function(a){e&&(e=false,a.preventDefault())}).bind("focus.autocomplete",function(){if(!b.options.disabled)b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(!b.options.disabled)clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a);b._change(a)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=
a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",d)[0]).mousedown(function(d){var e=b.menu.element[0];a(d.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(d){d.target!==b.element[0]&&d.target!==e&&!a.ui.contains(e,d.target)&&b.close()})},1);setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,d){d=d.item.data("item.autocomplete");false!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&
b.element.val(d.value)},selected:function(a,e){var j=e.item.data("item.autocomplete"),h=b.previous;if(b.element[0]!==d.activeElement)b.element.focus(),b.previous=h,setTimeout(function(){b.previous=h;b.selectedItem=j},1);false!==b._trigger("select",a,{item:j})&&b.element.val(j.value);b.term=b.element.val();b.close(a);b.selectedItem=j},blur:function(){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");
a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(b,d){a.Widget.prototype._setOption.apply(this,arguments);b==="source"&&this._initSource();b==="appendTo"&&this.menu.element.appendTo(a(d||"body",this.element[0].ownerDocument)[0]);b==="disabled"&&
d&&this.xhr&&this.xhr.abort()},_initSource:function(){var c=this,d,e;a.isArray(this.options.source)?(d=this.options.source,this.source=function(b,c){c(a.ui.autocomplete.filter(d,b.term))}):typeof this.options.source==="string"?(e=this.options.source,this.source=function(d,i){c.xhr&&c.xhr.abort();c.xhr=a.ajax({url:e,data:d,dataType:"json",autocompleteRequest:++b,success:function(a){this.autocompleteRequest===b&&i(a)},error:function(){this.autocompleteRequest===b&&i([])}})}):this.source=this.options.source},
search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close();this.pending--;this.pending||
this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b==="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},
b)})},_suggest:function(b){var d=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(d,b);this.menu.deactivate();this.menu.refresh();d.show();this._resizeMenu();d.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,d){var e=this;this.menu.element.append('<span class="peak"></span>');
a.each(d,function(a,d){e._renderItem(b,d)})},_renderItem:function(b,d){return a("<li></li>").data("item.autocomplete",d).append(a("<a></a>").text(d.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a))this.element.val(this.term),this.menu.deactivate();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$&")},filter:function(b,d){var e=RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(b,function(a){return e.test(a.label||a.value||a)})}})})(jQuery);
(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))});this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,c){this.deactivate();if(this.hasScroll()){var d=c.offset().top-this.element.offset().top,e=this.element.scrollTop(),g=this.element.height();d<0?this.element.scrollTop(e+d):d>=g&&this.element.scrollTop(e+d-g+c.height())}this.active=c.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:c})},deactivate:function(){if(this.active)this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),
this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,c,d){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(d,a):this.activate(d,this.element.children(c))):this.activate(d,this.element.children(c))},
nextPage:function(b){if(this.hasScroll())if(!this.active||this.last())this.activate(b,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last"));this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},
previousPage:function(b){if(this.hasScroll())if(!this.active||this.first())this.activate(b,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,d=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(b,result)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||
this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})})(jQuery);
jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],
16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?h.transparent:h[a.trim(b).toLowerCase()]}function d(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)typeof a[c]===
"string"&&(b[c]=a[c]);return b}function e(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in o||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function i(b,c,d,e){if(typeof b=="object")e=c,d=null,c=b,b=c.effect;a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};a.isFunction(d)&&(e=d,d=null);c=c||{};d=d||c.duration;d=a.fx.off?0:typeof d=="number"?
d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;e=e||c.complete;return[b,c,d,e]}function j(b){return!b||typeof b==="number"||a.fx.speeds[b]?true:typeof b==="string"&&!a.effects[b]?true:false}a.effects={};a.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,borderColor,color,outlineColor".split(","),function(b,f){a.fx.step[f]=function(b){if(!b.colorInit){var d;d=b.elem;var e=f,h;do{h=a.curCSS(d,e);if(h!=""&&h!="transparent"||a.nodeName(d,"body"))break;e=
"backgroundColor"}while(d=d.parentNode);d=c(h);b.start=d;b.end=c(b.end);b.colorInit=true}b.elem.style[f]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var h={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,k,h){a.isFunction(k)&&(h=k,k=null);return this.queue(function(){var l=
a(this),o=l.attr("style")||" ",i=e(d.call(this)),j,t=l.attr("class");a.each(n,function(a,c){b[c]&&l[c+"Class"](b[c])});j=e(d.call(this));l.attr("class",t);l.animate(g(i,j),{queue:false,duration:c,easing:k,complete:function(){a.each(n,function(a,c){b[c]&&l[c+"Class"](b[c])});typeof l.attr("style")=="object"?(l.attr("style").cssText="",l.attr("style").cssText=o):l.attr("style",o);h&&h.apply(this,arguments);a.dequeue(this)}})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?
a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,f,d,e,h){return typeof f=="boolean"||f===b?d?a.effects.animateClass.apply(this,[f?{add:c}:{remove:c},d,e,h]):this._toggleClass(c,f):a.effects.animateClass.apply(this,[{toggle:c},f,d,e])},switchClass:function(b,c,d,e,h){return a.effects.animateClass.apply(this,
[{add:c,remove:b},d,e,h])}});a.extend(a.effects,{version:"1.8.16",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){b=="toggle"&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":a=
0;break;case "center":a=0.5;break;case "right":a=1;break;default:a=a[1]/b.width}return{x:a,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(true),height:b.outerHeight(true),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;b.wrap(d);(b[0]===e||a.contains(b[0],e))&&a(e).focus();d=b.parent();b.css("position")==
"static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),
c):b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){unit=b.cssUnit(c);unit[0]>0&&(e[c]=unit[0]*d+unit[1])});return e}});a.fn.extend({effect:function(b){var c=i.apply(this,arguments),d={options:c[1],duration:c[2],callback:c[3]},c=d.options.mode,e=a.effects[b];return a.fx.off||!e?c?this[c](d.duration,d.callback):this.each(function(){d.callback&&d.callback.call(this)}):e.call(this,d)},_show:a.fn.show,show:function(a){if(j(a))return this._show.apply(this,arguments);else{var b=i.apply(this,
arguments);b[1].mode="show";return this.effect.apply(this,b)}},_hide:a.fn.hide,hide:function(a){if(j(a))return this._hide.apply(this,arguments);else{var b=i.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)}},__toggle:a.fn.toggle,toggle:function(b){if(j(b)||typeof b==="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);else{var c=i.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)}},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em",
"px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])});return d}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,h){return a.easing[a.easing.def](b,c,d,e,h)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*
((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*
b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/
2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var h=0,g=d;if(b==0)return c;if((b/=e)==1)return c+d;h||(h=e*0.3);g<Math.abs(d)?(g=d,a=h/4):a=h/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/h))+c},
easeOutElastic:function(a,b,c,d,e){var h=0,g=d;if(b==0)return c;if((b/=e)==1)return c+d;h||(h=e*0.3);g<Math.abs(d)?(g=d,a=h/4):a=h/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*b)*Math.sin((b*e-a)*2*Math.PI/h)+d+c},easeInOutElastic:function(a,b,c,d,e){var h=0,g=d;if(b==0)return c;if((b/=e/2)==2)return c+d;h||(h=e*0.3*1.5);g<Math.abs(d)?(g=d,a=h/4):a=h/(2*Math.PI)*Math.asin(d/g);return b<1?-0.5*g*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/h)+c:g*Math.pow(2,-10*(b-=1))*Math.sin((b*e-a)*2*
Math.PI/h)*0.5+d+c},easeInBack:function(a,c,d,e,h,g){g==b&&(g=1.70158);return e*(c/=h)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,h,g){g==b&&(g=1.70158);return e*((c=c/h-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,h,g){g==b&&(g=1.70158);return(c/=h/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,h){return e-a.easing.easeOutBounce(b,h-c,0,e,h)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*
(b-=1.5/2.75)*b+0.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+0.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+0.984375)+c},easeInOutBounce:function(b,c,d,e,h){return c<h/2?a.easing.easeInBounce(b,c*2,0,e,h)*0.5+d:a.easing.easeOutBounce(b,c*2-h,0,e,h)*0.5+e*0.5+d}})}(jQuery);
(function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"];a.effects.setMode(c,b.options.mode||"effect");var e=b.options.direction||"left",g=b.options.distance||20,i=b.options.times||3,j=b.duration||b.options.duration||140;a.effects.save(c,d);c.show();a.effects.createWrapper(c);var h=e=="up"||e=="down"?"top":"left",n=e=="up"||e=="left"?"pos":"neg",e={},o={},p={};e[h]=(n=="pos"?"-=":"+=")+g;o[h]=(n=="pos"?"+=":"-=")+g*2;p[h]=(n==
"pos"?"-=":"+=")+g*2;c.animate(e,j,b.options.easing);for(g=1;g<i;g++)c.animate(o,j,b.options.easing).animate(p,j,b.options.easing);c.animate(o,j,b.options.easing).animate(e,j/2,b.options.easing,function(){a.effects.restore(c,d);a.effects.removeWrapper(c);b.callback&&b.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var a=[].slice.call(arguments);typeof console.log==="object"?log.apply.call(console.log,console,a):console.log.apply(console,a)}};
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;d=c.pop();)a[d]=a[d]||b})(function(){try{return console.log(),window.console}catch(a){return window.console={}}}());
(function(a){a.fn.columnize=function(b){var c={width:400,columns:false,buildOnce:false,overflow:false,doneFunc:function(){},target:false,ignoreImageLoading:true,columnFloat:"left",lastNeverTallest:false,accuracy:false},b=a.extend(c,b);if(typeof b.width=="string"&&(b.width=parseInt(b.width),isNaN(b.width)))b.width=c.width;return this.each(function(){function c(d,f,e,h){for(;e.height()<h&&f[0].childNodes.length;)d.append(f[0].childNodes[0]);if(d[0].childNodes.length!=0){var g=d[0].childNodes,g=g[g.length-
1];d[0].removeChild(g);g=a(g);if(g[0].nodeType==3){var k=g[0].nodeValue,n=b.width/18;if(b.accuracy)n=b.accuracy;var o;for(o=null;e.height()<h&&k.length;)o=k.indexOf(" ",n)!="-1"?k.substring(0,k.indexOf(" ",n)):k,o=document.createTextNode(o),d.append(o),k=k.length>n?k.substring(k.indexOf(" ",n)):"";e.height()>=h&&o!=null&&(d[0].removeChild(o),k=o.nodeValue+k);if(k.length)g[0].nodeValue=k;else return false}f.children().length?f.prepend(g):f.append(g);return g[0].nodeType==3}}function e(a,b,f,h){b.children().length&&
($cloneMe=b.children(":first"),$clone=$cloneMe.clone(true),$clone.prop("nodeType")==1&&!$clone.hasClass("dontend")&&(a.append($clone),$clone.is("img")&&f.height()<h+20?$cloneMe.remove():!$cloneMe.hasClass("dontsplit")&&f.height()<h+20?$cloneMe.remove():$clone.is("img")||$cloneMe.hasClass("dontsplit")?$clone.remove():($clone.empty(),c($clone,$cloneMe,f,h)||$cloneMe.children().length&&e($clone,$cloneMe,f,h),$clone.get(0).childNodes.length==0&&$clone.remove())))}function g(){if(!(h.data("columnized")&&
h.children().length==1)){h.data("columnized",true);h.data("columnizing",true);h.empty();h.append(a("<div class='first last column' style='width:100%; float: "+b.columnFloat+";'></div>"));$col=h.children().eq(h.children().length-1);$destroyable=o.clone(true);if(b.overflow){targetHeight=b.overflow.height;c($col,$destroyable,$col,targetHeight);for($destroyable.contents().find(":first-child").hasClass("dontend")||e($col,$destroyable,$col,targetHeight);i($col.children(":last").length&&$col.children(":last").get(0));){var f=
$col.children(":last");f.remove();$destroyable.prepend(f)}for(var f="",g=document.createElement("DIV");$destroyable[0].childNodes.length>0;){for(var k=$destroyable[0].childNodes[0],n=0;n<k.attributes.length;n++)k.attributes[n].nodeName.indexOf("jQuery")==0&&k.removeAttribute(k.attributes[n].nodeName);g.innerHTML="";g.appendChild($destroyable[0].childNodes[0]);f+=g.innerHTML}a(b.overflow.id)[0].innerHTML=f}else $col.append($destroyable);h.data("columnizing",false);b.overflow&&b.overflow.doneFunc()}}
function i(b){return b.nodeType!=1?false:a(b).hasClass("dontend")?true:b.childNodes.length==0?false:i(b.childNodes[b.childNodes.length-1])}function j(){if(p!=h.width()){p=h.width();var k=Math.round(h.width()/b.width);if(b.columns)k=b.columns;if(k<=1)return g();if(!h.data("columnizing")){h.data("columnized",true);h.data("columnizing",true);h.empty();h.append(a("<div style='width:"+Math.floor(100/k)+"%; float: "+b.columnFloat+";'></div>"));x=h.children(":last");x.append(o.clone());n=x.height();h.empty();
var l=n/k,j=3,s=false;if(b.overflow)j=1,l=b.overflow.height;else if(b.height&&b.width)j=1,l=b.height,s=true;for(var v=0;v<j;v++){h.empty();var t;try{t=o.clone(true)}catch(m){t=o.clone()}t.css("visibility","hidden");for(var u=0;u<k;u++){var D=u==0?"first column":"column",D=u==k-1?"last "+D:D;h.append(a("<div class='"+D+"' style='width:"+Math.floor(100/k)+"%; float: "+b.columnFloat+";'></div>"))}for(u=0;u<k-(b.overflow?0:1)||s&&t.contents().length;){h.children().length<=u&&h.append(a("<div class='"+
D+"' style='width:"+Math.floor(100/k)+"%; float: "+b.columnFloat+";'></div>"));var x=h.children().eq(u);c(x,t,x,l);for(t.contents().find(":first-child").hasClass("dontend")||e(x,t,x,l);i(x.children(":last").length&&x.children(":last").get(0));){var A=x.children(":last");A.remove();t.prepend(A)}u++}if(b.overflow&&!s)if(document.all&&navigator.appVersion.indexOf("MSIE 7.")!=-1){for(var A="",C=document.createElement("DIV");t[0].childNodes.length>0;){for(var y=t[0].childNodes[0],u=0;u<y.attributes.length;u++)y.attributes[u].nodeName.indexOf("jQuery")==
0&&y.removeAttribute(y.attributes[u].nodeName);C.innerHTML="";C.appendChild(t[0].childNodes[0]);A+=C.innerHTML}a(b.overflow.id)[0].innerHTML=A}else a(b.overflow.id).empty().append(t.contents().clone(true));else if(s)h.children().each(function(a){x=h.children().eq(a);x.width(b.width+"px");a==0?x.addClass("first"):a==h.children().length-1?x.addClass("last"):(x.removeClass("first"),x.removeClass("last"))}),h.width(h.children().length*b.width+"px");else{for(x=h.children().eq(h.children().length-1);t.contents().length;)x.append(t.contents(":first"));
x.height();var B=0,I=1E7,E=0,J=false;h.children().each(function(a){return function(b){b=a.children().eq(b).height();J=false;B+=b;b>E&&(E=b,J=true);b<I&&(I=b)}}(h));u=B/k;if(b.lastNeverTallest&&J)if(f+=30,f<100)l+=30,v==j-1&&j++;else{debugger;v=j}else E-I>30?l=u+30:Math.abs(u-l)>20?l=u:v=j}h.append(a("<br style='clear:both;'>"))}h.find(".column").find(":first.removeiffirst").remove();h.find(".column").find(":last.removeiflast").remove();h.data("columnizing",false);b.overflow&&b.overflow.doneFunc();
b.doneFunc()}}}var h=b.target?a(b.target):a(this),n=a(this).height(),o=a("<div></div>"),p=0,f=0;o.append(a(this).contents().clone(true));if(!b.ignoreImageLoading&&!b.target&&!h.data("imageLoaded")&&(h.data("imageLoaded",true),a(this).find("img").length>0)){var k=function(a,c){return function(){a.data("firstImageLoaded")||(a.data("firstImageLoaded","true"),a.empty().append(c.children().clone(true)),a.columnize(b))}}(a(this),o);a(this).find("img").one("load",k);a(this).find("img").one("abort",k);return}h.empty();
j();b.buildOnce||a(window).resize(function(){!b.buildOnce&&a.browser.msie?(h.data("timeout")&&clearTimeout(h.data("timeout")),h.data("timeout",setTimeout(j,200))):b.buildOnce||j()})})}})(jQuery);
(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,g=d.slice,i=d.unshift,j=e.toString,h=e.hasOwnProperty,n=d.forEach,o=d.map,p=d.reduce,f=d.reduceRight,k=d.filter,q=d.every,l=d.some,z=d.indexOf,s=d.lastIndexOf,e=Array.isArray,v=Object.keys,t=Function.prototype.bind,m=function(a){return new C(a)};typeof module!=="undefined"&&module.exports?(module.exports=m,m._=m):a._=m;m.VERSION="1.1.7";var u=m.each=m.forEach=function(a,b,d){if(a!=null)if(n&&a.forEach===n)a.forEach(b,d);else if(a.length===
+a.length)for(var f=0,e=a.length;f<e;f++){if(f in a&&b.call(d,a[f],f,a)===c)break}else for(f in a)if(h.call(a,f)&&b.call(d,a[f],f,a)===c)break};m.map=function(a,b,c){var d=[];if(a==null)return d;if(o&&a.map===o)return a.map(b,c);u(a,function(a,f,e){d[d.length]=b.call(c,a,f,e)});return d};m.reduce=m.foldl=m.inject=function(a,b,c,d){var f=c!==void 0;a==null&&(a=[]);if(p&&a.reduce===p)return d&&(b=m.bind(b,d)),f?a.reduce(b,c):a.reduce(b);u(a,function(a,e,h){f?c=b.call(d,c,a,e,h):(c=a,f=true)});if(!f)throw new TypeError("Reduce of empty array with no initial value");
return c};m.reduceRight=m.foldr=function(a,b,c,d){a==null&&(a=[]);if(f&&a.reduceRight===f)return d&&(b=m.bind(b,d)),c!==void 0?a.reduceRight(b,c):a.reduceRight(b);a=(m.isArray(a)?a.slice():m.toArray(a)).reverse();return m.reduce(a,b,c,d)};m.find=m.detect=function(a,b,c){var d;D(a,function(a,f,e){if(b.call(c,a,f,e))return d=a,true});return d};m.filter=m.select=function(a,b,c){var d=[];if(a==null)return d;if(k&&a.filter===k)return a.filter(b,c);u(a,function(a,f,e){b.call(c,a,f,e)&&(d[d.length]=a)});
return d};m.reject=function(a,b,c){var d=[];if(a==null)return d;u(a,function(a,f,e){b.call(c,a,f,e)||(d[d.length]=a)});return d};m.every=m.all=function(a,b,d){var f=true;if(a==null)return f;if(q&&a.every===q)return a.every(b,d);u(a,function(a,e,h){if(!(f=f&&b.call(d,a,e,h)))return c});return f};var D=m.some=m.any=function(a,b,d){var b=b||m.identity,f=false;if(a==null)return f;if(l&&a.some===l)return a.some(b,d);u(a,function(a,e,h){if(f|=b.call(d,a,e,h))return c});return!!f};m.include=m.contains=function(a,
b){var c=false;if(a==null)return c;if(z&&a.indexOf===z)return a.indexOf(b)!=-1;D(a,function(a){if(c=a===b)return true});return c};m.invoke=function(a,b){var c=g.call(arguments,2);return m.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})};m.pluck=function(a,b){return m.map(a,function(a){return a[b]})};m.max=function(a,b,c){if(!b&&m.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};u(a,function(a,f,e){f=b?b.call(c,a,f,e):a;f>=d.computed&&(d={value:a,computed:f})});return d.value};
m.min=function(a,b,c){if(!b&&m.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};u(a,function(a,f,e){f=b?b.call(c,a,f,e):a;f<d.computed&&(d={value:a,computed:f})});return d.value};m.sortBy=function(a,b,c){return m.pluck(m.map(a,function(a,d,f){return{value:a,criteria:b.call(c,a,d,f)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")};m.groupBy=function(a,b){var c={};u(a,function(a,d){var f=b(a,d);(c[f]||(c[f]=[])).push(a)});return c};m.sortedIndex=
function(a,b,c){c||(c=m.identity);for(var d=0,f=a.length;d<f;){var e=d+f>>1;c(a[e])<c(b)?d=e+1:f=e}return d};m.toArray=function(a){return!a?[]:a.toArray?a.toArray():m.isArray(a)?g.call(a):m.isArguments(a)?g.call(a):m.values(a)};m.size=function(a){return m.toArray(a).length};m.first=m.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]};m.rest=m.tail=function(a,b,c){return g.call(a,b==null||c?1:b)};m.last=function(a){return a[a.length-1]};m.compact=function(a){return m.filter(a,function(a){return!!a})};
m.flatten=function(a){return m.reduce(a,function(a,b){if(m.isArray(b))return a.concat(m.flatten(b));a[a.length]=b;return a},[])};m.without=function(a){return m.difference(a,g.call(arguments,1))};m.uniq=m.unique=function(a,b){return m.reduce(a,function(a,c,d){if(0==d||(b===true?m.last(a)!=c:!m.include(a,c)))a[a.length]=c;return a},[])};m.union=function(){return m.uniq(m.flatten(arguments))};m.intersection=m.intersect=function(a){var b=g.call(arguments,1);return m.filter(m.uniq(a),function(a){return m.every(b,
function(b){return m.indexOf(b,a)>=0})})};m.difference=function(a,b){return m.filter(a,function(a){return!m.include(b,a)})};m.zip=function(){for(var a=g.call(arguments),b=m.max(m.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=m.pluck(a,""+d);return c};m.indexOf=function(a,b,c){if(a==null)return-1;var d;if(c)return c=m.sortedIndex(a,b),a[c]===b?c:-1;if(z&&a.indexOf===z)return a.indexOf(b);c=0;for(d=a.length;c<d;c++)if(a[c]===b)return c;return-1};m.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&
a.lastIndexOf===s)return a.lastIndexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1};m.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),f=0,e=Array(d);f<d;)e[f++]=a,a+=c;return e};m.bind=function(a,b){if(a.bind===t&&t)return t.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return function(){return a.apply(b,c.concat(g.call(arguments)))}};m.bindAll=function(a){var b=g.call(arguments,1);b.length==0&&(b=m.functions(a));
u(b,function(b){a[b]=m.bind(a[b],a)});return a};m.memoize=function(a,b){var c={};b||(b=m.identity);return function(){var d=b.apply(this,arguments);return h.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}};m.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)};m.defer=function(a){return m.delay.apply(m,[a,1].concat(g.call(arguments,1)))};var x=function(a,b,c){var d;return function(){var f=this,e=arguments,h=function(){d=null;a.apply(f,e)};c&&clearTimeout(d);
if(c||!d)d=setTimeout(h,b)}};m.throttle=function(a,b){return x(a,b,false)};m.debounce=function(a,b){return x(a,b,true)};m.once=function(a){var b=false,c;return function(){if(b)return c;b=true;return c=a.apply(this,arguments)}};m.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}};m.compose=function(){var a=g.call(arguments);return function(){for(var b=g.call(arguments),c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}};m.after=function(a,b){return function(){if(--a<
1)return b.apply(this,arguments)}};m.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)h.call(a,c)&&(b[b.length]=c);return b};m.values=function(a){return m.map(a,m.identity)};m.functions=m.methods=function(a){var b=[],c;for(c in a)m.isFunction(a[c])&&b.push(c);return b.sort()};m.extend=function(a){u(g.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])});return a};m.defaults=function(a){u(g.call(arguments,1),function(b){for(var c in b)a[c]==
null&&(a[c]=b[c])});return a};m.clone=function(a){return m.isArray(a)?a.slice():m.extend({},a)};m.tap=function(a,b){b(a);return a};m.isEqual=function(a,b){if(a===b)return true;var c=typeof a;if(c!=typeof b)return false;if(a==b)return true;if(!a&&b||a&&!b)return false;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(a.isEqual)return a.isEqual(b);if(b.isEqual)return b.isEqual(a);if(m.isDate(a)&&m.isDate(b))return a.getTime()===b.getTime();if(m.isNaN(a)&&m.isNaN(b))return false;if(m.isRegExp(a)&&
m.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return false;if(a.length&&a.length!==b.length)return false;var c=m.keys(a),d=m.keys(b);if(c.length!=d.length)return false;for(var f in a)if(!(f in b)||!m.isEqual(a[f],b[f]))return false;return true};m.isEmpty=function(a){if(m.isArray(a)||m.isString(a))return a.length===0;for(var b in a)if(h.call(a,b))return false;return true};m.isElement=function(a){return!!(a&&a.nodeType==
1)};m.isArray=e||function(a){return j.call(a)==="[object Array]"};m.isObject=function(a){return a===Object(a)};m.isArguments=function(a){return!(!a||!h.call(a,"callee"))};m.isFunction=function(a){return!(!a||!a.constructor||!a.call||!a.apply)};m.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)};m.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)};m.isNaN=function(a){return a!==a};m.isBoolean=function(a){return a===true||a===false};m.isDate=function(a){return!(!a||
!a.getTimezoneOffset||!a.setUTCFullYear)};m.isRegExp=function(a){return!(!a||!a.test||!a.exec||!(a.ignoreCase||a.ignoreCase===false))};m.isNull=function(a){return a===null};m.isUndefined=function(a){return a===void 0};m.noConflict=function(){a._=b;return this};m.identity=function(a){return a};m.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};m.mixin=function(a){u(m.functions(a),function(b){B(b,m[b]=a[b])})};var A=0;m.uniqueId=function(a){var b=A++;return a?a+b:b};m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,
interpolate:/<%=([\s\S]+?)%>/g};m.template=function(a,b){var c=m.templateSettings,c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",c=new Function("obj",
c);return b?c(b):c};var C=function(a){this._wrapped=a};m.prototype=C.prototype;var y=function(a,b){return b?m(a).chain():a},B=function(a,b){C.prototype[a]=function(){var a=g.call(arguments);i.call(a,this._wrapped);return y(b.apply(m,a),this._chain)}};m.mixin(m);u("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=d[a];C.prototype[a]=function(){b.apply(this._wrapped,arguments);return y(this._wrapped,this._chain)}});u(["concat","join","slice"],function(a){var b=d[a];C.prototype[a]=
function(){return y(b.apply(this._wrapped,arguments),this._chain)}});C.prototype.chain=function(){this._chain=true;return this};C.prototype.value=function(){return this._wrapped}})();
(function(a){function b(b,d){this.$element=a(b);this.options=d;this.enabled=true;this.fixTitle()}b.prototype={show:function(){var b=this.getTitle();if(b&&this.enabled){var d=this.tip();d.find(".tipsy-inner")[this.options.html?"html":"text"](b);d[0].className="tipsy";d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var b=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),e=d[0].offsetWidth,g=d[0].offsetHeight,
i=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,j;switch(i.charAt(0)){case "n":j={top:b.top+b.height+this.options.offset,left:b.left+b.width/2-e/2};break;case "s":j={top:b.top-g-this.options.offset,left:b.left+b.width/2-e/2};break;case "e":j={top:b.top+b.height/2-g/2,left:b.left-e-this.options.offset};break;case "w":j={top:b.top+b.height/2-g/2,left:b.left+b.width+this.options.offset}}if(i.length==2)j.left=i.charAt(1)=="w"?b.left+b.width/2-
15:b.left+b.width/2-e+15;d.css(j).addClass("tipsy-"+i);d.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+i.charAt(0);this.options.className&&d.addClass(typeof this.options.className=="function"?this.options.className.call(this.$element[0]):this.options.className);this.options.fade?d.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):d.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):
this.tip().remove()},fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("original-title")!="string")a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,e=this.options;this.fixTitle();e=this.options;typeof e.title=="string"?a=b.attr(e.title=="title"?"original-title":e.title):typeof e.title=="function"&&(a=e.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||e.fallback},tip:function(){if(!this.$tip)this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');
return this.$tip},validate:function(){if(!this.$element[0].parentNode)this.hide(),this.options=this.$element=null},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};a.fn.tipsy=function(c){function d(d){var e=a.data(d,"tipsy");e||(e=new b(d,a.fn.tipsy.elementOptions(d,c)),a.data(d,"tipsy",e));return e}function e(){var a=d(this);a.hoverState="in";c.delayIn==0?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&
a.show()},c.delayIn))}function g(){var a=d(this);a.hoverState="out";c.delayOut==0?a.hide():setTimeout(function(){a.hoverState=="out"&&a.hide()},c.delayOut)}if(c===true)return this.data("tipsy");else if(typeof c=="string"){var i=this.data("tipsy");if(i)i[c]();return this}c=a.extend({},a.fn.tipsy.defaults,c);c.live||this.each(function(){d(this)});if(c.trigger!="manual"){var i=c.live?"live":"bind",j=c.trigger=="hover"?"mouseleave":"blur";this[i](c.trigger=="hover"?"mouseenter":"focus",e)[i](j,g)}return this};
a.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",html:false,live:false,offset:0,opacity:0.8,title:"title",trigger:"hover"};a.fn.tipsy.elementOptions=function(b,d){return a.metadata?a.extend({},d,a(b).metadata()):d};a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"};a.fn.tipsy.autoBounds=
function(b,d){return function(){var e=d[0],g=d.length>1?d[1]:false,i=a(document).scrollTop()+b,j=a(document).scrollLeft()+b,h=a(this);h.offset().top<i&&(e="n");h.offset().left<j&&(g="w");a(window).width()+a(document).scrollLeft()-h.offset().left<b&&(g="e");a(window).height()+a(document).scrollTop()-h.offset().top<b&&(e="s");return e+(g?g:"")}}})(jQuery);
(function(a){var b,c,d;a.fn.simpledraw=function(b,e,g){if(g&&this[0].VCanvas)return this[0].VCanvas;b===void 0&&(b=a(this).innerWidth());e===void 0&&(e=a(this).innerHeight());return a.browser.hasCanvas?new c(b,e,this):a.browser.msie?new d(b,e,this):false};var e=[];a.fn.sparkline=function(b,c){return this.each(function(){var d=new a.fn.sparkline.options(this,c),g=function(){var c,e,g;if(b==="html"||b===void 0){c=this.getAttribute(d.get("tagValuesAttribute"));if(c===void 0||c===null)c=a(this).html();
c=c.replace(/(^\s*<\!--)|(--\>\s*$)|\s+/g,"").split(",")}else c=b;e=d.get("width")=="auto"?c.length*d.get("defaultPixelsPerValue"):d.get("width");if(d.get("height")=="auto"){if(!d.get("composite")||!this.VCanvas){var n=document.createElement("span");n.innerHTML="a";a(this).html(n);g=a(n).innerHeight();a(n).remove()}}else g=d.get("height");a.fn.sparkline[d.get("type")].call(this,c,d,e,g)};a(this).html()&&a(this).is(":hidden")||a.fn.jquery<"1.3.0"&&a(this).parents().is(":hidden")||!a(this).parents("body").length?
e.push([this,g]):g.call(this)})};a.fn.sparkline.defaults={common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:false,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:false},line:{spotColor:"#f80",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:void 0,normalRangeMax:void 0,normalRangeColor:"#ccc",drawNormalOnTop:false,chartRangeMin:void 0,chartRangeMax:void 0,chartRangeMinX:void 0,chartRangeMaxX:void 0},
bar:{barColor:"#00f",negBarColor:"#f44",zeroColor:void 0,nullColor:void 0,zeroAxis:void 0,barWidth:4,barSpacing:1,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:false,colorMap:void 0},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{}},discrete:{lineHeight:"auto",thresholdColor:void 0,thresholdValue:0,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:false},bullet:{targetColor:"red",targetWidth:3,performanceColor:"blue",rangeColors:["#D3DAFE",
"#A8B6FF","#7F94FF"],base:void 0},pie:{sliceColors:["#f00","#0f0","#00f"]},box:{raw:false,boxLineColor:"black",boxFillColor:"#cdf",whiskerColor:"black",outlierLineColor:"#333",outlierFillColor:"white",medianColor:"red",showOutliers:true,outlierIQR:1.5,spotRadius:1.5,target:void 0,targetColor:"#4a2",chartRangeMax:void 0,chartRangeMin:void 0}};a.sparkline_display_visible=function(){for(var b=e.length-1;b>=0;b--){var c=e[b][0];a(c).is(":visible")&&!a(c).parents().is(":hidden")&&(e[b][1].call(c),e.splice(b,
1))}};var g={},i=function(a){switch(a){case "undefined":a=void 0;break;case "null":a=null;break;case "true":a=true;break;case "false":a=false;break;default:var b=parseFloat(a);a==b&&(a=b)}return a};a.fn.sparkline.options=function(b,c){this.userOptions=c=c||{};this.tag=b;this.tagValCache={};var d=a.fn.sparkline.defaults,e=d.common;this.tagOptionsPrefix=c.enableTagOptions&&(c.tagOptionsPrefix||e.tagOptionsPrefix);var f=this.getTagSetting("type");this.mergedOptions=a.extend({},e,f===g?d[c.type||e.type]:
d[f],c)};a.fn.sparkline.options.prototype.getTagSetting=function(a){var b;b=this.tagOptionsPrefix;if(b===false||b===void 0)return g;if(this.tagValCache.hasOwnProperty(a))a=this.tagValCache.key;else{a=this.tag.getAttribute(b+a);if(a===void 0||a===null)a=g;else if(a.substr(0,1)=="["){a=a.substr(1,a.length-2).split(",");for(b=a.length;b--;)a[b]=i(a[b].replace(/(^\s*)|(\s*$)/g,""))}else if(a.substr(0,1)=="{"){var c=a.substr(1,a.length-2).split(","),a={};for(b=c.length;b--;){var d=c[b].split(":",2);a[d[0].replace(/(^\s*)|(\s*$)/g,
"")]=i(d[1].replace(/(^\s*)|(\s*$)/g,""))}}else a=i(a);this.tagValCache.key=a}return a};a.fn.sparkline.options.prototype.get=function(a){var b=this.getTagSetting(a);return b!==g?b:this.mergedOptions[a]};a.fn.sparkline.line=function(b,c,d,e){for(var f=[],g=[],i=[],l=0;l<b.length;l++){var j=b[l],s=typeof b[l]=="string",v=typeof b[l]=="object"&&b[l]instanceof Array,t=s&&b[l].split(":");s&&t.length==2?(f.push(Number(t[0])),g.push(Number(t[1])),i.push(Number(t[1]))):v?(f.push(j[0]),g.push(j[1]),i.push(j[1])):
(f.push(l),b[l]===null||b[l]=="null"?g.push(null):(g.push(Number(j)),i.push(Number(j))))}c.get("xvalues")&&(f=c.get("xvalues"));var j=b=Math.max.apply(Math,i),m=Math.min.apply(Math,i),i=m,l=Math.max.apply(Math,f),s=Math.min.apply(Math,f),u=c.get("normalRangeMin"),D=c.get("normalRangeMax");u!==void 0&&(u<m&&(m=u),D>b&&(b=D));if(c.get("chartRangeMin")!==void 0&&(c.get("chartRangeClip")||c.get("chartRangeMin")<m))m=c.get("chartRangeMin");if(c.get("chartRangeMax")!==void 0&&(c.get("chartRangeClip")||
c.get("chartRangeMax")>b))b=c.get("chartRangeMax");if(c.get("chartRangeMinX")!==void 0&&(c.get("chartRangeClipX")||c.get("chartRangeMinX")<s))s=c.get("chartRangeMinX");if(c.get("chartRangeMaxX")!==void 0&&(c.get("chartRangeClipX")||c.get("chartRangeMaxX")>l))l=c.get("chartRangeMaxX");var v=l-s===0?1:l-s,x=b-m===0?1:b-m,t=g.length-1;if(t<1)this.innerHTML="";else{var A=a(this).simpledraw(d,e,c.get("composite"));if(A){var C=A.pixel_width,y=A.pixel_height,B=0,I=0;if((d=c.get("spotRadius"))&&(C<d*4||y<
d*4))d=0;if(d){if(c.get("minSpotColor")||c.get("spotColor")&&g[t]==m)y-=Math.ceil(d);if(c.get("maxSpotColor")||c.get("spotColor")&&g[t]==b)y-=Math.ceil(d),B+=Math.ceil(d);if(c.get("minSpotColor")||c.get("maxSpotColor")&&(g[0]==m||g[0]==b))I+=Math.ceil(d),C-=Math.ceil(d);if(c.get("spotColor")||c.get("minSpotColor")||c.get("maxSpotColor")&&(g[t]==m||g[t]==b))C-=Math.ceil(d)}y--;e=function(){if(u!==void 0){var a=B+Math.round(y-y*((D-m)/x)),b=Math.round(y*(D-u)/x);A.drawRect(I,a,C,b,void 0,c.get("normalRangeColor"))}};
c.get("drawNormalOnTop")||e();for(var E=[],J=[E],F,K,O=g.length,l=0;l<O;l++)F=f[l],K=g[l],K===null?l&&g[l-1]!==null&&(E=[],J.push(E)):(K<m&&(K=m),K>b&&(K=b),E.length||E.push([I+Math.round((F-s)*(C/v)),B+y]),E.push([I+Math.round((F-s)*(C/v)),B+Math.round(y-y*((K-m)/x))]));F=[];K=[];O=J.length;for(l=0;l<O;l++)E=J[l],E.length&&(c.get("fillColor")&&(E.push([E[E.length-1][0],B+y-1]),K.push(E.slice(0)),E.pop()),E.length>2&&(E[0]=[E[0][0],E[1][1]]),F.push(E));O=K.length;for(l=0;l<O;l++)A.drawShape(K[l],
void 0,c.get("fillColor"));c.get("drawNormalOnTop")&&e();O=F.length;for(l=0;l<O;l++)A.drawShape(F[l],c.get("lineColor"),void 0,c.get("lineWidth"));d&&c.get("spotColor")&&A.drawCircle(I+Math.round(f[f.length-1]*(C/v)),B+Math.round(y-y*((g[t]-m)/x)),d,void 0,c.get("spotColor"));b!=i&&(d&&c.get("minSpotColor")&&(F=f[a.inArray(i,g)],A.drawCircle(I+Math.round((F-s)*(C/v)),B+Math.round(y-y*((i-m)/x)),d,void 0,c.get("minSpotColor"))),d&&c.get("maxSpotColor")&&(F=f[a.inArray(j,g)],A.drawCircle(I+Math.round((F-
s)*(C/v)),B+Math.round(y-y*((j-m)/x)),d,void 0,c.get("maxSpotColor"))))}else this.innerHTML=""}};a.fn.sparkline.bar=function(b,c,d,e){for(var d=b.length*c.get("barWidth")+(b.length-1)*c.get("barSpacing"),f=[],g=0,i=b.length;g<i;g++)b[g]=="null"||b[g]===null?b[g]=null:(b[g]=Number(b[g]),f.push(Number(b[g])));i=Math.max.apply(Math,f);f=Math.min.apply(Math,f);if(c.get("chartRangeMin")!==void 0&&(c.get("chartRangeClip")||c.get("chartRangeMin")<f))f=c.get("chartRangeMin");if(c.get("chartRangeMax")!==void 0&&
(c.get("chartRangeClip")||c.get("chartRangeMax")>i))i=c.get("chartRangeMax");var l=c.get("zeroAxis");l===void 0&&(l=f<0);var j=i-f===0?1:i-f,s,v;a.isArray(c.get("colorMap"))?(s=c.get("colorMap"),v=null):(s=null,v=c.get("colorMap"));if(d=a(this).simpledraw(d,e,c.get("composite")))for(var t,m=d.pixel_height,u=f<0&&l?m-Math.round(m*(Math.abs(f)/j))-1:m-1,g=b.length;g--;){var D=g*(c.get("barWidth")+c.get("barSpacing")),x,A=b[g];if(A===null)if(c.get("nullColor"))t=c.get("nullColor"),e=1,x=l&&f<0?u:m-e;
else continue;else if(A<f&&(A=f),A>i&&(A=i),t=A<0?c.get("negBarColor"):c.get("barColor"),l&&f<0?(e=Math.round(m*(Math.abs(A)/j))+1,x=A<0?u:u-e):(e=Math.round(m*((A-f)/j))+1,x=m-e),A===0&&c.get("zeroColor")!==void 0&&(t=c.get("zeroColor")),v&&v[A]?t=v[A]:s&&s.length>g&&(t=s[g]),t===null)continue;d.drawRect(D,x,c.get("barWidth")-1,e-1,t,t)}else this.innerHTML=""};a.fn.sparkline.tristate=function(b,c,d,e){var b=a.map(b,Number),d=b.length*c.get("barWidth")+(b.length-1)*c.get("barSpacing"),f,g;a.isArray(c.get("colorMap"))?
(f=c.get("colorMap"),g=null):(f=null,g=c.get("colorMap"));if(d=a(this).simpledraw(d,e,c.get("composite")))for(var i=Math.round(d.pixel_height/2),l=b.length;l--;){var j=l*(c.get("barWidth")+c.get("barSpacing")),s,v;b[l]<0?(s=i,e=i-1,v=c.get("negBarColor")):b[l]>0?(s=0,e=i-1,v=c.get("posBarColor")):(s=i-1,e=2,v=c.get("zeroBarColor"));g&&g[b[l]]?v=g[b[l]]:f&&f.length>l&&(v=f[l]);v!==null&&d.drawRect(j,s,c.get("barWidth")-1,e-1,v,v)}else this.innerHTML=""};a.fn.sparkline.discrete=function(b,c,d,e){var b=
a.map(b,Number),d=c.get("width")=="auto"?b.length*2:d,f=Math.floor(d/b.length);if(d=a(this).simpledraw(d,e,c.get("composite"))){var g=d.pixel_height,e=c.get("lineHeight")=="auto"?Math.round(g*0.3):c.get("lineHeight");g-=e;var i=Math.min.apply(Math,b),l=Math.max.apply(Math,b);if(c.get("chartRangeMin")!==void 0&&(c.get("chartRangeClip")||c.get("chartRangeMin")<i))i=c.get("chartRangeMin");if(c.get("chartRangeMax")!==void 0&&(c.get("chartRangeClip")||c.get("chartRangeMax")>l))l=c.get("chartRangeMax");
for(var j=l-i,s=b.length;s--;){var v=b[s];v<i&&(v=i);v>l&&(v=l);var t=s*f,m=Math.round(g-g*((v-i)/j));d.drawLine(t,m,t,m+e,c.get("thresholdColor")&&v<c.get("thresholdValue")?c.get("thresholdColor"):c.get("lineColor"))}}else this.innerHTML=""};a.fn.sparkline.bullet=function(b,c,d,e){b=a.map(b,Number);d=c.get("width")=="auto"?"4.0em":d;if((d=a(this).simpledraw(d,e,c.get("composite")))&&b.length>1){var f=d.pixel_width-Math.ceil(c.get("targetWidth")/2),e=d.pixel_height,g=Math.min.apply(Math,b),i=Math.max.apply(Math,
b),g=c.get("base")===void 0?g<0?g:0:c.get("base");i-=g;for(var l=2,j=b.length;l<j;l++){var s=Math.round(f*((b[l]-g)/i));d.drawRect(0,0,s-1,e-1,c.get("rangeColors")[l-2],c.get("rangeColors")[l-2])}l=Math.round(f*((b[1]-g)/i));d.drawRect(0,Math.round(e*0.3),l-1,Math.round(e*0.4)-1,c.get("performanceColor"),c.get("performanceColor"));b=Math.round(f*((b[0]-g)/i)-c.get("targetWidth")/2);f=Math.round(e*0.1);e-=f*2;d.drawRect(b,f,c.get("targetWidth")-1,e-1,c.get("targetColor"),c.get("targetColor"))}else this.innerHTML=
""};a.fn.sparkline.pie=function(b,c,d,e){b=a.map(b,Number);d=c.get("width")=="auto"?e:d;if((d=a(this).simpledraw(d,e,c.get("composite")))&&b.length>1){for(var e=Math.floor(Math.min(d.pixel_width,d.pixel_height)/2),f=0,g=0,i=2*Math.PI,l=b.length;l--;)f+=b[l];c.get("offset")&&(g+=2*Math.PI*(c.get("offset")/360));for(var j=b.length,l=0;l<j;l++){var s=g,v=g;f>0&&(v=g+i*(b[l]/f));d.drawPieSlice(e,e,e,s,v,void 0,c.get("sliceColors")[l%c.get("sliceColors").length]);g=v}}};var j=function(a,b){if(b==2){var c=
Math.floor(a.length/2);return a.length%2?a[c]:(a[c]+a[c+1])/2}else return c=Math.floor(a.length/4),a.length%2?(a[c*b]+a[c*b+1])/2:a[c*b]};a.fn.sparkline.box=function(b,c,d,e){var b=a.map(b,Number),d=c.get("width")=="auto"?"4.0em":d,f=c.get("chartRangeMin")===void 0?Math.min.apply(Math,b):c.get("chartRangeMin"),g=c.get("chartRangeMax")===void 0?Math.max.apply(Math,b):c.get("chartRangeMax"),d=a(this).simpledraw(d,e,c.get("composite")),i=b.length,l,z,s,v,t,m,u;if(d&&b.length>1){var D=d.pixel_width,e=
d.pixel_height;if(c.get("raw"))c.get("showOutliers")&&b.length>5?(z=b[0],l=b[1],s=b[2],v=b[3],t=b[4],m=b[5],u=b[6]):(l=b[0],s=b[1],v=b[2],t=b[3],m=b[4]);else{b.sort(function(a,b){return a-b});s=j(b,1);v=j(b,2);t=j(b,3);var x=t-s;if(c.get("showOutliers")){m=l=void 0;for(z=0;z<i;z++)l===void 0&&b[z]>s-x*c.get("outlierIQR")&&(l=b[z]),b[z]<t+x*c.get("outlierIQR")&&(m=b[z]);z=b[0];u=b[i-1]}else l=b[0],m=b[i-1]}b=D/(g-f+1);i=0;c.get("showOutliers")&&(i=Math.ceil(c.get("spotRadius")),D-=2*Math.ceil(c.get("spotRadius")),
b=D/(g-f+1),z<l&&d.drawCircle((z-f)*b+i,e/2,c.get("spotRadius"),c.get("outlierLineColor"),c.get("outlierFillColor")),u>m&&d.drawCircle((u-f)*b+i,e/2,c.get("spotRadius"),c.get("outlierLineColor"),c.get("outlierFillColor")));d.drawRect(Math.round((s-f)*b+i),Math.round(e*0.1),Math.round((t-s)*b),Math.round(e*0.8),c.get("boxLineColor"),c.get("boxFillColor"));d.drawLine(Math.round((l-f)*b+i),Math.round(e/2),Math.round((s-f)*b+i),Math.round(e/2),c.get("lineColor"));d.drawLine(Math.round((l-f)*b+i),Math.round(e/
4),Math.round((l-f)*b+i),Math.round(e-e/4),c.get("whiskerColor"));d.drawLine(Math.round((m-f)*b+i),Math.round(e/2),Math.round((t-f)*b+i),Math.round(e/2),c.get("lineColor"));d.drawLine(Math.round((m-f)*b+i),Math.round(e/4),Math.round((m-f)*b+i),Math.round(e-e/4),c.get("whiskerColor"));d.drawLine(Math.round((v-f)*b+i),Math.round(e*0.1),Math.round((v-f)*b+i),Math.round(e*0.9),c.get("medianColor"));c.get("target")&&(g=Math.ceil(c.get("spotRadius")),d.drawLine(Math.round((c.get("target")-f)*b+i),Math.round(e/
2-g),Math.round((c.get("target")-f)*b+i),Math.round(e/2+g),c.get("targetColor")),d.drawLine(Math.round((c.get("target")-f)*b+i-g),Math.round(e/2),Math.round((c.get("target")-f)*b+i+g),Math.round(e/2),c.get("targetColor")))}else this.innerHTML=""};a.browser.msie&&!document.namespaces.v&&document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");if(a.browser.hasCanvas===void 0)b=document.createElement("canvas"),a.browser.hasCanvas=b.getContext!==void 0;b=function(){};b.prototype={init:function(a,
b,c){this.width=a;this.height=b;this.target=c;c[0]&&(c=c[0]);c.VCanvas=this},drawShape:function(){alert("drawShape not implemented")},drawLine:function(a,b,c,d,f,e){return this.drawShape([[a,b],[c,d]],f,e)},drawCircle:function(){alert("drawCircle not implemented")},drawPieSlice:function(){alert("drawPieSlice not implemented")},drawRect:function(){alert("drawRect not implemented")},getElement:function(){return this.canvas},_insert:function(b,c){a(c).html(b)}};c=function(a,b,c){return this.init(a,b,
c)};c.prototype=a.extend(new b,{_super:b.prototype,init:function(b,c,d){this._super.init(b,c,d);this.canvas=document.createElement("canvas");d[0]&&(d=d[0]);d.VCanvas=this;a(this.canvas).css({display:"inline-block",width:b,height:c,verticalAlign:"top"});this._insert(this.canvas,d);this.pixel_height=a(this.canvas).height();this.pixel_width=a(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;a(this.canvas).css({width:this.pixel_width,height:this.pixel_height})},
_getContext:function(a,b,c){var d=this.canvas.getContext("2d");if(a!==void 0)d.strokeStyle=a;d.lineWidth=c===void 0?1:c;if(b!==void 0)d.fillStyle=b;return d},drawShape:function(a,b,c,d){d=this._getContext(b,c,d);d.beginPath();d.moveTo(a[0][0]+0.5,a[0][1]+0.5);for(var f=1,e=a.length;f<e;f++)d.lineTo(a[f][0]+0.5,a[f][1]+0.5);b!==void 0&&d.stroke();c!==void 0&&d.fill()},drawCircle:function(a,b,c,d,f){var e=this._getContext(d,f);e.beginPath();e.arc(a,b,c,0,2*Math.PI,false);d!==void 0&&e.stroke();f!==
void 0&&e.fill()},drawPieSlice:function(a,b,c,d,f,e,g){var i=this._getContext(e,g);i.beginPath();i.moveTo(a,b);i.arc(a,b,c,d,f,false);i.lineTo(a,b);i.closePath();e!==void 0&&i.stroke();g&&i.fill()},drawRect:function(a,b,c,d,f,e){return this.drawShape([[a,b],[a+c,b],[a+c,b+d],[a,b+d],[a,b]],f,e)}});d=function(a,b,c){return this.init(a,b,c)};d.prototype=a.extend(new b,{_super:b.prototype,init:function(b,c,d){this._super.init(b,c,d);d[0]&&(d=d[0]);d.VCanvas=this;this.canvas=document.createElement("span");
a(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:b,height:c,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,d);this.pixel_height=a(this.canvas).height();this.pixel_width=a(this.canvas).width();this.canvas.width=this.pixel_width;this.canvas.height=this.pixel_height;this.canvas.insertAdjacentHTML("beforeEnd",'<v:group coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" style="position:absolute;top:0;left:0;width:'+
this.pixel_width+"px;height="+this.pixel_height+'px;"></v:group>');this.group=a(this.canvas).children()[0]},drawShape:function(a,b,c,d){for(var f=[],e=0,g=a.length;e<g;e++)f[e]=""+a[e][0]+","+a[e][1];a=f.splice(0,1);e=f[0]==f[f.length-1]?"x ":"";this.group.insertAdjacentHTML("beforeEnd",'<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+(b===void 0?' stroked="false" ':' strokeWeight="'+(d===void 0?1:d)+'" strokeColor="'+b+'" ')+(c===void 0?' filled="false"':' fillColor="'+
c+'" filled="true" ')+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+a+" l "+f.join(", ")+" "+e+'e"> </v:shape>')},drawCircle:function(a,b,c,d,f){a-=c+1;b-=c+1;this.group.insertAdjacentHTML("beforeEnd","<v:oval "+(d===void 0?' stroked="false" ':' strokeWeight="1" strokeColor="'+d+'" ')+(f===void 0?' filled="false"':' fillColor="'+f+'" filled="true" ')+' style="position:absolute;top:'+b+"px; left:"+a+"px; width:"+
c*2+"px; height:"+c*2+'px"></v:oval>')},drawPieSlice:function(a,b,c,d,f,e,g){if(d!=f){f-d==2*Math.PI&&(d=0,f=2*Math.PI);var i=a+Math.round(Math.cos(d)*c),j=b+Math.round(Math.sin(d)*c),s=a+Math.round(Math.cos(f)*c),v=b+Math.round(Math.sin(f)*c);i==s&&j==v&&f-d<Math.PI||this.group.insertAdjacentHTML("beforeEnd",'<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+(e===void 0?' stroked="false" ':' strokeWeight="1" strokeColor="'+e+'" ')+(g===void 0?' filled="false"':' fillColor="'+
g+'" filled="true" ')+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+a+","+b+" wa "+[a-c,b-c,a+c,b+c,i,j,s,v].join(", ")+' x e"> </v:shape>')}},drawRect:function(a,b,c,d,f,e){return this.drawShape([[a,b],[a,b+d],[a+c,b+d],[a+c,b],[a,b]],f,e)}})})(jQuery);
(function(a){function b(b){var c=b||window.event,g=[].slice.call(arguments,1),i=0,j=0,h=0,b=a.event.fix(c);b.type="mousewheel";b.wheelDelta&&(i=b.wheelDelta/120);b.detail&&(i=-b.detail/3);h=i;c.axis!==void 0&&c.axis===c.HORIZONTAL_AXIS&&(h=0,j=-1*i);c.wheelDeltaY!==void 0&&(h=c.wheelDeltaY/120);c.wheelDeltaX!==void 0&&(j=-1*c.wheelDeltaX/120);g.unshift(b,i,j,h);return a.event.handle.apply(this,g)}var c=["DOMMouseScroll","mousewheel"];a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=
c.length;a;)this.addEventListener(c[--a],b,false);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,false);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
(function(a){function b(a){return typeof a=="object"?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,g){a(window).scrollTo(b,c,g)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1};c.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||
b.compatMode=="BackCompat"?b.body:b.documentElement})};a.fn.scrollTo=function(d,e,g){typeof e=="object"&&(g=e,e=0);typeof g=="function"&&(g={onAfter:g});d=="max"&&(d=9E9);g=a.extend({},c.defaults,g);e=e||g.speed||g.duration;g.queue=g.queue&&g.axis.length>1;g.queue&&(e/=2);g.offset=b(g.offset);g.over=b(g.over);return this._scrollable().each(function(){function i(a){h.animate(p,e,g.easing,a&&function(){a.call(this,d,g)})}var j=this,h=a(j),n=d,o,p={},f=h.is("html,body");switch(typeof n){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(n)){n=
b(n);break}n=a(n,this);case "object":if(n.is||n.style)o=(n=a(n)).offset()}a.each(g.axis.split(""),function(a,b){var d=b=="x"?"Left":"Top",e=d.toLowerCase(),s="scroll"+d,v=j[s],t=c.max(j,b);o?(p[s]=o[e]+(f?0:v-h.offset()[e]),g.margin&&(p[s]-=parseInt(n.css("margin"+d))||0,p[s]-=parseInt(n.css("border"+d+"Width"))||0),p[s]+=g.offset[e]||0,g.over[e]&&(p[s]+=n[b=="x"?"width":"height"]()*g.over[e])):(d=n[e],p[s]=d.slice&&d.slice(-1)=="%"?parseFloat(d)/100*t:d);/^\d+$/.test(p[s])&&(p[s]=p[s]<=0?0:Math.min(p[s],
t));!a&&g.queue&&(v!=p[s]&&i(g.onAfterFirst),delete p[s])});i(g.onAfter)}).end()};c.max=function(b,c){var g=c=="x"?"Width":"Height",i="scroll"+g;if(!a(b).is("html,body"))return b[i]-a(b)[g.toLowerCase()]();var g="client"+g,j=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(j[i],h[i])-Math.min(j[g],h[g])}})(jQuery);
(function(a,b,c){a.fn.jScrollPane=function(b){function e(b,d){function e(d){var k,i,l,m,q,n=false,p=false;r=d;if(H===c)m=b.scrollTop(),q=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),L=b.innerWidth()+ga,G=b.innerHeight(),b.width(L),H=a('<div class="jspPane" />').css("padding",za).append(b.children()),w=a('<div class="jspContainer" />').css({width:L+"px",height:G+"px"}).append(H).appendTo(b);else{b.css("width","");n=r.stickToBottom&&I();p=r.stickToRight&&E();if(l=b.innerWidth()+ga!=L||b.outerHeight()!=
G)L=b.innerWidth()+ga,G=b.innerHeight(),w.css({width:L+"px",height:G+"px"});if(!l&&Aa==P&&H.outerHeight()==M){b.width(L);return}Aa=P;H.css("width","");b.width(L);w.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}H.css("overflow","auto");P=d.contentWidth?d.contentWidth:H[0].scrollWidth;M=H[0].scrollHeight;H.css("overflow","");ma=P/L;T=M/G;S=T>1;U=ma>1;if(!U&&!S)b.removeClass("jspScrollable"),H.css({top:0,width:w.width()-ga}),w.unbind(xa),H.find(":input,a").unbind("focus.jsp"),b.attr("tabindex",
"-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),s(),Y();else{b.addClass("jspScrollable");if(d=r.maintainPosition&&(Q||R))k=y(),i=B();h();o();f();d&&(A(p?P-L:k,false),x(n?M-G:i,false));K();J();fa();r.enableKeyboardNavigation&&O();r.clickOnTrack&&z();ca();r.hijackInternalLinks&&ia()}r.autoReinitialise&&!qa?qa=setInterval(function(){e(r)},r.autoReinitialiseDelay):!r.autoReinitialise&&qa&&clearInterval(qa);m&&b.scrollTop(0)&&x(m,false);q&&b.scrollLeft(0)&&A(q,false);b.trigger("jsp-initialised",
[U||S])}function h(){S&&(w.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />'))),pa=w.find(">.jspVerticalBar"),Z=pa.find(">.jspTrack"),V=Z.find(">.jspDrag"),r.showArrows&&(ka=a('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",q(0,-1)).bind("click.jsp",F),la=a('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",
q(0,1)).bind("click.jsp",F),r.arrowScrollOnHover&&(ka.bind("mouseover.jsp",q(0,-1,ka)),la.bind("mouseover.jsp",q(0,1,la))),k(Z,r.verticalArrowPositions,ka,la)),ja=G,w.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ja-=a(this).outerHeight()}),V.hover(function(){V.addClass("jspHover")},function(){V.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",F);V.addClass("jspActive");var c=b.pageY-V.position().top;a("html").bind("mousemove.jsp",
function(a){t(a.pageY-c,false)}).bind("mouseup.jsp mouseleave.jsp",v);return false}),n())}function n(){Z.height(ja+"px");Q=0;wa=r.verticalGutter+Z.outerWidth();H.width(L-wa-ga);try{pa.position().left===0&&H.css("margin-left",wa+"px")}catch(a){}}function o(){U&&(w.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),
ra=w.find(">.jspHorizontalBar"),aa=ra.find(">.jspTrack"),W=aa.find(">.jspDrag"),r.showArrows&&(na=a('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",q(-1,0)).bind("click.jsp",F),oa=a('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",q(1,0)).bind("click.jsp",F),r.arrowScrollOnHover&&(na.bind("mouseover.jsp",q(-1,0,na)),oa.bind("mouseover.jsp",q(1,0,oa))),k(aa,r.horizontalArrowPositions,na,oa)),W.hover(function(){W.addClass("jspHover")},function(){W.removeClass("jspHover")}).bind("mousedown.jsp",
function(b){a("html").bind("dragstart.jsp selectstart.jsp",F);W.addClass("jspActive");var c=b.pageX-W.position().left;a("html").bind("mousemove.jsp",function(a){u(a.pageX-c,false)}).bind("mouseup.jsp mouseleave.jsp",v);return false}),ha=w.innerWidth(),p())}function p(){w.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ha-=a(this).outerWidth()});aa.width(ha+"px");R=0}function f(){if(U&&S){var b=aa.outerHeight(),c=Z.outerWidth();ja-=b;a(ra).find(">.jspCap:visible,>.jspArrow").each(function(){ha+=
a(this).outerWidth()});ha-=c;G-=c;L-=b;aa.parent().append(a('<div class="jspCorner" />').css("width",b+"px"));n();p()}U&&H.width(w.outerWidth()-ga+"px");M=H.outerHeight();T=M/G;if(U){ea=Math.ceil(1/ma*ha);if(ea>r.horizontalDragMaxWidth)ea=r.horizontalDragMaxWidth;else if(ea<r.horizontalDragMinWidth)ea=r.horizontalDragMinWidth;W.width(ea+"px");ba=ha-ea;D(R)}if(S){da=Math.ceil(1/T*ja);if(da>r.verticalDragMaxHeight)da=r.verticalDragMaxHeight;else if(da<r.verticalDragMinHeight)da=r.verticalDragMinHeight;
V.height(da+"px");X=ja-da;m(Q)}}function k(a,b,c,d){var f="before",e="after";b=="os"&&(b=/Mac/.test(navigator.platform)?"after":"split");b==f?e=b:b==e&&(f=b,b=c,c=d,d=b);a[f](c)[e](d)}function q(a,b,c){return function(){l(a,b,this,c);this.blur();return false}}function l(b,c,d,f){var d=a(d).addClass("jspActive"),e,g,k=true,h=function(){b!==0&&N.scrollByX(b*r.arrowButtonSpeed);c!==0&&N.scrollByY(c*r.arrowButtonSpeed);g=setTimeout(h,k?r.initialDelay:r.arrowRepeatFreq);k=false};h();e=f?"mouseout.jsp":
"mouseup.jsp";f=f||a("html");f.bind(e,function(){d.removeClass("jspActive");g&&clearTimeout(g);g=null;f.unbind(e)})}function z(){s();S&&Z.bind("mousedown.jsp",function(b){if(b.originalTarget===c||b.originalTarget==b.currentTarget){var d=a(this),f=d.offset(),e=b.pageY-f.top-Q,g,k=true,h=function(){var a=d.offset(),a=b.pageY-a.top-da/2,c=G*r.scrollPagePercent,f=X*c/(M-G);if(e<0)Q-f>a?N.scrollByY(-c):t(a);else if(e>0)Q+f<a?N.scrollByY(c):t(a);else{i();return}g=setTimeout(h,k?r.initialDelay:r.trackClickRepeatFreq);
k=false},i=function(){g&&clearTimeout(g);g=null;a(document).unbind("mouseup.jsp",i)};h();a(document).bind("mouseup.jsp",i);return false}});U&&aa.bind("mousedown.jsp",function(b){if(b.originalTarget===c||b.originalTarget==b.currentTarget){var d=a(this),f=d.offset(),e=b.pageX-f.left-R,g,k=true,h=function(){var a=d.offset(),a=b.pageX-a.left-ea/2,c=L*r.scrollPagePercent,f=ba*c/(P-L);if(e<0)R-f>a?N.scrollByX(-c):u(a);else if(e>0)R+f<a?N.scrollByX(c):u(a);else{i();return}g=setTimeout(h,k?r.initialDelay:
r.trackClickRepeatFreq);k=false},i=function(){g&&clearTimeout(g);g=null;a(document).unbind("mouseup.jsp",i)};h();a(document).bind("mouseup.jsp",i);return false}})}function s(){aa&&aa.unbind("mousedown.jsp");Z&&Z.unbind("mousedown.jsp")}function v(){a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");V&&V.removeClass("jspActive");W&&W.removeClass("jspActive")}function t(a,b){if(S){a<0?a=0:a>X&&(a=X);if(b===c)b=r.animateScroll;b?N.animate(V,"top",a,m):(V.css("top",
a),m(a))}}function m(a){if(a===c)a=V.position().top;w.scrollTop(0);Q=a;var d=Q===0,f=Q==X,a=-(a/X)*(M-G);if(sa!=d||ta!=f)sa=d,ta=f,b.trigger("jsp-arrow-change",[sa,ta,ua,va]);r.showArrows&&(ka[d?"addClass":"removeClass"]("jspDisabled"),la[f?"addClass":"removeClass"]("jspDisabled"));H.css("top",a);b.trigger("jsp-scroll-y",[-a,d,f]).trigger("scroll")}function u(a,b){if(U){a<0?a=0:a>ba&&(a=ba);if(b===c)b=r.animateScroll;b?N.animate(W,"left",a,D):(W.css("left",a),D(a))}}function D(a){if(a===c)a=W.position().left;
w.scrollTop(0);R=a;var d=R===0,f=R==ba,a=-(a/ba)*(P-L);if(ua!=d||va!=f)ua=d,va=f,b.trigger("jsp-arrow-change",[sa,ta,ua,va]);r.showArrows&&(na[d?"addClass":"removeClass"]("jspDisabled"),oa[f?"addClass":"removeClass"]("jspDisabled"));H.css("left",a);b.trigger("jsp-scroll-x",[-a,d,f]).trigger("scroll")}function x(a,b){t(a/(M-G)*X,b)}function A(a,b){u(a/(P-L)*ba,b)}function C(b,c,d){var f,e,g=0,k=0,h,i,l;try{f=a(b)}catch(j){return}e=f.outerHeight();b=f.outerWidth();w.scrollTop(0);for(w.scrollLeft(0);!f.is(".jspPane");)if(g+=
f.position().top,k+=f.position().left,f=f.offsetParent(),/^body|html$/i.test(f[0].nodeName))return;f=B();h=f+G;g<f||c?i=g-r.verticalGutter:g+e>h&&(i=g-G+e+r.verticalGutter);i&&x(i,d);g=y();i=g+L;k<g||c?l=k-r.horizontalGutter:k+b>i&&(l=k-L+b+r.horizontalGutter);l&&A(l,d)}function y(){return-H.position().left}function B(){return-H.position().top}function I(){var a=M-G;return a>20&&a-B()<10}function E(){var a=P-L;return a>20&&a-y()<10}function J(){w.unbind(xa).bind(xa,function(a,b,c,d){a=R;b=Q;N.scrollBy(c*
r.mouseWheelSpeed,-d*r.mouseWheelSpeed,false);return a==R&&b==Q})}function F(){return false}function K(){H.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){C(a.target,false)})}function O(){function c(){var a=R,b=Q;switch(d){case 40:N.scrollByY(r.keyboardSpeed,false);break;case 38:N.scrollByY(-r.keyboardSpeed,false);break;case 34:case 32:N.scrollByY(G*r.scrollPagePercent,false);break;case 33:N.scrollByY(-G*r.scrollPagePercent,false);break;case 39:N.scrollByX(r.keyboardSpeed,false);
break;case 37:N.scrollByX(-r.keyboardSpeed,false)}return f=a!=R||b!=Q}var d,f,e=[];U&&e.push(ra[0]);S&&e.push(pa[0]);H.focus(function(){b.focus()});b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(b){if(!(b.target!==this&&(!e.length||!a(b.target).closest(e).length))){var g=R,k=Q;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=b.keyCode;c();break;case 35:x(M-G);d=null;break;case 36:x(0),d=null}f=b.keyCode==d&&g!=R||k!=Q;return!f}}).bind("keypress.jsp",
function(a){a.keyCode==d&&c();return!f});r.hideFocus?(b.css("outline","none"),"hideFocus"in w[0]&&b.attr("hideFocus",true)):(b.css("outline",""),"hideFocus"in w[0]&&b.attr("hideFocus",false))}function ca(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash);try{b=a(d)}catch(f){return}b.length&&H.find(d)&&(w.scrollTop()===0?c=setInterval(function(){w.scrollTop()>0&&(C(d,true),a(document).scrollTop(w.position().top),clearInterval(c))},50):(C(d,true),a(document).scrollTop(w.position().top)))}}
function Y(){a("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function ia(){Y();a("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var a=this.href.split("#");if(a.length>1&&(a=a[1],a.length>0&&H.find("#"+a).length>0))return C("#"+a,true),false})}function fa(){var a,b,c,d,f,e=false;w.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){g=g.originalEvent.touches[0];a=y();b=B();c=g.pageX;d=g.pageY;f=false;
e=true}).bind("touchmove.jsp",function(g){if(e){var g=g.originalEvent.touches[0],k=R,h=Q;N.scrollTo(a+c-g.pageX,b+d-g.pageY);f=f||Math.abs(c-g.pageX)>5||Math.abs(d-g.pageY)>5;return k==R&&h==Q}}).bind("touchend.jsp",function(){e=false}).bind("click.jsp-touchclick",function(){if(f)return f=false})}var r,N=this,H,L,G,w,P,M,ma,T,S,U,V,X,Q,W,ba,R,pa,Z,wa,ja,da,ka,la,ra,aa,ha,ea,na,oa,qa,za,ga,Aa,sa=true,ua=true,ta=false,va=false,ya=b.clone(false,false).empty(),xa=a.fn.mwheelIntent?"mwheelIntent.jsp":
"mousewheel.jsp";za=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft");ga=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0);a.extend(N,{reinitialise:function(b){b=a.extend({},r,b);e(b)},scrollToElement:function(a,b,c){C(a,b,c)},scrollTo:function(a,b,c){A(a,c);x(b,c)},scrollToX:function(a,b){A(a,b)},scrollToY:function(a,b){x(a,b)},scrollToPercentX:function(a,b){A(a*(P-L),b)},scrollToPercentY:function(a,b){x(a*(M-G),b)},scrollBy:function(a,
b,c){N.scrollByX(a,c);N.scrollByY(b,c)},scrollByX:function(a,b){var c=(y()+Math[a<0?"floor":"ceil"](a))/(P-L);u(c*ba,b)},scrollByY:function(a,b){var c=(B()+Math[a<0?"floor":"ceil"](a))/(M-G);t(c*X,b)},positionDragX:function(a,b){u(a,b)},positionDragY:function(a,b){t(a,b)},animate:function(a,b,c,d){var f={};f[b]=c;a.animate(f,{duration:r.animateDuration,easing:r.animateEase,queue:false,step:d})},getContentPositionX:function(){return y()},getContentPositionY:function(){return B()},getContentWidth:function(){return P},
getContentHeight:function(){return M},getPercentScrolledX:function(){return y()/(P-L)},getPercentScrolledY:function(){return B()/(M-G)},getIsScrollableH:function(){return U},getIsScrollableV:function(){return S},getContentPane:function(){return H},scrollToBottom:function(a){t(X,a)},hijackInternalLinks:function(){ia()},destroy:function(){var a=B(),c=y();b.removeClass("jspScrollable").unbind(".jsp");b.replaceWith(ya.append(H.children()));ya.scrollTop(a);ya.scrollLeft(c)}});e(d)}b=a.extend({},a.fn.jScrollPane.defaults,
b);a.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){b[this]=b[this]||b.speed});return this.each(function(){var c=a(this),i=c.data("jsp");i?i.reinitialise(b):(i=new e(c,b),c.data("jsp",i))})};a.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,
contentWidth:c,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);
(function(a){function b(b){var c=b||window.event,g=[].slice.call(arguments,1),i=0,j=0,h=0,b=a.event.fix(c);b.type="mousewheel";b.wheelDelta&&(i=b.wheelDelta/120);b.detail&&(i=-b.detail/3);h=i;c.axis!==void 0&&c.axis===c.HORIZONTAL_AXIS&&(h=0,j=-1*i);c.wheelDeltaY!==void 0&&(h=c.wheelDeltaY/120);c.wheelDeltaX!==void 0&&(j=-1*c.wheelDeltaX/120);g.unshift(b,i,j,h);return a.event.handle.apply(this,g)}var c=["DOMMouseScroll","mousewheel"];a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=
c.length;a;)this.addEventListener(c[--a],b,false);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,false);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
(function(a){a.fn.autoResize=function(b){var c=a.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1E3},b);this.filter("textarea").each(function(){var b=a(this).css({resize:"none","overflow-y":"hidden"}),e=b.height(),g=function(){var c={};a.each(["height","width","lineHeight","textDecoration","letterSpacing"],function(a,e){c[e]=b.css(e)});return b.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(c).attr("tabIndex",
"-1").insertBefore(b)}(),i=null,j=function(){g.height(0).val(a(this).val()).scrollTop(1E4);var h=Math.max(g.scrollTop(),e)+c.extraSpace,j=a(this).add(g);i!==h&&(i=h,h>=c.limit?a(this).css("overflow-y",""):(c.onResize.call(this),c.animate&&b.css("display")==="block"?j.stop().animate({height:h},c.animateDuration,c.animateCallback):j.height(h)))};b.unbind(".dynSiz").bind("keyup.dynSiz",j).bind("keydown.dynSiz",j).bind("change.dynSiz",j)});return this}})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/
2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/
e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*
b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var a=1.70158,g=0,i=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*0.3);i<Math.abs(d)?(i=d,a=g/4):a=g/(2*Math.PI)*Math.asin(d/i);return-(i*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var a=1.70158,g=0,i=d;if(b==0)return c;if((b/=
e)==1)return c+d;g||(g=e*0.3);i<Math.abs(d)?(i=d,a=g/4):a=g/(2*Math.PI)*Math.asin(d/i);return i*Math.pow(2,-10*b)*Math.sin((b*e-a)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var a=1.70158,g=0,i=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*0.3*1.5);i<Math.abs(d)?(i=d,a=g/4):a=g/(2*Math.PI)*Math.asin(d/i);return b<1?-0.5*i*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/g)+c:i*Math.pow(2,-10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/g)*0.5+d+c},easeInBack:function(a,b,c,d,e,g){g==void 0&&
(g=1.70158);return d*(b/=e)*b*((g+1)*b-g)+c},easeOutBack:function(a,b,c,d,e,g){g==void 0&&(g=1.70158);return d*((b=b/e-1)*b*((g+1)*b+g)+1)+c},easeInOutBack:function(a,b,c,d,e,g){g==void 0&&(g=1.70158);return(b/=e/2)<1?d/2*b*b*(((g*=1.525)+1)*b-g)+c:d/2*((b-=2)*b*(((g*=1.525)+1)*b+g)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+0.75)+c:b<2.5/2.75?d*
(7.5625*(b-=2.25/2.75)*b+0.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+0.984375)+c},easeInOutBounce:function(a,b,c,d,e){return b<e/2?jQuery.easing.easeInBounce(a,b*2,0,d,e)*0.5+c:jQuery.easing.easeOutBounce(a,b*2-e,0,d,e)*0.5+d*0.5+c}});var qq=qq||{};qq.extend=function(a,b){for(var c in b)a[c]=b[c]};qq.indexOf=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);var c=c||0,d=a.length;for(c<0&&(c+=d);c<d;c++)if(c in a&&a[c]===b)return c;return-1};qq.getUniqueId=function(){var a=0;return function(){return a++}}();
qq.attach=function(a,b,c){a.addEventListener?a.addEventListener(b,c,false):a.attachEvent&&a.attachEvent("on"+b,c)};qq.detach=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,false):a.attachEvent&&a.detachEvent("on"+b,c)};qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=false};qq.insertBefore=function(a,b){b.parentNode.insertBefore(a,b)};qq.remove=function(a){a.parentNode.removeChild(a)};
qq.contains=function(a,b){return a==b?true:a.contains?a.contains(b):!!(b.compareDocumentPosition(a)&8)};qq.toElement=function(){var a=document.createElement("div");return function(b){a.innerHTML=b;b=a.firstChild;a.removeChild(b);return b}}();qq.css=function(a,b){if(b.opacity!=null&&typeof a.style.opacity!="string"&&typeof a.filters!="undefined")b.filter="alpha(opacity="+Math.round(100*b.opacity)+")";qq.extend(a.style,b)};qq.hasClass=function(a,b){return RegExp("(^| )"+b+"( |$)").test(a.className)};
qq.addClass=function(a,b){qq.hasClass(a,b)||(a.className+=" "+b)};qq.removeClass=function(a,b){a.className=a.className.replace(RegExp("(^| )"+b+"( |$)")," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(a,b){a.innerText=b;a.textContent=b};qq.children=function(a){for(var b=[],a=a.firstChild;a;)a.nodeType==1&&b.push(a),a=a.nextSibling;return b};
qq.getByClass=function(a,b){if(a.querySelectorAll)return a.querySelectorAll("."+b);for(var c=[],d=a.getElementsByTagName("*"),e=d.length,g=0;g<e;g++)qq.hasClass(d[g],b)&&c.push(d[g]);return c};
qq.obj2url=function(a,b,c){var d=[],e="&",g=function(a,c){var e=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;e!="undefined"&&c!="undefined"&&d.push(typeof a==="object"?qq.obj2url(a,e,true):Object.prototype.toString.call(a)==="[object Function]"?encodeURIComponent(e)+"="+encodeURIComponent(a()):encodeURIComponent(e)+"="+encodeURIComponent(a))};if(!c&&b)e=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",d.push(b),d.push(qq.obj2url(a));else if(Object.prototype.toString.call(a)==="[object Array]"&&typeof a!="undefined")for(var i=
0,c=a.length;i<c;++i)g(a[i],i);else if(typeof a!="undefined"&&a!==null&&typeof a==="object")for(i in a)g(a[i],i);else d.push(encodeURIComponent(b)+"="+encodeURIComponent(a));return d.join(e).replace(/^&/,"").replace(/%20/g,"+")};qq=qq||{};
qq.FileUploaderBasic=function(a){this._options={debug:false,action:"/server/upload",params:{},button:null,multiple:true,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",
onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(a){alert(a)}};qq.extend(this._options,a);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button)this._button=this._createUploadButton(this._options.button);this._preventLeaveInProgress()};
qq.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(a){var b=this;return new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(a){b._onInputChange(a)}})},_createUploadHandler:function(){var a=this,b;b=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm";return new qq[b]({debug:this._options.debug,action:this._options.action,
maxConnections:this._options.maxConnections,onProgress:function(b,d,e,g){a._onProgress(b,d,e,g);a._options.onProgress(b,d,e,g)},onComplete:function(b,d,e){a._onComplete(b,d,e);a._options.onComplete(b,d,e)},onCancel:function(b,d){a._onCancel(b,d);a._options.onCancel(b,d)}})},_preventLeaveInProgress:function(){var a=this;qq.attach(window,"beforeunload",function(b){if(a._filesInProgress)return b=b||window.event,b.returnValue=a._options.messages.onLeave})},_onSubmit:function(){this._filesInProgress++},
_onProgress:function(){},_onComplete:function(a,b,c){this._filesInProgress--;c.error&&this._options.showMessage(c.error)},_onCancel:function(){this._filesInProgress--},_onInputChange:function(a){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(a.files):this._validateFile(a)&&this._uploadFile(a);this._button.reset()},_uploadFileList:function(a){for(var b=0;b<a.length;b++)if(!this._validateFile(a[b]))return;for(b=0;b<a.length;b++)this._uploadFile(a[b])},_uploadFile:function(a){var a=
this._handler.add(a),b=this._handler.getName(a);this._options.onSubmit(a,b)!==false&&(this._onSubmit(a,b),this._handler.upload(a,this._options.params))},_validateFile:function(a){var b,c;a.value?b=a.value.replace(/.*(\/|\\)/,""):(b=a.fileName!=null?a.fileName:a.name,c=a.fileSize!=null?a.fileSize:a.size);if(this._isAllowedExtension(b))if(c===0)return this._error("emptyError",b),false;else if(c&&this._options.sizeLimit&&c>this._options.sizeLimit)return this._error("sizeError",b),false;else{if(c&&c<
this._options.minSizeLimit)return this._error("minSizeError",b),false}else return this._error("typeError",b),false;return true},_error:function(a,b){var c=this._options.messages[a],d=this._formatFileName(b),c=c.replace("{file}",d),d=this._options.allowedExtensions.join(", "),c=c.replace("{extensions}",d),d=this._formatSize(this._options.sizeLimit),c=c.replace("{sizeLimit}",d),d=this._formatSize(this._options.minSizeLimit),c=c.replace("{minSizeLimit}",d);this._options.showMessage(c)},_formatFileName:function(a){a.length>
33&&(a=a.slice(0,19)+"..."+a.slice(-13));return a},_isAllowedExtension:function(a){var a=-1!==a.indexOf(".")?a.replace(/.*[.]/,"").toLowerCase():"",b=this._options.allowedExtensions;if(!b.length)return true;for(var c=0;c<b.length;c++)if(b[c].toLowerCase()==a)return true;return false},_formatSize:function(a){var b=-1;do a/=1024,b++;while(a>99);return Math.max(a,0.1).toFixed(1)+"kB,MB,GB,TB,PB,EB".split(",")[b]}};
qq.FileUploader=function(a){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button">Upload a file</div><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',
classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}});qq.extend(this._options,a);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._button=
this._createUploadButton(this._find(this._element,"button"));this._bindCancelEvent()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);
qq.extend(qq.FileUploader.prototype,{_find:function(a,b){var c=qq.getByClass(a,this._options.classes[b])[0];if(!c)throw Error("element not found "+b);return c},_setupDragDrop:function(){var a=this,b=this._find(this._element,"drop"),c=new qq.UploadDropZone({element:b,onEnter:function(c){qq.addClass(b,a._classes.dropActive);c.stopPropagation()},onLeave:function(a){a.stopPropagation()},onLeaveNotDescendants:function(){qq.removeClass(b,a._classes.dropActive)},onDrop:function(c){b.style.display="none";
qq.removeClass(b,a._classes.dropActive);a._uploadFileList(c.dataTransfer.files)}});b.style.display="none";qq.attach(document,"dragenter",function(a){if(c._isValidFileDrag(a))b.style.display="block"});qq.attach(document,"dragleave",function(a){if(c._isValidFileDrag(a)&&(a=document.elementFromPoint(a.clientX,a.clientY),!a||a.nodeName=="HTML"))b.style.display="none"})},_onSubmit:function(a,b){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(a,b)},_onProgress:function(a,
b,c,d){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var e=this._find(this._getItemByFileId(a),"size");e.style.display="inline";var g;g=c!=d?Math.round(c/d*100)+"% from "+this._formatSize(d):this._formatSize(d);qq.setText(e,g)},_onComplete:function(a,b,c){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var d=this._getItemByFileId(a);qq.remove(this._find(d,"cancel"));qq.remove(this._find(d,"spinner"));c.success?qq.addClass(d,this._classes.success):qq.addClass(d,
this._classes.fail)},_addToList:function(a,b){var c=qq.toElement(this._options.fileTemplate);c.qqFileId=a;var d=this._find(c,"file");qq.setText(d,this._formatFileName(b));this._find(c,"size").style.display="none";this._listElement.appendChild(c)},_getItemByFileId:function(a){for(var b=this._listElement.firstChild;b;){if(b.qqFileId==a)return b;b=b.nextSibling}},_bindCancelEvent:function(){var a=this;qq.attach(this._listElement,"click",function(b){var b=b||window.event,c=b.target||b.srcElement;if(qq.hasClass(c,
a._classes.cancel))qq.preventDefault(b),b=c.parentNode,a._handler.cancel(b.qqFileId),qq.remove(b)})}});qq.UploadDropZone=function(a){this._options={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(this._options,a);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};
qq.UploadDropZone.prototype={_disableDropOutside:function(){if(!qq.UploadDropZone.dropOutsideDisabled)qq.attach(document,"dragover",function(a){if(a.dataTransfer)a.dataTransfer.dropEffect="none",a.preventDefault()}),qq.UploadDropZone.dropOutsideDisabled=true},_attachEvents:function(){var a=this;qq.attach(a._element,"dragover",function(b){if(a._isValidFileDrag(b)){var c=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect=c=="move"||c=="linkMove"?"move":"copy";b.stopPropagation();b.preventDefault()}});
qq.attach(a._element,"dragenter",function(b){if(a._isValidFileDrag(b))a._options.onEnter(b)});qq.attach(a._element,"dragleave",function(b){if(a._isValidFileDrag(b)){a._options.onLeave(b);var c=document.elementFromPoint(b.clientX,b.clientY);if(!qq.contains(this,c))a._options.onLeaveNotDescendants(b)}});qq.attach(a._element,"drop",function(b){a._isValidFileDrag(b)&&(b.preventDefault(),a._options.onDrop(b))})},_isValidFileDrag:function(a){var a=a.dataTransfer,b=navigator.userAgent.indexOf("AppleWebKit")>
-1;return a&&a.effectAllowed!="none"&&(a.files||!b&&a.types.contains&&a.types.contains("Files"))}};qq.UploadButton=function(a){this._options={element:null,multiple:false,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,a);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};
qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input);qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var a=document.createElement("input");this._options.multiple&&a.setAttribute("multiple","multiple");a.setAttribute("type","file");a.setAttribute("name",this._options.name);qq.css(a,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,
padding:0,cursor:"pointer",opacity:0});this._element.appendChild(a);var b=this;qq.attach(a,"change",function(){b._options.onChange(a)});qq.attach(a,"mouseover",function(){qq.addClass(b._element,b._options.hoverClass)});qq.attach(a,"mouseout",function(){qq.removeClass(b._element,b._options.hoverClass)});qq.attach(a,"focus",function(){qq.addClass(b._element,b._options.focusClass)});qq.attach(a,"blur",function(){qq.removeClass(b._element,b._options.focusClass)});window.attachEvent&&a.setAttribute("tabIndex",
"-1");return a}};qq.UploadHandlerAbstract=function(a){this._options={debug:false,action:"/upload.php",maxConnections:999,onProgress:function(){},onComplete:function(){},onCancel:function(){}};qq.extend(this._options,a);this._queue=[];this._params=[]};
qq.UploadHandlerAbstract.prototype={log:function(a){this._options.debug&&window.console&&console.log("[uploader] "+a)},add:function(){},upload:function(a,b){var c=this._queue.push(a),d={};qq.extend(d,b);this._params[a]=d;c<=this._options.maxConnections&&this._upload(a,this._params[a])},cancel:function(a){this._cancel(a);this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++)this._cancel(this._queue[a]);this._queue=[]},getName:function(){},getSize:function(){},getQueue:function(){return this._queue},
_upload:function(){},_cancel:function(){},_dequeue:function(a){a=qq.indexOf(this._queue,a);this._queue.splice(a,1);var b=this._options.maxConnections;this._queue.length>=b&&a<b&&(a=this._queue[b-1],this._upload(a,this._params[a]))}};qq.UploadHandlerForm=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);
qq.extend(qq.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[b]=a;a.parentNode&&qq.remove(a);return b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(a){this._options.onCancel(a,this.getName(a));delete this._inputs[a];if(a=document.getElementById(a))a.setAttribute("src","javascript:false;"),qq.remove(a)},_upload:function(a,b){var c=this._inputs[a];if(!c)throw Error("file with passed id was not added, or already uploaded or cancelled");
var d=this.getName(a),e=this._createIframe(a),g=this._createForm(e,b);g.appendChild(c);var i=this;this._attachLoadEvent(e,function(){i.log("iframe loaded");var b=i._getIframeContentJSON(e);i._options.onComplete(a,d,b);i._dequeue(a);delete i._inputs[a];setTimeout(function(){qq.remove(e)},1)});g.submit();qq.remove(g);return a},_attachLoadEvent:function(a,b){qq.attach(a,"load",function(){a.parentNode&&(!a.contentDocument||!(a.contentDocument.body&&a.contentDocument.body.innerHTML=="false"))&&b()})},
_getIframeContentJSON:function(a){var a=a.contentDocument?a.contentDocument:a.contentWindow.document,b;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+a.body.innerHTML);try{b=eval("("+a.body.innerHTML+")")}catch(c){b={}}return b},_createIframe:function(a){var b=qq.toElement('<iframe src="javascript:false;" name="'+a+'" />');b.setAttribute("id",a);b.style.display="none";document.body.appendChild(b);return b},_createForm:function(a,b){var c=qq.toElement('<form method="post" enctype="multipart/form-data"></form>'),
d=qq.obj2url(b,this._options.action);c.setAttribute("action",d);c.setAttribute("target",a.name);c.style.display="none";document.body.appendChild(c);return c}});qq.UploadHandlerXhr=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");a.type="file";return"multiple"in a&&typeof File!="undefined"&&typeof(new XMLHttpRequest).upload!="undefined"};
qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);
qq.extend(qq.UploadHandlerXhr.prototype,{add:function(a){if(!(a instanceof File))throw Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(a)-1},getName:function(a){a=this._files[a];return a.fileName!=null?a.fileName:a.name},getSize:function(a){a=this._files[a];return a.fileSize!=null?a.fileSize:a.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(a,b){var c=this._files[a],d=this.getName(a);this.getSize(a);this._loaded[a]=0;var e=this._xhrs[a]=new XMLHttpRequest,
g=this;e.upload.onprogress=function(b){if(b.lengthComputable)g._loaded[a]=b.loaded,g._options.onProgress(a,d,b.loaded,b.total)};e.onreadystatechange=function(){e.readyState==4&&g._onComplete(a,e)};b=b||{};b.qqfile=d;var i=qq.obj2url(b,this._options.action);e.open("POST",i,true);e.setRequestHeader("X-Requested-With","XMLHttpRequest");e.setRequestHeader("X-File-Name",encodeURIComponent(d));e.setRequestHeader("Content-Type","application/octet-stream");e.send(c)},_onComplete:function(a,b){if(this._files[a]){var c=
this.getName(a),d=this.getSize(a);this._options.onProgress(a,c,d,d);if(b.status==200){this.log("xhr - server response received");this.log("responseText = "+b.responseText);var e;try{e=eval("("+b.responseText+")")}catch(g){e={}}this._options.onComplete(a,c,e)}else this._options.onComplete(a,c,{});this._files[a]=null;this._xhrs[a]=null;this._dequeue(a)}},_cancel:function(a){this._options.onCancel(a,this.getName(a));this._files[a]=null;this._xhrs[a]&&(this._xhrs[a].abort(),this._xhrs[a]=null)}});
qq.obj2url=function(a,b,c){var d=[],e="&",g=function(a,c){var e=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;e!="undefined"&&c!="undefined"&&d.push(typeof a==="object"?qq.obj2url(a,e,true):Object.prototype.toString.call(a)==="[object Function]"?encodeURIComponent(e)+"="+encodeURIComponent(a()):encodeURIComponent(e)+"="+encodeURIComponent(a))};if(!c&&b)e=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",d.push(b),d.push(qq.obj2url(a));else if(Object.prototype.toString.call(a)==="[object Array]"&&typeof a!="undefined")for(var i=
0,c=a.length;i<c;++i)g(a[i],i);else if(typeof a!="undefined"&&a!==null&&typeof a==="object")for(i in a)g(a[i],i);else d.push(encodeURIComponent(b)+"="+encodeURIComponent(a));return d.join(e).replace(/^&/,"").replace(/%20/g,"+")};qq=qq||{};
qq.FileUploaderBasic=function(a){this._options={debug:false,action:"/server/upload",params:{},button:null,multiple:false,maxConnections:3,allowedExtensions:["jpg","jpeg","png","gif"],sizeLimit:0,minSizeLimit:0,onSubmit:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",
emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(a){alert(a)}};qq.extend(this._options,a);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button)this._button=this._createUploadButton(this._options.button);this._preventLeaveInProgress()};
qq.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(a){var b=this;return new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(a){b._onInputChange(a)}})},_createUploadHandler:function(){var a=this,b;b=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm";return new qq[b]({debug:this._options.debug,action:this._options.action,
maxConnections:this._options.maxConnections,onProgress:function(b,d,e,g){a._onProgress(b,d,e,g);a._options.onProgress(b,d,e,g)},onComplete:function(b,d,e){a._onComplete(b,d,e);a._options.onComplete(b,d,e)},onCancel:function(b,d){a._onCancel(b,d);a._options.onCancel(b,d)}})},_preventLeaveInProgress:function(){var a=this;qq.attach(window,"beforeunload",function(b){if(a._filesInProgress)return b=b||window.event,b.returnValue=a._options.messages.onLeave})},_onSubmit:function(){this._filesInProgress++},
_onProgress:function(){},_onComplete:function(a,b,c){this._filesInProgress--;c.error&&this._options.showMessage(c.error)},_onCancel:function(){this._filesInProgress--},_onInputChange:function(a){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(a.files):this._validateFile(a)&&this._uploadFile(a);this._button.reset()},_uploadFileList:function(a){for(var b=0;b<a.length;b++)if(!this._validateFile(a[b]))return;for(b=0;b<a.length;b++)this._uploadFile(a[b])},_uploadFile:function(a){var a=
this._handler.add(a),b=this._handler.getName(a);this._options.onSubmit(a,b)!==false&&(this._onSubmit(a,b),this._handler.upload(a,this._options.params))},_validateFile:function(a){var b,c;a.value?b=a.value.replace(/.*(\/|\\)/,""):(b=a.fileName!=null?a.fileName:a.name,c=a.fileSize!=null?a.fileSize:a.size);if(this._isAllowedExtension(b))if(c===0)return this._error("emptyError",b),false;else if(c&&this._options.sizeLimit&&c>this._options.sizeLimit)return this._error("sizeError",b),false;else{if(c&&c<
this._options.minSizeLimit)return this._error("minSizeError",b),false}else return this._error("typeError",b),false;return true},_error:function(a,b){var c=this._options.messages[a],d=this._formatFileName(b),c=c.replace("{file}",d),d=this._options.allowedExtensions.join(", "),c=c.replace("{extensions}",d),d=this._formatSize(this._options.sizeLimit),c=c.replace("{sizeLimit}",d),d=this._formatSize(this._options.minSizeLimit),c=c.replace("{minSizeLimit}",d);this._options.showMessage(c)},_formatFileName:function(a){a.length>
33&&(a=a.slice(0,19)+"..."+a.slice(-13));return a},_isAllowedExtension:function(a){var a=-1!==a.indexOf(".")?a.replace(/.*[.]/,"").toLowerCase():"",b=this._options.allowedExtensions;if(!b.length)return true;for(var c=0;c<b.length;c++)if(b[c].toLowerCase()==a)return true;return false},_formatSize:function(a){var b=-1;do a/=1024,b++;while(a>99);return Math.max(a,0.1).toFixed(1)+"kB,MB,GB,TB,PB,EB".split(",")[b]}};
qq.FileUploader=function(a){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button"> '+this._options.text+' </div><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',
classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}});qq.extend(this._options,a);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._button=
this._createUploadButton(this._find(this._element,"button"));this._bindCancelEvent()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);
qq.extend(qq.FileUploader.prototype,{_find:function(a,b){var c=qq.getByClass(a,this._options.classes[b])[0];if(!c)throw Error("element not found "+b);return c},_setupDragDrop:function(){var a=this,b=this._find(this._element,"drop"),c=new qq.UploadDropZone({element:b,onEnter:function(c){qq.addClass(b,a._classes.dropActive);c.stopPropagation()},onLeave:function(a){a.stopPropagation()},onLeaveNotDescendants:function(){qq.removeClass(b,a._classes.dropActive)},onDrop:function(c){b.style.display="none";
qq.removeClass(b,a._classes.dropActive);a._uploadFileList(c.dataTransfer.files)}});b.style.display="none";qq.attach(document,"dragenter",function(a){if(c._isValidFileDrag(a))b.style.display="block"});qq.attach(document,"dragleave",function(a){if(c._isValidFileDrag(a)&&(a=document.elementFromPoint(a.clientX,a.clientY),!a||a.nodeName=="HTML"))b.style.display="none"})},_onSubmit:function(a,b){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(a,b)},_onProgress:function(a,
b,c,d){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var e=this._find(this._getItemByFileId(a),"size");e.style.display="inline";var g;g=c!=d?Math.round(c/d*100)+"% from "+this._formatSize(d):this._formatSize(d);qq.setText(e,g)},_onComplete:function(a,b,c){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var d=this._getItemByFileId(a);qq.remove(this._find(d,"cancel"));qq.remove(this._find(d,"spinner"));c.success?qq.addClass(d,this._classes.success):qq.addClass(d,
this._classes.fail)},_addToList:function(a,b){var c=qq.toElement(this._options.fileTemplate);c.qqFileId=a;var d=this._find(c,"file");qq.setText(d,this._formatFileName(b));this._find(c,"size").style.display="none";this._listElement.appendChild(c)},_getItemByFileId:function(a){for(var b=this._listElement.firstChild;b;){if(b.qqFileId==a)return b;b=b.nextSibling}},_bindCancelEvent:function(){var a=this;qq.attach(this._listElement,"click",function(b){var b=b||window.event,c=b.target||b.srcElement;if(qq.hasClass(c,
a._classes.cancel))qq.preventDefault(b),b=c.parentNode,a._handler.cancel(b.qqFileId),qq.remove(b)})}});qq.UploadDropZone=function(a){this._options={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(this._options,a);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};
qq.UploadDropZone.prototype={_disableDropOutside:function(){if(!qq.UploadDropZone.dropOutsideDisabled)qq.attach(document,"dragover",function(a){if(a.dataTransfer)a.dataTransfer.dropEffect="none",a.preventDefault()}),qq.UploadDropZone.dropOutsideDisabled=true},_attachEvents:function(){var a=this;qq.attach(a._element,"dragover",function(b){if(a._isValidFileDrag(b)){var c=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect=c=="move"||c=="linkMove"?"move":"copy";b.stopPropagation();b.preventDefault()}});
qq.attach(a._element,"dragenter",function(b){if(a._isValidFileDrag(b))a._options.onEnter(b)});qq.attach(a._element,"dragleave",function(b){if(a._isValidFileDrag(b)){a._options.onLeave(b);var c=document.elementFromPoint(b.clientX,b.clientY);if(!qq.contains(this,c))a._options.onLeaveNotDescendants(b)}});qq.attach(a._element,"drop",function(b){a._isValidFileDrag(b)&&(b.preventDefault(),a._options.onDrop(b))})},_isValidFileDrag:function(a){var a=a.dataTransfer,b=navigator.userAgent.indexOf("AppleWebKit")>
-1;return a&&a.effectAllowed!="none"&&(a.files||!b&&a.types.contains&&a.types.contains("Files"))}};qq.UploadButton=function(a){this._options={element:null,multiple:false,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,a);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};
qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input);qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var a=document.createElement("input");this._options.multiple&&a.setAttribute("multiple","multiple");a.setAttribute("type","file");a.setAttribute("name",this._options.name);qq.css(a,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,
padding:0,cursor:"pointer",opacity:0});this._element.appendChild(a);var b=this;qq.attach(a,"change",function(){b._options.onChange(a)});qq.attach(a,"mouseover",function(){qq.addClass(b._element,b._options.hoverClass)});qq.attach(a,"mouseout",function(){qq.removeClass(b._element,b._options.hoverClass)});qq.attach(a,"focus",function(){qq.addClass(b._element,b._options.focusClass)});qq.attach(a,"blur",function(){qq.removeClass(b._element,b._options.focusClass)});window.attachEvent&&a.setAttribute("tabIndex",
"-1");return a}};qq.UploadHandlerAbstract=function(a){this._options={debug:false,action:"/upload.php",maxConnections:999,onProgress:function(){},onComplete:function(){},onCancel:function(){}};qq.extend(this._options,a);this._queue=[];this._params=[]};
qq.UploadHandlerAbstract.prototype={log:function(a){this._options.debug&&window.console&&console.log("[uploader] "+a)},add:function(){},upload:function(a,b){var c=this._queue.push(a),d={};qq.extend(d,b);this._params[a]=d;c<=this._options.maxConnections&&this._upload(a,this._params[a])},cancel:function(a){this._cancel(a);this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++)this._cancel(this._queue[a]);this._queue=[]},getName:function(){},getSize:function(){},getQueue:function(){return this._queue},
_upload:function(){},_cancel:function(){},_dequeue:function(a){a=qq.indexOf(this._queue,a);this._queue.splice(a,1);var b=this._options.maxConnections;this._queue.length>=b&&a<b&&(a=this._queue[b-1],this._upload(a,this._params[a]))}};qq.UploadHandlerForm=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);
qq.extend(qq.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[b]=a;a.parentNode&&qq.remove(a);return b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(a){this._options.onCancel(a,this.getName(a));delete this._inputs[a];if(a=document.getElementById(a))a.setAttribute("src","javascript:false;"),qq.remove(a)},_upload:function(a,b){var c=this._inputs[a];if(!c)throw Error("file with passed id was not added, or already uploaded or cancelled");
var d=this.getName(a),e=this._createIframe(a),g=this._createForm(e,b);g.appendChild(c);var i=this;this._attachLoadEvent(e,function(){i.log("iframe loaded");var b=i._getIframeContentJSON(e);i._options.onComplete(a,d,b);i._dequeue(a);delete i._inputs[a];setTimeout(function(){qq.remove(e)},1)});g.submit();qq.remove(g);return a},_attachLoadEvent:function(a,b){qq.attach(a,"load",function(){a.parentNode&&(!a.contentDocument||!(a.contentDocument.body&&a.contentDocument.body.innerHTML=="false"))&&b()})},
_getIframeContentJSON:function(a){var a=a.contentDocument?a.contentDocument:a.contentWindow.document,b;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+a.body.innerHTML);try{b=eval("("+a.body.innerHTML+")")}catch(c){b={}}return b},_createIframe:function(a){var b=qq.toElement('<iframe src="javascript:false;" name="'+a+'" />');b.setAttribute("id",a);b.style.display="none";document.body.appendChild(b);return b},_createForm:function(a,b){var c=qq.toElement('<form method="post" enctype="multipart/form-data"></form>'),
d=qq.obj2url(b,this._options.action);c.setAttribute("action",d);c.setAttribute("target",a.name);c.style.display="none";document.body.appendChild(c);return c}});qq.UploadHandlerXhr=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");a.type="file";return"multiple"in a&&typeof File!="undefined"&&typeof(new XMLHttpRequest).upload!="undefined"};
qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);
qq.extend(qq.UploadHandlerXhr.prototype,{add:function(a){if(!(a instanceof File))throw Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(a)-1},getName:function(a){a=this._files[a];return a.fileName!=null?a.fileName:a.name},getSize:function(a){a=this._files[a];return a.fileSize!=null?a.fileSize:a.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(a,b){var c=this._files[a],d=this.getName(a);this.getSize(a);this._loaded[a]=0;var e=this._xhrs[a]=new XMLHttpRequest,
g=this;e.upload.onprogress=function(b){if(b.lengthComputable)g._loaded[a]=b.loaded,g._options.onProgress(a,d,b.loaded,b.total)};e.onreadystatechange=function(){e.readyState==4&&g._onComplete(a,e)};b=b||{};b.qqfile=d;var i=qq.obj2url(b,this._options.action);e.open("POST",i,true);e.setRequestHeader("X-Requested-With","XMLHttpRequest");e.setRequestHeader("X-File-Name",encodeURIComponent(d));e.setRequestHeader("Content-Type","application/octet-stream");e.send(c)},_onComplete:function(a,b){if(this._files[a]){var c=
this.getName(a),d=this.getSize(a);this._options.onProgress(a,c,d,d);if(b.status==200){this.log("xhr - server response received");this.log("responseText = "+b.responseText);var e;try{e=eval("("+b.responseText+")")}catch(g){e={}}this._options.onComplete(a,c,e)}else this._options.onComplete(a,c,{});this._files[a]=null;this._xhrs[a]=null;this._dequeue(a)}},_cancel:function(a){this._options.onCancel(a,this.getName(a));this._files[a]=null;this._xhrs[a]&&(this._xhrs[a].abort(),this._xhrs[a]=null)}});
(function(a){function b(a,b){b.find("> .active").removeClass("active").find("> .dropdown-menu > .active").removeClass("active");a.addClass("active");a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active")}function c(c){var e=a(this),g=e.closest("ul:not(.dropdown-menu)"),i=e.attr("href");/^#\w+/.test(i)&&(c.preventDefault(),e.parent("li").hasClass("active")||(c=g.find(".active a").last()[0],i=a(i),b(e.parent("li"),g),b(i,i.parent()),e.trigger({type:"change",relatedTarget:c})))}a.fn.tabs=
a.fn.pills=function(b){return this.each(function(){a(this).delegate(b||".tabs li > a, .pills > li > a","click",c)})};a(document).ready(function(){a("body").tabs("ul[data-tabs] li > a, ul[data-pills] > li > a")})})(window.jQuery||window.ender);var pagePlayer=null;
function PagePlayer(){var a=this,b=this,c=soundManager,d,e=null,g=null,i=document.getElementsByTagName("head")[0],j=null,h=navigator.userAgent,n=h.match(/(opera|firefox)/i),o=h.match(/ipad|ipod|iphone/i),p;this.config={usePeakData:false,useWaveformData:false,useEQData:false,fillGraph:false,useMovieStar:true,allowRightClick:true,useThrottling:true,autoStart:false,playNext:false,updatePageTitle:false,emptyTime:"-:--",useFavIcon:false};this.css={sDefault:"sm2_link",sLoading:"sm2_loading",sPlaying:"sm2_playing",
sPaused:"sm2_paused"};this.sounds=[];this.soundsByObject=[];this.lastSound=null;this.soundCount=0;this.strings=[];this.dragActive=false;this.dragExec=new Date;this.dragTimer=null;this.pageTitle=document.title;this.lastWPExec=new Date;this.lastWLExec=new Date;this.vuMeterData=[];this.oControls=null;this._mergeObjects=function(a,b){var c={},d,e;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);d=typeof b==="undefined"?{}:b;for(e in d)typeof c[e]==="undefined"&&(c[e]=d[e]);return c};d=function(){function a(b){var b=
d.call(b),f=b.length;c?(b[1]="on"+b[1],f>3&&b.pop()):f===3&&b.push(false);return b}function b(a,d){var f=a.shift(),g=[e[d]];if(c)f[g](a[0],a[1]);else f[g].apply(f,a)}var c=window.attachEvent&&!window.addEventListener,d=Array.prototype.slice,e={add:c?"attachEvent":"addEventListener",remove:c?"detachEvent":"removeEventListener"};return{add:function(){b(a(arguments),"add")},remove:function(){b(a(arguments),"remove")}}}();this.hasClass=function(a,b){return typeof a.className!=="undefined"?RegExp("(^|\\s)"+
b+"(\\s|$)").test(a.className):false};this.addClass=function(b,c){if(!b||!c||a.hasClass(b,c))return false;b.className=(b.className?b.className+" ":"")+c};this.removeClass=function(b,c){if(!b||!c||!a.hasClass(b,c))return false;b.className=b.className.replace(RegExp("( "+c+")|("+c+")","g"),"")};this.select=function(b,c){var d=a.getByClassName(b,"div",c||null);return d?d[0]:null};this.getByClassName=document.querySelectorAll?function(a,b,c){a="."+a;b&&(b=b.split(" "));b=b.length>1?b.join(a+", "):b[0]+
a;return(c?c:document).querySelectorAll(b)}:function(b,c,d){var e=d?d:document,d=[],g,h=[];c&&(c=c.split(" "));if(c instanceof Array){for(g=c.length;g--;)if(!h||!h[c[g]])h[c[g]]=e.getElementsByTagName(c[g]);for(g=c.length;g--;)for(e=h[c[g]].length;e--;)a.hasClass(h[c[g]][e],b)&&d.push(h[c[g]][e])}else{h=e.all||e.getElementsByTagName("*");for(g=0,e=h.length;g<e;g++)a.hasClass(h[g],b)&&d.push(h[g])}return d};this.isChildOfClass=function(b,c){if(!b||!c)return false;for(;b.parentNode&&!a.hasClass(b,c);)b=
b.parentNode;return a.hasClass(b,c)};this.getParentByNodeName=function(a,b){if(!a||!b)return false;for(b=b.toLowerCase();a.parentNode&&b!==a.parentNode.nodeName.toLowerCase();)a=a.parentNode;return a.parentNode&&b===a.parentNode.nodeName.toLowerCase()?a.parentNode:null};this.getOffX=function(a){var b=0;if(a.offsetParent)for(;a.offsetParent;)b+=a.offsetLeft,a=a.offsetParent;else a.x&&(b+=a.x);return b};this.getTime=function(a,b){var c=Math.floor(a/1E3),d=Math.floor(c/60);c-=d*60;return b?d+":"+(c<
10?"0"+c:c):{min:d,sec:c}};this.getSoundByObject=function(b){return typeof a.soundsByObject[b.id]!=="undefined"?a.soundsByObject[b.id]:null};this.getPreviousItem=function(a){if(a.previousElementSibling)a=a.previousElementSibling;else for(a=a.previousSibling;a&&a.previousSibling&&a.previousSibling.nodeType!==1;)a=a.previousSibling;return a.nodeName.toLowerCase()!=="li"?null:a.getElementsByTagName("a")[0]};this.playPrevious=function(c){if(!c)c=a.lastSound;if(!c)return false;(c=a.getPreviousItem(c._data.oLI))&&
b.handleClick({target:c});return c};this.getNextItem=function(a){if(a.nextElementSibling)a=a.nextElementSibling;else for(a=a.nextSibling;a&&a.nextSibling&&a.nextSibling.nodeType!==1;)a=a.nextSibling;return a.nodeName.toLowerCase()!=="li"?null:a.getElementsByTagName("a")[0]};this.playNext=function(c){if(!c)c=a.lastSound;if(!c)return false;(c=a.getNextItem(c._data.oLI))&&b.handleClick({target:c});return c};this.setPageTitle=function(b){if(!a.config.updatePageTitle)return false;try{document.title=(b?
b+" - ":"")+a.pageTitle}catch(c){a.setPageTitle=function(){return false}}};this.events={play:function(){b.removeClass(this._data.oLI,this._data.className);this._data.className=b.css.sPlaying;b.addClass(this._data.oLI,this._data.className);a.setPageTitle(this._data.originalTitle)},stop:function(){b.removeClass(this._data.oLI,this._data.className);this._data.className="";this._data.oPosition.style.width="0px";a.setPageTitle();a.resetPageIcon()},pause:function(){if(b.dragActive)return false;b.removeClass(this._data.oLI,
this._data.className);this._data.className=b.css.sPaused;b.addClass(this._data.oLI,this._data.className);a.setPageTitle();a.resetPageIcon()},resume:function(){if(b.dragActive)return false;b.removeClass(this._data.oLI,this._data.className);this._data.className=b.css.sPlaying;b.addClass(this._data.oLI,this._data.className)},finish:function(){b.removeClass(this._data.oLI,this._data.className);this._data.className="";this._data.oPosition.style.width="0px";a.config.playNext?b.playNext(this):(a.setPageTitle(),
a.resetPageIcon())},whileloading:function(){function c(){this._data.oLoading.style.width=this.bytesLoaded/this.bytesTotal*100+"%";if(!this._data.didRefresh&&this._data.metadata)this._data.didRefresh=true,this._data.metadata.refresh()}if(b.config.useThrottling){var d=new Date;if(d&&d-a.lastWLExec>30||this.bytesLoaded===this.bytesTotal)c.apply(this),a.lastWLExec=d}else c.apply(this)},onload:function(){if(this.loaded)this._data.metadata&&this._data.metadata.refresh();else{var a=this._data.oLI.getElementsByTagName("a")[0],
b=a.innerHTML;a.innerHTML=b+' <span style="font-size:0.5em"> | Load failed, d\'oh! '+(c.sandbox.noRemote?" Possible cause: Flash sandbox is denying remote URL access.":c.sandbox.noLocal?"Flash denying local filesystem access":"404?")+"</span>";setTimeout(function(){a.innerHTML=b},5E3)}},whileplaying:function(){var d=null;if(b.dragActive||!b.config.useThrottling){a.updateTime.apply(this);c.flashVersion>=9&&(b.config.usePeakData&&this.instanceOptions.usePeakData&&a.updatePeaks.apply(this),(b.config.useWaveformData&&
this.instanceOptions.useWaveformData||b.config.useEQData&&this.instanceOptions.useEQData)&&a.updateGraph.apply(this));if(this._data.metadata&&(d=new Date)&&d-a.lastWPExec>500)this._data.metadata.refreshMetadata(this),a.lastWPExec=d;this._data.oPosition.style.width=this.position/a.getDurationEstimate(this)*100+"%"}else if(d=new Date,d-a.lastWPExec>30)a.updateTime.apply(this),c.flashVersion>=9&&(b.config.usePeakData&&this.instanceOptions.usePeakData&&a.updatePeaks.apply(this),(b.config.useWaveformData&&
this.instanceOptions.useWaveformData||b.config.useEQData&&this.instanceOptions.useEQData)&&a.updateGraph.apply(this)),this._data.metadata&&this._data.metadata.refreshMetadata(this),this._data.oPosition.style.width=this.position/a.getDurationEstimate(this)*100+"%",a.lastWPExec=d}};this.setPageIcon=function(b){if(!a.config.useFavIcon||!a.config.usePeakData||!b)return false;var c=document.getElementById("sm2-favicon");c&&(i.removeChild(c),c=null);if(!c)c=document.createElement("link"),c.id="sm2-favicon",
c.rel="shortcut icon",c.type="image/png",c.href=b,document.getElementsByTagName("head")[0].appendChild(c)};this.resetPageIcon=function(){if(!a.config.useFavIcon)return false;var b=document.getElementById("favicon");if(b)b.href="/favicon.ico"};this.updatePeaks=function(){var b=this._data.oPeak.getElementsByTagName("span");b[0].style.marginTop=13-Math.floor(15*this.peakData.left)+"px";b[1].style.marginTop=13-Math.floor(15*this.peakData.right)+"px";c.flashVersion>8&&a.config.useFavIcon&&a.config.usePeakData&&
a.setPageIcon(a.vuMeterData[parseInt(16*this.peakData.left,10)][parseInt(16*this.peakData.right,10)])};this.updateGraph=function(){if(b.config.flashVersion<9||!b.config.useWaveformData&&!b.config.useEQData)return false;var a=this._data.oGraph.getElementsByTagName("div"),c;if(b.config.useWaveformData)for(c=255;c--;)a[255-c].style.marginTop=9+Math.ceil(this.waveformData.left[c]*-8)+"px";else for(c=255;c--;)a[255-c].style.marginTop=17+Math.ceil(this.eqData[c]*-9)+"px"};this.resetGraph=function(){if(!b.config.useEQData||
b.config.flashVersion<9)return false;var a=this._data.oGraph.getElementsByTagName("div"),c=!b.config.useEQData?"9px":"17px",d=!b.config.fillGraph?"1px":"32px",e;for(e=255;e--;)a[255-e].style.marginTop=c,a[255-e].style.height=d};this.updateTime=function(){var b=a.strings.timing.replace("%s1",a.getTime(this.position,true)),b=b.replace("%s2",a.getTime(a.getDurationEstimate(this),true));this._data.oTiming.innerHTML=b};this.getTheDamnTarget=function(a){return a.target||(window.event?window.event.srcElement:
null)};this.withinStatusBar=function(b){return a.isChildOfClass(b,"controls")};this.handleClick=function(d){if(d.button===2)return b.config.allowRightClick||b.stopEvent(d),b.config.allowRightClick;var e=a.getTheDamnTarget(d),g,h,i;if(!e)return true;a.dragActive&&a.stopDrag();if(a.withinStatusBar(e))return false;e.nodeName.toLowerCase()!=="a"&&(e=a.getParentByNodeName(e,"a"));if(!e)return true;e.getAttribute("href");if(!e.href||!c.canPlayLink(e)&&!a.hasClass(e,"playable")||a.hasClass(e,"exclude"))return true;
else{a.initUL(a.getParentByNodeName(e,"ul"));a.initItem(e);g=e.href;if(h=a.getSoundByObject(e))a.setPageTitle(h._data.originalTitle),h===a.lastSound?h.readyState!==2?h.playState!==1?h.play():h.togglePause():c._writeDebug("Warning: sound failed to load (security restrictions, 404 or bad format)",2):(a.lastSound&&a.stopSound(a.lastSound),j&&h._data.oTimingBox.appendChild(j),h.togglePause());else{h=c.createSound({id:e.id,url:decodeURI(g),onplay:a.events.play,onstop:a.events.stop,onpause:a.events.pause,
onresume:a.events.resume,onfinish:a.events.finish,whileloading:a.events.whileloading,whileplaying:a.events.whileplaying,onmetadata:a.events.metadata,onload:a.events.onload});g=a.oControls.cloneNode(true);i=e.parentNode;i.appendChild(g);j&&i.appendChild(j);a.soundsByObject[e.id]=h;h._data={oLink:e,oLI:i,oControls:a.select("controls",i),oStatus:a.select("statusbar",i),oLoading:a.select("loading",i),oPosition:a.select("position",i),oTimingBox:a.select("timing",i),oTiming:a.select("timing",i).getElementsByTagName("div")[0],
oPeak:a.select("peak",i),oGraph:a.select("spectrum-box",i),className:a.css.sPlaying,originalTitle:e.innerHTML,metadata:null};j&&h._data.oTimingBox.appendChild(j);if(h._data.oLI.getElementsByTagName("ul").length)h._data.metadata=new Metadata(h);e=a.strings.timing.replace("%s1",a.config.emptyTime);e=e.replace("%s2",a.config.emptyTime);h._data.oTiming.innerHTML=e;a.sounds.push(h);a.lastSound&&a.stopSound(a.lastSound);a.resetGraph.apply(h);h.play()}a.lastSound=h;return a.stopEvent(d)}};this.handleMouseDown=
function(c){o&&c.touches&&(c=c.touches[0]);if(c.button===2)return b.config.allowRightClick||b.stopEvent(c),b.config.allowRightClick;var e=a.getTheDamnTarget(c);if(!e)return true;if(!a.withinStatusBar(e))return true;a.dragActive=true;a.lastSound.pause();a.setPosition(c);o?d.add(document,"touchmove",a.handleMouseMove):d.add(document,"mousemove",a.handleMouseMove);a.addClass(a.lastSound._data.oControls,"dragging");return a.stopEvent(c)};this.handleMouseMove=function(b){o&&b.touches&&(b=b.touches[0]);
if(a.dragActive)if(a.config.useThrottling){var c=new Date;c-a.dragExec>20?a.setPosition(b):(window.clearTimeout(a.dragTimer),a.dragTimer=window.setTimeout(function(){a.setPosition(b)},20));a.dragExec=c}else a.setPosition(b);else a.stopDrag();b.stopPropagation=true;return false};this.stopDrag=function(c){if(a.dragActive)return a.removeClass(a.lastSound._data.oControls,"dragging"),o?d.remove(document,"touchmove",a.handleMouseMove):d.remove(document,"mousemove",a.handleMouseMove),b.hasClass(a.lastSound._data.oLI,
a.css.sPaused)||a.lastSound.resume(),a.dragActive=false,a.stopEvent(c)};this.handleStatusClick=function(c){a.setPosition(c);b.hasClass(a.lastSound._data.oLI,a.css.sPaused)||a.resume();return a.stopEvent(c)};this.stopEvent=function(a){if(typeof a!=="undefined")typeof a.preventDefault!=="undefined"?a.preventDefault():(a.stopPropagation=true,a.returnValue=false);return false};this.setPosition=function(b){var c=a.getTheDamnTarget(b),d;if(!c)return true;for(d=c;!a.hasClass(d,"controls")&&d.parentNode;)d=
d.parentNode;c=a.lastSound;b=parseInt(b.clientX,10);b=Math.floor((b-a.getOffX(d)-4)/d.offsetWidth*a.getDurationEstimate(c));isNaN(b)||(b=Math.min(b,c.duration));isNaN(b)||c.setPosition(b)};this.stopSound=function(a){c._writeDebug("stopping sound: "+a.sID);c.stop(a.sID);o||c.unload(a.sID)};this.getDurationEstimate=function(a){return a.instanceOptions.isMovieStar?a.duration:!a._data.metadata||!a._data.metadata.data.givenDuration?a.durationEstimate||0:a._data.metadata.data.givenDuration};this.createVUData=
function(){var b=0,c=0,d=e.getContext("2d"),g=d.createLinearGradient(0,16,0,0),h;g.addColorStop(0,"rgb(0,192,0)");g.addColorStop(0.3,"rgb(0,255,0)");g.addColorStop(0.625,"rgb(255,255,0)");g.addColorStop(0.85,"rgb(255,0,0)");h=d.createLinearGradient(0,16,0,0);h.addColorStop(0,"rgba(0,0,0,0.2)");h.addColorStop(1,"rgba(0,0,0,0.5)");for(b=0;b<16;b++)a.vuMeterData[b]=[];for(b=0;b<16;b++)for(c=0;c<16;c++)e.setAttribute("width",16),e.setAttribute("height",16),d.fillStyle=h,d.fillRect(0,0,7,15),d.fillRect(8,
0,7,15),d.fillStyle=g,d.fillRect(0,15-b,7,16-(16-b)),d.fillRect(8,15-c,7,16-(16-c)),d.clearRect(0,3,16,1),d.clearRect(0,7,16,1),d.clearRect(0,11,16,1),a.vuMeterData[b][c]=e.toDataURL("image/png")};this.testCanvas=function(){var a=document.createElement("canvas"),b=null;if(!a||typeof a.getContext==="undefined")return null;b=a.getContext("2d");if(!b||typeof a.toDataURL!=="function")return null;try{a.toDataURL("image/png")}catch(c){return null}return a};this.initItem=function(b){if(!b.id)b.id="pagePlayerMP3Sound"+
a.soundCount++;a.addClass(b,a.css.sDefault)};this.initUL=function(b){c.flashVersion>=9&&a.addClass(b,a.cssBase)};this.init=function(f){function h(b){d[b](document,"click",a.handleClick);o?(d[b](document,"touchstart",a.handleMouseDown),d[b](document,"touchend",a.stopDrag)):(d[b](document,"mousedown",a.handleMouseDown),d[b](document,"mouseup",a.stopDrag));d[b](window,"unload",p)}f?(c._writeDebug("pagePlayer.init(): Using custom configuration"),this.config=this._mergeObjects(f,this.config)):c._writeDebug("pagePlayer.init(): Using default configuration");
var i,l,z,s;this.cssBase=[];c.useFlashBlock=true;if(c.flashVersion>=9){if(c.useMovieStar=this.config.useMovieStar,c.defaultOptions.usePeakData=this.config.usePeakData,c.defaultOptions.useWaveformData=this.config.useWaveformData,c.defaultOptions.useEQData=this.config.useEQData,this.config.usePeakData&&this.cssBase.push("use-peak"),(this.config.useWaveformData||this.config.useEQData)&&this.cssBase.push("use-spectrum"),this.cssBase=this.cssBase.join(" "),this.config.useFavIcon)(e=a.testCanvas())&&n?
a.createVUData():this.config.useFavIcon=false}else(this.config.usePeakData||this.config.useWaveformData||this.config.useEQData)&&c._writeDebug("Page player: Note: soundManager.flashVersion = 9 is required for peak/waveform/EQ features.");g=document.createElement("div");g.className="prueba clearfix";g.innerHTML='  <div class="controls">\n   <div class="statusbar">\n    <div class="loading"></div>\n    <div class="position"></div>\n   </div>\n  </div>\n  <div class="timing">\n   <div id="sm2_timing" class="timing-data">\n    <span class="sm2_position">%s1</span> / <span class="sm2_total">%s2</span>\n   </div>\n  </div>\n  <div class="peak">\n   <div class="peak-box"><span class="l"></span><span class="r"></span></div>\n  </div>\n <div class="spectrum-container">\n  <div class="spectrum-box">\n   <div class="spectrum"></div>\n  </div>\n </div>';
if(c.flashVersion>=9){j=a.select("spectrum-container",g);j=g.removeChild(j);i=a.select("spectrum-box",j);l=i.getElementsByTagName("div")[0];z=document.createDocumentFragment();s=null;for(f=256;f--;)s=l.cloneNode(false),s.style.left=f+"px",z.appendChild(s);i.removeChild(l);i.appendChild(z)}else g.removeChild(a.select("spectrum-container",g)),g.removeChild(a.select("peak",g));a.oControls=g.cloneNode(true);f=a.select("timing-data",g);a.strings.timing=f.innerHTML;f.innerHTML="";f.id="";p=function(){h("remove")};
h("add");c._writeDebug("pagePlayer.init(): Ready",1);a.config.autoStart&&b.handleClick({target:b.getByClassName("playlist","ul")[0].getElementsByTagName("a")[0]})}}soundManager.useFlashBlock=true;soundManager.onready(function(){pagePlayer=new PagePlayer;pagePlayer.init(typeof PP_CONFIG!=="undefined"?PP_CONFIG:null)});
(function(a){a.widget("ui.addresspicker",{options:{defaultAddress:"",appendAddressString:"",mapOptions:{zoom:5,center:new google.maps.LatLng(46,2),scrollwheel:false,mapTypeId:google.maps.MapTypeId.ROADMAP},elements:{map:false,lat:false,lng:false,locality:false,country:false},geocoder:{},draggableMarker:true},marker:function(){return this.gmarker},map:function(){return this.gmap},updatePosition:function(){this._updatePosition(this.gmarker.getPosition())},reloadPosition:function(){this.gmarker.setVisible(true);
this.gmarker.setPosition(new google.maps.LatLng(this.lat.val(),this.lng.val()));this.gmap.setCenter(this.gmarker.getPosition())},selected:function(){return this.selectedResult},_create:function(){this.geocoder=new google.maps.Geocoder;this.element.autocomplete({source:a.proxy(this._geocode,this),focus:a.proxy(this._focusAddress,this),select:a.proxy(this._selectAddress,this)});this.lat=a(this.options.elements.lat);this.lng=a(this.options.elements.lng);this.locality=a(this.options.elements.locality);
this.country=a(this.options.elements.country);if(this.options.elements.map)this.mapElement=a(this.options.elements.map),this._initMap()},_initMap:function(){if(this.lat&&this.lat.val())this.options.mapOptions.center=new google.maps.LatLng(this.lat.val(),this.lng.val());this.gmap=new google.maps.Map(this.mapElement[0],this.options.mapOptions);var b=new google.maps.MarkerImage("/images/maps_sprite.png",new google.maps.Size(24,34),new google.maps.Point(0,67),new google.maps.Point(12,30));this.gmarker=
new google.maps.Marker({position:this.options.mapOptions.center,map:this.gmap,icon:b,draggable:this.options.draggableMarker});google.maps.event.addListener(this.gmarker,"dragend",a.proxy(this._markerMoved,this));this.options.defaultAddress==""?(this.element.val(""),this.gmarker.setVisible(false)):(this.element.val(this.options.defaultAddress),this.gmarker.setVisible(true));this.geocoder=new google.maps.Geocoder;b=document.createElement("DIV");new ZoomInControl(b,this.gmap);b.index=1;this.gmap.controls[google.maps.ControlPosition.TOP_LEFT].push(b);
b=document.createElement("DIV");new ZoomOutControl(b,this.gmap);b.index=2;this.gmap.controls[google.maps.ControlPosition.LEFT].push(b)},_updatePosition:function(a){this.lat&&this.lat.val(a.lat());this.lng&&this.lng.val(a.lng())},_markerMoved:function(){this.element.autocomplete("close");this._reverseGeocode(this.gmarker.getPosition());this._updatePosition(this.gmarker.getPosition())},_geocode:function(a,c){var d=this.options.geocoder;d.address=a.term+this.options.appendAddressString;this.geocoder.geocode(d,
function(a,b){if(b==google.maps.GeocoderStatus.OK)for(var d=[],j=0;j<Math.min(a.length,3);j++)a[j].label=a[j].formatted_address,d.push(a[j]);c(d)})},_reverseGeocode:function(a){var c=this;this.geocoder.geocode({latLng:a},function(a,b){b==google.maps.GeocoderStatus.OK&&a[1]&&(c.element.val(a[1].formatted_address),c.element.trigger("reversegeocode"))})},_findInfo:function(a,c){for(var d=0;d<a.address_components.length;d++){var e=a.address_components[d];if(e.types.indexOf(c)!=-1)return e.long_name}return false},
_focusAddress:function(a,c){var d=c.item;d&&(this.gmarker&&(this.gmarker.setPosition(d.geometry.location),this.gmarker.setVisible(true),this.gmap.fitBounds(d.geometry.viewport)),this._updatePosition(d.geometry.location),this.locality&&this.locality.val(this._findInfo(d,"locality")),this.country&&this.country.val(this._findInfo(d,"country")))},_selectAddress:function(a,c){this.selectedResult=c.item;this.element.val(c.item.formatted_address)}});a.extend(a.ui.addresspicker,{version:"@VERSION"})})(jQuery);(function(a,b,c){function d(a,b,c){var d,e;d=a.attr("data-dk-dropdown-value");a=a.text();e=b.data("dropkick");$select=e.$select;$select.val(d);b.find(".dk_label").text(a);e.settings.change&&!c&&e.settings.change.call($select,d,a)}function e(a,b){b.find(".dk_option_current").removeClass("dk_option_current");a.addClass("dk_option_current");var c=a.prevAll("li").outerHeight()*a.prevAll("li").length;b.find(".dk_options_inner").animate({scrollTop:c+"px"},0)}function g(a){GOD.subscribe("blur.dropkick");
var b=a.data("dropkick");a.find(".dk_options").css({top:a.find(".dk_toggle").outerHeight()-1});a.toggleClass("dk_open");b.scrollbar?a.find(".scrollpane").data("jsp").reinitialise():(b.scrollbar=a.find(".scrollpane").jScrollPane({verticalDragMinHeight:20}),a.find(".dk_options").css({width:a.find(".dk_options").width()-2+"px"}))}function i(b,c){var d,e=[];d=b.replace("{{ id }}",c.id);d=d.replace("{{ label }}",c.label);d=d.replace("{{ tabindex }}",c.tabindex);if(c.options&&c.options.length)for(var f=
0,g=c.options.length;f<g;f++){var h=a(c.options[f]),i=p,i=i.replace("{{ value }}",h.val()),i=i.replace("{{ current }}",j(h.val())===c.value?"dk_option_current":""),i=i.replace("{{ id }}",h.attr("data-id")),i=i.replace("{{ text }}",h.text());e[e.length]=i}d=a(d);d.find(".dk_options_inner").html(e.join(""));return d}function j(b){return a.trim(b).length>0?b:false}var h=false;a.browser.msie&&a.browser.version.substr(0,1)<7?h=true:c.documentElement.className+=" dk_fouc";var n={},o=[],p='<li class="{{ current }}"><a data-id="{{ id }}" data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',
f={startSpeed:1,theme:false,change:false};n.init=function(c){c=a.extend({},f,c);return this.each(function(){var d=a(this),e=d.find(":selected").first(),f=d.find("option"),g=d.data("dropkick")||{},h=d.attr("id")||d.attr("name"),n=c.width||d.outerWidth()+5,m=d.attr("tabindex")?d.attr("tabindex"):"",p=false;if(g.id)return d;else g.settings=c,g.tabindex=m,g.id=h,g.$original=e,g.$select=d,g.value=j(d.val())||j(e.attr("value")),g.label=e.text(),g.options=f;p=i('<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}"><a class="dk_toggle"><span class="dk_label">{{ label }}</span></a><div class="dk_options"><div class="dk_inner"><ul class="dk_options_inner scrollpane"></ul></div></div></div>',
g);p.find(".dk_toggle").css({width:n+40+"px"});d.before(p);p=a("#dk_container_"+h).fadeIn(c.startSpeed);e=c.theme?c.theme:"default";p.addClass("dk_theme_"+e);g.theme=e;g.$dk=p;d.data("dropkick",g);p.data("dropkick",g);o[o.length]=d;a(b).bind("blur.dropkick.",function(){p.removeClass("dk_open dk_focus")});setTimeout(function(){d.hide()},0)})};n.theme=function(b){var c=a(this).data("dropkick");c.$dk.removeClass("dk_theme_"+c.theme).addClass("dk_theme_"+b);c.theme=b};n.reset=function(){for(var a=0,b=
o.length;a<b;a++){var c=o[a].data("dropkick"),f=c.$dk,g=f.find("li").first();f.find(".dk_label").text(c.label);f.find(".dk_options_inner").animate({scrollTop:0},0);e(g,f);d(g,f,true)}};a.fn.dropkick=function(a){if(!h)if(n[a])return n[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return n.init.apply(this,arguments)};a(function(){a(".dk_toggle").live("click",function(c){c.stopPropagation();var d=a(this).parents(".dk_container").first();g(d);d.find(".jspVerticalBar").unbind("click");
d.find(".jspVerticalBar").click(function(a){a.preventDefault();a.stopPropagation()});"ontouchstart"in b&&(d.addClass("dk_touch"),d.find(".dk_options_inner").addClass("scrollable vertical"));c.preventDefault();return false});a(".dk_options a").live(a.browser.msie?"mousedown":"click",function(b){var c=a(this),f=c.parents(".dk_container").first(),g=f.data("dropkick");g.settings.callback&&g.settings.callback(a(this));g.settings.filterEvents&&(g=a(this).attr("data-id"),g!=0?(filterArea=g,a("ul.events li").fadeOut(150),
a("ul.events li.area_"+g).fadeIn(150),a(".marker, .marker .infowindow").fadeOut(150),a(".marker.area_"+g).fadeIn(150)):(filterArea=0,a("ul.events li").fadeIn(250),a(".marker").fadeIn(150),a("div.infowindow").hide()));f.removeClass("dk_open");d(c,f);e(c.parent(),f);b.preventDefault();return false});a(c).bind("keydown.dk_nav",function(b){var c=a(".dk_container.dk_open"),f=a(".dk_container.dk_focus"),h=null;c.length?h=c:f.length&&!c.length&&(h=f);if(h){var c=h,i=b.keyCode;c.data("dropkick");var j=c.find(".dk_options"),
f=c.hasClass("dk_open"),n=c.find(".dk_option_current"),h=j.find("li").first(),j=j.find("li").last();switch(i){case 13:f?(d(n.find("a"),c),c.removeClass("dk_open")):g(c);b.preventDefault();break;case 38:h=n.prev("li");f?h.length?e(h,c):e(j,c):g(c);b.preventDefault();break;case 40:f?(f=n.next("li").first(),f.length?e(f,c):e(h,c)):g(c),b.preventDefault()}}})})})(jQuery,window,document);$(function(){watchHash();$(".home_last_activity").verticalHomeLoop();$(".editable.text").enableTextEditing();$(".editable.target").enableTargetEditing();$(".editable.date").enableDateEditing();$(".image_editor").enableImageEditing();$(".editable.location .footer").enableLocationEditing();$(".right .tags.editable").enableEditTags();$(".people.editable").enablePoliticianTags();$(".context ul.editable.tags").enableAreaEditing();$(".avatar_uploader_form").enableAvatarUpload();$(".tabs").tabs();$(".slideshow").enableSlideshow();
$(".more_proposals").enablePagination({name:"proposals"});$(".more_months").enablePagination({name:"months"});$(".more_questions").enablePagination({name:"questions"});$(".more_actions").enablePagination({name:"actions"});$("textarea.grow").autogrow();$(".cycle").enableRegistration();$(".article.agenda .agenda_map").animate({height:$(".agenda_map ul.agenda").height()},0);$(".view_calendar").viewCalendar();$(".view_map").viewMap();$("nav form").autocompleteSearch();$("a.checkbox").enableCheckbox();
$(".radios").enableRadio();$("select.dropkick").dropkick();$(".municipalities_dropdown").dropkick();if($(".provinces_dropdown").length>0){var a=$(".provinces_dropdown option[selected='selected']").attr("data-id");a&&($("#dk_container_user_city_id li a").hide(),$("#dk_container_user_city_id li a[data-id='"+a+"']").show(),$("#dk_container_user_city_id li a[data-id='undefined']").show())}$(".provinces_dropdown").dropkick({callback:function(a){a=a.attr("data-dk-dropdown-value");$("#dk_container_user_city_id .dk_label").html("");
$(".provinces_dropdown option[selected='selected']").removeAttr("selected");$(".provinces_dropdown option:first-child").attr("selected","selected");$("#dk_container_user_city_id li a").hide();$("#dk_container_user_city_id li a[data-id='territory_"+a+"']").show();$("#dk_container_user_city_id li a[data-id='undefined']").show()}});$(".area_filter").dropkick({filterEvents:true});$('form .field.born_at select[name="user[birthday(1i)]"]').dropkick({width:-10});$('form .field.born_at select[name="user[birthday(2i)]"]').dropkick({width:77});
$('form .field.born_at select[name="user[birthday(3i)]"]').dropkick({width:-20});$("a.see_all_areas").enableSeeAllAreas();$(".welcome-slideshow").enableWelcomeSlideshow();$(".my_opinion").enableOpinion();$(".article.proposal .proposals .proposal").enableArguments();$("form.add_comment").enableComments();$(".comment-box form").enableCommentBox();$(".goto_comments").enableGotoComments();$(".notifications").enableNotificationSelector();$(".floating-login").floatingLoginPopover();$(".placeholder").smartPlaceholder();
$(".input-counter").inputCounter();$(".share.more, .share.email").sharePopover();$(".share.inline").inlineSharePopover();$(".show_event").infoEventPopover();$(".ask_question").questionPopover();$(".make_question").enableQuestion();$(".remove_account").removeAccountPopover();$(".user_publish").userPublishPopover();$(".politician_publish").politicianPublishPopover();$(".create_proposal").proposalPopover();$(".auth a.login").loginPopover();$(".with_filters").enableFiltering();$(".with_filters").enableFiltering();
$(".areas_selector").areasPopover();$(".toggle_notifications").notificationPopover();$("input.ribbon, .toggle_notifications, .after_share.email, .share.email, .share.twitter, .share.facebook, .share.ical, a.settings, .sign_out").tipsy({gravity:"s",offset:3,title:"data-label"});$(".follow.basic form").live("submit",function(){IrekiaSpinner.stop();IrekiaSpinner.spin();$(IrekiaSpinner.el).css({bottom:"-8px",position:"absolute",right:"0",height:"15px",width:"15px","z-index":"1000"});$(this).closest("div.content").append(IrekiaSpinner.el)}).live("ajax:success",
function(a,c){var d=$(this).parent();d.fadeOut(150,function(){d.parents("li").toggleClass("selected");$(this).html(c);$(this).fadeIn(150)});IrekiaSpinner.stop()}).live("ajax:error",function(){$(this).effect("shake",{times:4},100);IrekiaSpinner.stop()});$("form.follow_button, form.follow_ribbon").live("submit",function(){IrekiaSpinner.stop();IrekiaSpinner.spin();$(IrekiaSpinner.el).css({position:"relative","float":"none",display:"inline",right:"-20px",top:"27px",height:"15px",width:"15px"});$(this).closest("div.content").find("h1").children().length>
0?$(this).closest("div.content").find("h1 a").append(IrekiaSpinner.el):$(this).closest("div.content").find("h1").append(IrekiaSpinner.el)}).live("ajax:success",function(a,c){$("div.column form.follow_button").fadeOut(150,function(){var a=$(this).parent();$(this).remove();a.append(c);a.find("form.follow_ribbon").remove();a.find("form.follow_button").fadeIn(150)});$(".article").find("form.follow_ribbon").fadeOut(150,function(){var a=$(this).parent();$(this).remove();a.append(c);a.find("form.follow_button").last().remove();
$(this).fadeIn(150)});$("input.ribbon").tipsy("hide");IrekiaSpinner.stop()}).live("ajax:error",function(){$(this).effect("shake",{times:4},100);IrekiaSpinner.stop()});$(".follow_ribbon .ribbon").live("mouseenter",function(){$(this).closest("form").stop(true).animate({height:"90px"},300)}).live("mouseleave",function(){$(this).closest("form").stop(true).animate({height:"75px"},300)});$("div.answering form").live("ajax:success",function(a,c){var d=$(this).closest("div.answering"),e=$(c);$("span.not_answered").html(e[0]);
$("span.not_answered").addClass("answered");$("span.not_answered").removeClass("not_answered");d.fadeOut(function(){d.before(e[2]);e.fadeIn()})});$(".share.twitter").live("click",function(){window.open(this.href,"twitter","status=1,width=611,height=400,top=44,left=21");return false});$(".answer_placeholder form").bind("ajax:success",function(a,c){var d=$(this).parents(".answer_placeholder").find(".has_requested_answer");$(this).fadeOut(150);d.fadeOut(150,function(){d.html(c);d.fadeIn(150)})})});
